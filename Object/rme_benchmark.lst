ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 1


   1              		.cpu cortex-a9
   2              		.arch armv7-a
   3              		.fpu neon-fp16
   4              		.arch_extension mp
   5              		.arch_extension sec
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"rme_benchmark.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Source/rme_benchmark.c"
  20              		.global	RME_Stack1
  21              		.section	.bss.RME_Stack1,"aw",%nobits
  22              		.align	2
  25              	RME_Stack1:
  26 0000 00000000 		.space	8192
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  27              		.global	RME_Stack2
  28              		.section	.bss.RME_Stack2,"aw",%nobits
  29              		.align	2
  32              	RME_Stack2:
  33 0000 00000000 		.space	8192
  33      00000000 
  33      00000000 
  33      00000000 
  33      00000000 
  34              		.global	RME_Stack3
  35              		.section	.bss.RME_Stack3,"aw",%nobits
  36              		.align	2
  39              	RME_Stack3:
  40 0000 00000000 		.space	8192
  40      00000000 
  40      00000000 
  40      00000000 
  40      00000000 
  41              		.global	RME_Stack4
  42              		.section	.bss.RME_Stack4,"aw",%nobits
  43              		.align	2
  46              	RME_Stack4:
  47 0000 00000000 		.space	8192
  47      00000000 
  47      00000000 
  47      00000000 
  47      00000000 
  48              		.global	RME_Stack5
  49              		.section	.bss.RME_Stack5,"aw",%nobits
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 2


  50              		.align	2
  53              	RME_Stack5:
  54 0000 00000000 		.space	8192
  54      00000000 
  54      00000000 
  54      00000000 
  54      00000000 
  55              		.global	Time
  56              		.section	.bss.Time,"aw",%nobits
  57              		.align	2
  60              	Time:
  61 0000 00000000 		.space	20000
  61      00000000 
  61      00000000 
  61      00000000 
  61      00000000 
  62              		.global	RME_Bench_Buf
  63              		.section	.bss.RME_Bench_Buf,"aw",%nobits
  64              		.align	2
  67              	RME_Bench_Buf:
  68 0000 00000000 		.space	1024
  68      00000000 
  68      00000000 
  68      00000000 
  68      00000000 
  69              		.section	.text.__USR_Putchar,"ax",%progbits
  70              		.align	2
  71              		.global	__USR_Putchar
  72              		.syntax unified
  73              		.arm
  75              	__USR_Putchar:
  76              	.LFB0:
  77              		.file 2 "Include/benchmark.h"
   1:Include/benchmark.h **** 
   2:Include/benchmark.h **** #include"rme.h"
   3:Include/benchmark.h **** /* Word size */
   4:Include/benchmark.h **** #define RME_WORD_BIT                                RME_POW2(RME_WORD_ORDER)
   5:Include/benchmark.h **** #define RME_WORD_BYTE                               (RME_WORD_BIT>>3)
   6:Include/benchmark.h **** #define RME_WORD_BIT_O1                             (RME_WORD_BYTE)
   7:Include/benchmark.h **** #define RME_WORD_BIT_O2                             (RME_WORD_BYTE*2U)
   8:Include/benchmark.h **** #define RME_WORD_BIT_O3                             (RME_WORD_BYTE*3U)
   9:Include/benchmark.h **** #define RME_WORD_BIT_O4                             (RME_WORD_BYTE*4U)
  10:Include/benchmark.h **** #define RME_WORD_BIT_O5                             (RME_WORD_BYTE*5U)
  11:Include/benchmark.h **** #define RME_WORD_BIT_O6                             (RME_WORD_BYTE*6U)
  12:Include/benchmark.h **** #define RME_WORD_BIT_O7                             (RME_WORD_BYTE*7U)
  13:Include/benchmark.h **** #define RME_WORD_BIT_Q1                             RME_WORD_BIT_O2
  14:Include/benchmark.h **** #define RME_WORD_BIT_Q2                             RME_WORD_BIT_O4
  15:Include/benchmark.h **** #define RME_WORD_BIT_Q3                             RME_WORD_BIT_O6
  16:Include/benchmark.h **** #define RME_WORD_BIT_D1                             RME_WORD_BIT_Q2
  17:Include/benchmark.h **** /* Thread creation */
  18:Include/benchmark.h **** #define RME_THD_SVC(ATTR,IS_HYP,SVC)                (RME_FIELD(ATTR,7U)|RME_FIELD(IS_HYP,6U)|(SVC))
  19:Include/benchmark.h **** /* UART peripheral address */
  20:Include/benchmark.h **** #define RME_A7A_UART_CONTROL      					(*((volatile unsigned int*)(0xE0001000)))
  21:Include/benchmark.h **** #define RME_A7A_UART_MODE         					(*((volatile unsigned int*)(0xE0001004)))
  22:Include/benchmark.h **** #define RME_A7A_UART_BRGEN        					(*((volatile unsigned int*)(0xE0001018)))
  23:Include/benchmark.h **** #define RME_A7A_UART_STATUS       					(*((volatile unsigned int*)(0xE000102C)))
  24:Include/benchmark.h **** #define RME_A7A_UART_FIFO         					(*((volatile unsigned int*)(0xE0001030)))
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 3


  25:Include/benchmark.h **** #define RME_A7A_UART_BRDIV        					(*((volatile unsigned int*)(0xE0001034)))
  26:Include/benchmark.h **** #define RME_A7A_UART_STATUS_TXE   					(1U<<3)
  27:Include/benchmark.h **** //#define RME_DBG_S(STR)                              RME_Str_Print((const signed char*)(STR))
  28:Include/benchmark.h **** /* NULL */
  29:Include/benchmark.h **** #define RME_NULL 									0
  30:Include/benchmark.h **** 
  31:Include/benchmark.h **** #define RME_A7A_PUTCHAR(CHAR) \
  32:Include/benchmark.h **** do \
  33:Include/benchmark.h **** { \
  34:Include/benchmark.h ****     while((RME_A7A_UART_STATUS&RME_A7A_UART_STATUS_TXE)==0); \
  35:Include/benchmark.h **** 	RME_A7A_UART_FIFO=(CHAR); \
  36:Include/benchmark.h **** } \
  37:Include/benchmark.h **** while(0)
  38:Include/benchmark.h **** 
  39:Include/benchmark.h **** /* Define ********************************************************************/
  40:Include/benchmark.h **** /* Types */
  41:Include/benchmark.h **** typedef signed int                          s32;
  42:Include/benchmark.h **** typedef signed short                        s16;
  43:Include/benchmark.h **** typedef signed char                         s8;
  44:Include/benchmark.h **** typedef unsigned int                        u32;
  45:Include/benchmark.h **** typedef unsigned short                      u16;
  46:Include/benchmark.h **** typedef unsigned char                       u8;
  47:Include/benchmark.h **** typedef s32                                 tid_t;
  48:Include/benchmark.h **** typedef u32                       			ptr_t;
  49:Include/benchmark.h **** typedef s32                       			cnt_t;
  50:Include/benchmark.h **** typedef s32 								cid_t;
  51:Include/benchmark.h **** typedef s32                        			ret_t;
  52:Include/benchmark.h **** 
  53:Include/benchmark.h **** #define BENCHMARK_STACK_SIZE 4096
  54:Include/benchmark.h **** /* System service stub */
  55:Include/benchmark.h **** //#define RME_CAP_OP(OP,CAPID,ARG1,ARG2,ARG3) RME_Svc(((OP)<<(sizeof(ptr_t)*4)|(CAPID)),ARG1,ARG2,A
  56:Include/benchmark.h **** #define RME_PARAM_D_MASK                    (((ptr_t)(-1))>>(sizeof(ptr_t)*4))
  57:Include/benchmark.h **** #define RME_PARAM_Q_MASK                    (((ptr_t)(-1))>>(sizeof(ptr_t)*6))
  58:Include/benchmark.h **** #define RME_PARAM_O_MASK                    (((ptr_t)(-1))>>(sizeof(ptr_t)*7))
  59:Include/benchmark.h **** /* The parameter passing - not to be confused with kernel macros. These macros just place the param
  60:Include/benchmark.h **** #define RME_PARAM_D1(X)                     (((X)&RME_PARAM_D_MASK)<<(sizeof(ptr_t)*4))
  61:Include/benchmark.h **** #define RME_PARAM_D0(X)                     ((X)&RME_PARAM_D_MASK)
  62:Include/benchmark.h **** 
  63:Include/benchmark.h **** #define RME_PARAM_Q3(X)                     (((X)&RME_PARAM_Q_MASK)<<(sizeof(ptr_t)*6))
  64:Include/benchmark.h **** #define RME_PARAM_Q2(X)                     (((X)&RME_PARAM_Q_MASK)<<(sizeof(ptr_t)*4))
  65:Include/benchmark.h **** #define RME_PARAM_Q1(X)                     (((X)&RME_PARAM_Q_MASK)<<(sizeof(ptr_t)*2))
  66:Include/benchmark.h **** #define RME_PARAM_Q0(X)                     ((X)&RME_PARAM_Q_MASK)
  67:Include/benchmark.h **** 
  68:Include/benchmark.h **** #define RME_PARAM_O7(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*7))
  69:Include/benchmark.h **** #define RME_PARAM_O6(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*6))
  70:Include/benchmark.h **** #define RME_PARAM_O5(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*5))
  71:Include/benchmark.h **** #define RME_PARAM_O4(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*4))
  72:Include/benchmark.h **** #define RME_PARAM_O3(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*3))
  73:Include/benchmark.h **** #define RME_PARAM_O2(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*2))
  74:Include/benchmark.h **** #define RME_PARAM_O1(X)                     (((X)&RME_PARAM_O_MASK)<<(sizeof(ptr_t)*1))
  75:Include/benchmark.h **** #define RME_PARAM_O0(X)                     ((X)&RME_PARAM_O_MASK)
  76:Include/benchmark.h **** 
  77:Include/benchmark.h **** 
  78:Include/benchmark.h **** /* Bit mask */
  79:Include/benchmark.h **** #define RME_MASK_FULL                               (~((ptr_t)0U))
  80:Include/benchmark.h **** #define RME_MASK_WORD                               (~(RME_MASK_FULL<<RME_WORD_ORDER))
  81:Include/benchmark.h **** #define RME_MASK_WORD_O                             RME_MASK_END(RME_WORD_BIT_O1-1U)
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 4


  82:Include/benchmark.h **** #define RME_MASK_WORD_Q                             RME_MASK_END(RME_WORD_BIT_Q1-1U)
  83:Include/benchmark.h **** #define RME_MASK_WORD_D                             RME_MASK_END(RME_WORD_BIT_D1-1U)
  84:Include/benchmark.h **** /* Init thread infinite time marker */
  85:Include/benchmark.h **** #define RME_THD_INIT_TIME                           (RME_MASK_FULL>>1)
  86:Include/benchmark.h **** /* Other thread infinite time marker */
  87:Include/benchmark.h **** #define RME_THD_INF_TIME                            (RME_THD_INIT_TIME-1U)
  88:Include/benchmark.h **** 
  89:Include/benchmark.h **** /* Initial boot capabilities - This should be in accordnace with the kernel settings */
  90:Include/benchmark.h **** /* The capability table of the init process */
  91:Include/benchmark.h **** #define RME_BOOT_INIT_CPT                 		0
  92:Include/benchmark.h **** /* The top-level page table of the init process - always 4GB full range split into 8 pages */
  93:Include/benchmark.h **** #define RME_BOOT_INIT_PGT                 		1
  94:Include/benchmark.h **** /* The init process */
  95:Include/benchmark.h **** #define RME_BOOT_INIT_PRC                 		2
  96:Include/benchmark.h **** /* The init thread */
  97:Include/benchmark.h **** #define RME_BOOT_INIT_THD                 		3
  98:Include/benchmark.h **** /* The initial kernel function capability */
  99:Include/benchmark.h **** #define RME_BOOT_INIT_KFN          				4
 100:Include/benchmark.h **** /* The initial kernel memory capability */
 101:Include/benchmark.h **** #define RME_BOOT_INIT_KOM         				5
 102:Include/benchmark.h **** /* The initial timer endpoint */
 103:Include/benchmark.h **** #define RME_BOOT_INIT_TIMER      				6
 104:Include/benchmark.h **** /* The test objects */
 105:Include/benchmark.h **** #define RME_BOOT_BENCH_THD       				8
 106:Include/benchmark.h **** #define RME_BOOT_BENCH_PGT   				    9
 107:Include/benchmark.h **** #define RME_BOOT_BENCH_PGT_SRAM  				10
 108:Include/benchmark.h **** #define RME_BOOT_BENCH_SEN_THD					14
 109:Include/benchmark.h **** #define RME_BOOT_BENCH_RCV_THD					15
 110:Include/benchmark.h **** #define RME_BOOT_BENCH_THD_MAIN					16
 111:Include/benchmark.h **** #define RME_BOOT_BENCH_PRC                 		17
 112:Include/benchmark.h **** /* The top-level page table of the init process's SRAM */
 113:Include/benchmark.h **** #define RME_BOOT_INIT_PGT_SRAM    				11
 114:Include/benchmark.h **** /* the signal capability */
 115:Include/benchmark.h **** #define RME_BOOT_SIG_BENCH						13
 116:Include/benchmark.h **** /* Power of 2 */
 117:Include/benchmark.h **** #define RME_FIELD(VAL,POW)                      (((ptr_t)(VAL))<<(POW))
 118:Include/benchmark.h **** #define RME_POW2(POW)                           RME_FIELD(1U,POW)
 119:Include/benchmark.h **** /* Page table base address/top-level attributes */
 120:Include/benchmark.h **** #define RME_PGT_BASE(X)                         ((X)&RME_MASK_BEGIN(1U))
 121:Include/benchmark.h **** #define RME_PGT_TOP                             (1U)
 122:Include/benchmark.h **** #define RME_PGT_NOM                             (0U)
 123:Include/benchmark.h **** /* Page table */
 124:Include/benchmark.h **** #define RME_PGT_SVC(NUM_ORDER,SVC)                  (RME_FIELD(NUM_ORDER,RME_WORD_BIT_Q1)|(SVC))
 125:Include/benchmark.h **** /* The order of bits in one CPU machine word */
 126:Include/benchmark.h **** #define RME_WORD_ORDER            				(5U)
 127:Include/benchmark.h **** /* Word size */
 128:Include/benchmark.h **** #define RME_WORD_BIT                            RME_POW2(RME_WORD_ORDER)
 129:Include/benchmark.h **** /* Need to export the memory frontier! */
 130:Include/benchmark.h **** /* Need to export the flags as well ! */
 131:Include/benchmark.h **** /* Export the errno too */
 132:Include/benchmark.h **** #define RME_BOOT_BENCH_KOM_FRONTIER 			0x00008000U
 133:Include/benchmark.h **** /* Bench process page table real address */
 134:Include/benchmark.h **** #define RME_BOOT_BENCH_PGT_RADDR 				0x00060000U
 135:Include/benchmark.h **** /* The kernel-accessible virtual memory address,for this thread's register sets */
 136:Include/benchmark.h **** #define RME_BOOT_HYPER_KOM_VADDR                0x00000000U
 137:Include/benchmark.h **** /* The virtual memory start address for the kernel objects */
 138:Include/benchmark.h **** #define RME_KOM_VA_BASE              0x81000000U
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 5


 139:Include/benchmark.h **** //0x10005000
 140:Include/benchmark.h **** /* The stack safe size */
 141:Include/benchmark.h **** #define RME_STACK_SAFE_SIZE 					16
 142:Include/benchmark.h **** /* Doesn't want to receive the scheduler signal for the thread */
 143:Include/benchmark.h **** #define RME_CID_NULL   							0x8000
 144:Include/benchmark.h **** /* The maximum priority allowed for this thread. Once set, this cannot be changed. */
 145:Include/benchmark.h **** #define RME_THD_PRIO_MAX                        31
 146:Include/benchmark.h **** /*The thread ID*/
 147:Include/benchmark.h **** #define RME_TID_1                               1
 148:Include/benchmark.h **** #define RME_TID_2                               2
 149:Include/benchmark.h **** #define RME_TID_3                               3
 150:Include/benchmark.h **** #define RME_TID_4                               4
 151:Include/benchmark.h **** #define RME_TID_6                               6
 152:Include/benchmark.h **** 
 153:Include/benchmark.h **** #define RME_A7A_SFR(BASE,OFFSET)        (*((volatile ptr_t*)((ptr_t)((BASE)+(OFFSET)))))
 154:Include/benchmark.h **** 
 155:Include/benchmark.h **** /* Private timer and watchdog block base */
 156:Include/benchmark.h **** #define RME_A7A_PTWD_BASE           0xF8F00600
 157:Include/benchmark.h **** /* global timer base */
 158:Include/benchmark.h **** #define RME_A7A_GTWD_BASE           0xF8F00200/* Timer definitions */
 159:Include/benchmark.h **** #define RME_A7A_SYSTICK_VAL        (7670000U/2U)
 160:Include/benchmark.h **** /* global timer count register 0 */
 161:Include/benchmark.h **** #define RME_A7A_GTWD_GTCR0              RME_A7A_SFR(RME_A7A_GTWD_BASE,0x0000)
 162:Include/benchmark.h **** /* global timer count register 1 ,not need to use */
 163:Include/benchmark.h **** #define RME_A7A_GTWD_GTCR1              RME_A7A_SFR(RME_A7A_GTWD_BASE,0x0004)
 164:Include/benchmark.h **** /* global timer control register */
 165:Include/benchmark.h **** #define RME_A7A_GTWD_GTCTLR             RME_A7A_SFR(RME_A7A_GTWD_BASE,0x0008)
 166:Include/benchmark.h **** /* global timer is enabled and the counter increments normally */
 167:Include/benchmark.h **** #define RME_A7A_GTWD_GTCTLR_TIMEN       (1U<<0U)
 168:Include/benchmark.h **** /* Private timer load register */
 169:Include/benchmark.h **** #define RME_A7A_PTWD_PTLR               RME_A7A_SFR(RME_A7A_PTWD_BASE,0x0000)
 170:Include/benchmark.h **** /* Private timer counter register */
 171:Include/benchmark.h **** #define RME_A7A_PTWD_PTCNTR             RME_A7A_SFR(RME_A7A_PTWD_BASE,0x0004)
 172:Include/benchmark.h **** /* Private timer control register */
 173:Include/benchmark.h **** #define RME_A7A_PTWD_PTCTLR             RME_A7A_SFR(RME_A7A_PTWD_BASE,0x0008)
 174:Include/benchmark.h **** #define RME_A7A_PTWD_PTCTLR_PRESC(X)    ((X)<<8U)
 175:Include/benchmark.h **** #define RME_A7A_PTWD_PTCTLR_IRQEN       (1U<<2U)
 176:Include/benchmark.h **** #define RME_A7A_PTWD_PTCTLR_AUTOREL     (1U<<1U)
 177:Include/benchmark.h **** #define RME_A7A_PTWD_PTCTLR_TIMEN       (1U<<0U)
 178:Include/benchmark.h **** /* Private timer interrupt status register */
 179:Include/benchmark.h **** #define RME_A7A_PTWD_PTISR              RME_A7A_SFR(RME_A7A_PTWD_BASE,0x000C)
 180:Include/benchmark.h **** 
 181:Include/benchmark.h **** /* End Define ****************************************************************/
 182:Include/benchmark.h **** 
 183:Include/benchmark.h **** 
 184:Include/benchmark.h **** 
 185:Include/benchmark.h **** /* Private Variables *********************************************************/
 186:Include/benchmark.h **** /* The stack of the threads - enough for 4 threads */
 187:Include/benchmark.h **** ptr_t RME_Stack1[2048];
 188:Include/benchmark.h **** ptr_t RME_Stack2[2048];
 189:Include/benchmark.h **** ptr_t RME_Stack3[2048];
 190:Include/benchmark.h **** ptr_t RME_Stack4[2048];
 191:Include/benchmark.h **** ptr_t RME_Stack5[2048];
 192:Include/benchmark.h **** u16 Time[10000];
 193:Include/benchmark.h **** s8 RME_Bench_Buf[1024];
 194:Include/benchmark.h **** /* End Private Variables *****************************************************/
 195:Include/benchmark.h **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 6


 196:Include/benchmark.h **** /* Function Prototypes *******************************************************/
 197:Include/benchmark.h **** extern ret_t RME_Svc(ptr_t Svc_Capid,ptr_t Param1, ptr_t Param2, ptr_t Param3);
 198:Include/benchmark.h **** /* System service stub */
 199:Include/benchmark.h **** #define RME_SVC(SVC,CID,ARG1,ARG2,ARG3)             RME_Svc(RME_FIELD(SVC,RME_WORD_BIT_D1)|((ptr_t)
 200:Include/benchmark.h **** extern cnt_t RME_Sprint_Uint(s8* Buffer,u32 Arg_Int);
 201:Include/benchmark.h **** extern void RME_Thd_Stub(void);
 202:Include/benchmark.h **** extern void RME_Inv_Stub(void);
 203:Include/benchmark.h **** ptr_t _RME_Stack_Init(ptr_t Stack, ptr_t Stub, ptr_t Param1, ptr_t Param2, ptr_t Param3, ptr_t Para
 204:Include/benchmark.h **** void RME_Benchmark(void);
 205:Include/benchmark.h **** void RME_Same_Prc_Thd_Switch_Test_Thd(ptr_t Param1);
 206:Include/benchmark.h **** void RME_Same_Prc_Thd_Switch_Test(void);
 207:Include/benchmark.h **** /* End Function Prototypes ***************************************************/
 208:Include/benchmark.h **** 
 209:Include/benchmark.h **** /* Register access */
 210:Include/benchmark.h **** #define RME_A7A_REG(X)                          (*((volatile ptr_t*)(X)))
 211:Include/benchmark.h **** 
 212:Include/benchmark.h **** /* Function:__USR_Putchar *****************************************************
 213:Include/benchmark.h **** Description : Output a character to console. In Cortex-M, under most circumstances,
 214:Include/benchmark.h ****               we should use the ITM for such outputs.
 215:Include/benchmark.h **** Input       : char Char - The character to print.
 216:Include/benchmark.h **** Output      : None.
 217:Include/benchmark.h **** Return      : rme_ptr_t - Always 0.
 218:Include/benchmark.h **** ******************************************************************************/
 219:Include/benchmark.h **** ptr_t __USR_Putchar(char Char)
 220:Include/benchmark.h **** {
  78              		.loc 2 220 1
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 8
  81              		@ frame_needed = 1, uses_anonymous_args = 0
  82              		@ link register save eliminated.
  83 0000 04B02DE5 		str	fp, [sp, #-4]!
  84              		.cfi_def_cfa_offset 4
  85              		.cfi_offset 11, -4
  86 0004 00B08DE2 		add	fp, sp, #0
  87              		.cfi_def_cfa_register 11
  88 0008 0CD04DE2 		sub	sp, sp, #12
  89 000c 0030A0E1 		mov	r3, r0
  90 0010 05304BE5 		strb	r3, [fp, #-5]
  91              	.L2:
 221:Include/benchmark.h ****     RME_A7A_PUTCHAR(Char);
  92              		.loc 2 221 5 discriminator 1
  93 0014 2C3001E3 		movw	r3, #4140
  94 0018 00304EE3 		movt	r3, 57344
  95 001c 003093E5 		ldr	r3, [r3]
  96 0020 083003E2 		and	r3, r3, #8
  97 0024 000053E3 		cmp	r3, #0
  98 0028 F9FFFF0A 		beq	.L2
  99              		.loc 2 221 5 is_stmt 0 discriminator 2
 100 002c 303001E3 		movw	r3, #4144
 101 0030 00304EE3 		movt	r3, 57344
 102 0034 D5205BE1 		ldrsb	r2, [fp, #-5]
 103 0038 002083E5 		str	r2, [r3]
 222:Include/benchmark.h ****     return 0;
 104              		.loc 2 222 12 is_stmt 1
 105 003c 0030A0E3 		mov	r3, #0
 223:Include/benchmark.h **** }
 106              		.loc 2 223 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 7


 107 0040 0300A0E1 		mov	r0, r3
 108 0044 00D08BE2 		add	sp, fp, #0
 109              		.cfi_def_cfa_register 13
 110              		@ sp needed
 111 0048 04B09DE4 		ldr	fp, [sp], #4
 112              		.cfi_restore 11
 113              		.cfi_def_cfa_offset 0
 114 004c 1EFF2FE1 		bx	lr
 115              		.cfi_endproc
 116              	.LFE0:
 118              		.section	.text.USR_DBG_I,"ax",%progbits
 119              		.align	2
 120              		.global	USR_DBG_I
 121              		.syntax unified
 122              		.arm
 124              	USR_DBG_I:
 125              	.LFB1:
 224:Include/benchmark.h **** /* End Function __USR_Putchar ***************************************************/
 225:Include/benchmark.h **** 
 226:Include/benchmark.h **** 
 227:Include/benchmark.h **** /* Function:USR_DBG_I *****************************************************
 228:Include/benchmark.h **** Description : Print a signed integer on the debugging console. This integer is
 229:Include/benchmark.h ****               printed as decimal with sign.
 230:Include/benchmark.h **** Input       : rme_cnt_t Int - The integer to print.
 231:Include/benchmark.h **** Output      : None.
 232:Include/benchmark.h **** Return      : rme_cnt_t - The length of the string printed.
 233:Include/benchmark.h **** ******************************************************************************/
 234:Include/benchmark.h **** cnt_t USR_DBG_I(cnt_t Int)
 235:Include/benchmark.h **** {
 126              		.loc 2 235 1
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 32
 129              		@ frame_needed = 1, uses_anonymous_args = 0
 130 0000 00482DE9 		push	{fp, lr}
 131              		.cfi_def_cfa_offset 8
 132              		.cfi_offset 11, -8
 133              		.cfi_offset 14, -4
 134 0004 04B08DE2 		add	fp, sp, #4
 135              		.cfi_def_cfa 11, 4
 136 0008 20D04DE2 		sub	sp, sp, #32
 137 000c 20000BE5 		str	r0, [fp, #-32]
 236:Include/benchmark.h ****     cnt_t Num;
 237:Include/benchmark.h ****     cnt_t Abs;
 238:Include/benchmark.h ****     cnt_t Iter;
 239:Include/benchmark.h ****     cnt_t Count;
 240:Include/benchmark.h ****     cnt_t Div;
 241:Include/benchmark.h **** 
 242:Include/benchmark.h ****     /* Exit on zero */
 243:Include/benchmark.h ****     if(Int==0)
 138              		.loc 2 243 7
 139 0010 20301BE5 		ldr	r3, [fp, #-32]
 140 0014 000053E3 		cmp	r3, #0
 141 0018 0300001A 		bne	.L5
 244:Include/benchmark.h ****     {
 245:Include/benchmark.h **** 
 246:Include/benchmark.h **** 
 247:Include/benchmark.h ****         __USR_Putchar('0');
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 8


 142              		.loc 2 247 9
 143 001c 3000A0E3 		mov	r0, #48
 144 0020 FEFFFFEB 		bl	__USR_Putchar
 248:Include/benchmark.h ****         return 1;
 145              		.loc 2 248 16
 146 0024 0130A0E3 		mov	r3, #1
 147 0028 500000EA 		b	.L6
 148              	.L5:
 249:Include/benchmark.h ****     }
 250:Include/benchmark.h ****     else
 251:Include/benchmark.h ****     {
 252:Include/benchmark.h **** 
 253:Include/benchmark.h ****         /* No action required */
 254:Include/benchmark.h ****     }
 255:Include/benchmark.h **** 
 256:Include/benchmark.h **** 
 257:Include/benchmark.h ****     /* Correct all negatives into positives */
 258:Include/benchmark.h ****     if(Int<0)
 149              		.loc 2 258 7
 150 002c 20301BE5 		ldr	r3, [fp, #-32]
 151 0030 000053E3 		cmp	r3, #0
 152 0034 070000AA 		bge	.L7
 259:Include/benchmark.h ****     {
 260:Include/benchmark.h **** 
 261:Include/benchmark.h **** 
 262:Include/benchmark.h ****         __USR_Putchar('-');
 153              		.loc 2 262 9
 154 0038 2D00A0E3 		mov	r0, #45
 155 003c FEFFFFEB 		bl	__USR_Putchar
 263:Include/benchmark.h ****         Abs=-Int;
 156              		.loc 2 263 12
 157 0040 20301BE5 		ldr	r3, [fp, #-32]
 158 0044 003063E2 		rsb	r3, r3, #0
 159 0048 0C300BE5 		str	r3, [fp, #-12]
 264:Include/benchmark.h ****         Num=1;
 160              		.loc 2 264 12
 161 004c 0130A0E3 		mov	r3, #1
 162 0050 08300BE5 		str	r3, [fp, #-8]
 163 0054 030000EA 		b	.L8
 164              	.L7:
 265:Include/benchmark.h ****     }
 266:Include/benchmark.h ****     else
 267:Include/benchmark.h ****     {
 268:Include/benchmark.h **** 
 269:Include/benchmark.h **** 
 270:Include/benchmark.h ****         Abs=Int;
 165              		.loc 2 270 12
 166 0058 20301BE5 		ldr	r3, [fp, #-32]
 167 005c 0C300BE5 		str	r3, [fp, #-12]
 271:Include/benchmark.h ****         Num=0;
 168              		.loc 2 271 12
 169 0060 0030A0E3 		mov	r3, #0
 170 0064 08300BE5 		str	r3, [fp, #-8]
 171              	.L8:
 272:Include/benchmark.h ****     }
 273:Include/benchmark.h **** 
 274:Include/benchmark.h ****     /* How many digits are there? */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 9


 275:Include/benchmark.h ****     Count=0;
 172              		.loc 2 275 10
 173 0068 0030A0E3 		mov	r3, #0
 174 006c 14300BE5 		str	r3, [fp, #-20]
 276:Include/benchmark.h ****     Div=1;
 175              		.loc 2 276 8
 176 0070 0130A0E3 		mov	r3, #1
 177 0074 18300BE5 		str	r3, [fp, #-24]
 277:Include/benchmark.h ****     Iter=Abs;
 178              		.loc 2 277 9
 179 0078 0C301BE5 		ldr	r3, [fp, #-12]
 180 007c 10300BE5 		str	r3, [fp, #-16]
 181              	.L12:
 278:Include/benchmark.h ****     while(1U)
 279:Include/benchmark.h ****     {
 280:Include/benchmark.h ****         Iter/=10;
 182              		.loc 2 280 13
 183 0080 10201BE5 		ldr	r2, [fp, #-16]
 184 0084 673606E3 		movw	r3, #26215
 185 0088 663646E3 		movt	r3, 26214
 186 008c 9312C3E0 		smull	r1, r3, r3, r2
 187 0090 4311A0E1 		asr	r1, r3, #2
 188 0094 C23FA0E1 		asr	r3, r2, #31
 189 0098 033041E0 		sub	r3, r1, r3
 190 009c 10300BE5 		str	r3, [fp, #-16]
 281:Include/benchmark.h ****         Count++;
 191              		.loc 2 281 14
 192 00a0 14301BE5 		ldr	r3, [fp, #-20]
 193 00a4 013083E2 		add	r3, r3, #1
 194 00a8 14300BE5 		str	r3, [fp, #-20]
 282:Include/benchmark.h ****         if(Iter!=0)
 195              		.loc 2 282 11
 196 00ac 10301BE5 		ldr	r3, [fp, #-16]
 197 00b0 000053E3 		cmp	r3, #0
 198 00b4 0600000A 		beq	.L15
 283:Include/benchmark.h ****         {
 284:Include/benchmark.h **** 
 285:Include/benchmark.h **** 
 286:Include/benchmark.h ****             Div*=10;
 199              		.loc 2 286 16
 200 00b8 18201BE5 		ldr	r2, [fp, #-24]
 201 00bc 0230A0E1 		mov	r3, r2
 202 00c0 0331A0E1 		lsl	r3, r3, #2
 203 00c4 023083E0 		add	r3, r3, r2
 204 00c8 8330A0E1 		lsl	r3, r3, #1
 205 00cc 18300BE5 		str	r3, [fp, #-24]
 280:Include/benchmark.h ****         Count++;
 206              		.loc 2 280 13
 207 00d0 EAFFFFEA 		b	.L12
 208              	.L15:
 287:Include/benchmark.h ****         }
 288:Include/benchmark.h ****         else
 289:Include/benchmark.h ****         {
 290:Include/benchmark.h **** 
 291:Include/benchmark.h **** 
 292:Include/benchmark.h ****             break;
 209              		.loc 2 292 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 10


 210 00d4 00F020E3 		nop
 293:Include/benchmark.h ****         }
 294:Include/benchmark.h ****     }
 295:Include/benchmark.h ****     Num+=Count;
 211              		.loc 2 295 8
 212 00d8 08201BE5 		ldr	r2, [fp, #-8]
 213 00dc 14301BE5 		ldr	r3, [fp, #-20]
 214 00e0 033082E0 		add	r3, r2, r3
 215 00e4 08300BE5 		str	r3, [fp, #-8]
 296:Include/benchmark.h **** 
 297:Include/benchmark.h ****     /* Print the integer */
 298:Include/benchmark.h ****     Iter=Abs;
 216              		.loc 2 298 9
 217 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 218 00ec 10300BE5 		str	r3, [fp, #-16]
 299:Include/benchmark.h **** 
 300:Include/benchmark.h ****     while(Count>0)
 219              		.loc 2 300 10
 220 00f0 1A0000EA 		b	.L13
 221              	.L14:
 301:Include/benchmark.h ****     {
 302:Include/benchmark.h ****         Count--;
 222              		.loc 2 302 14
 223 00f4 14301BE5 		ldr	r3, [fp, #-20]
 224 00f8 013043E2 		sub	r3, r3, #1
 225 00fc 14300BE5 		str	r3, [fp, #-20]
 303:Include/benchmark.h ****         __USR_Putchar((s8)(Iter/Div)+'0');
 226              		.loc 2 303 32
 227 0100 18101BE5 		ldr	r1, [fp, #-24]
 228 0104 10001BE5 		ldr	r0, [fp, #-16]
 229 0108 FEFFFFEB 		bl	__aeabi_idiv
 230 010c 0030A0E1 		mov	r3, r0
 231              		.loc 2 303 23
 232 0110 7330EFE6 		uxtb	r3, r3
 233              		.loc 2 303 37
 234 0114 303083E2 		add	r3, r3, #48
 235 0118 7330EFE6 		uxtb	r3, r3
 236              		.loc 2 303 9
 237 011c 7330AFE6 		sxtb	r3, r3
 238 0120 0300A0E1 		mov	r0, r3
 239 0124 FEFFFFEB 		bl	__USR_Putchar
 304:Include/benchmark.h ****         Iter=Iter%Div;
 240              		.loc 2 304 13
 241 0128 10301BE5 		ldr	r3, [fp, #-16]
 242 012c 18101BE5 		ldr	r1, [fp, #-24]
 243 0130 0300A0E1 		mov	r0, r3
 244 0134 FEFFFFEB 		bl	__aeabi_idivmod
 245 0138 0130A0E1 		mov	r3, r1
 246 013c 10300BE5 		str	r3, [fp, #-16]
 305:Include/benchmark.h ****         Div/=10;
 247              		.loc 2 305 12
 248 0140 18201BE5 		ldr	r2, [fp, #-24]
 249 0144 673606E3 		movw	r3, #26215
 250 0148 663646E3 		movt	r3, 26214
 251 014c 9312C3E0 		smull	r1, r3, r3, r2
 252 0150 4311A0E1 		asr	r1, r3, #2
 253 0154 C23FA0E1 		asr	r3, r2, #31
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 11


 254 0158 033041E0 		sub	r3, r1, r3
 255 015c 18300BE5 		str	r3, [fp, #-24]
 256              	.L13:
 300:Include/benchmark.h ****     {
 257              		.loc 2 300 16
 258 0160 14301BE5 		ldr	r3, [fp, #-20]
 259 0164 000053E3 		cmp	r3, #0
 260 0168 E1FFFFCA 		bgt	.L14
 306:Include/benchmark.h ****     }
 307:Include/benchmark.h **** 
 308:Include/benchmark.h ****     return Num;
 261              		.loc 2 308 12
 262 016c 08301BE5 		ldr	r3, [fp, #-8]
 263              	.L6:
 309:Include/benchmark.h **** }
 264              		.loc 2 309 1
 265 0170 0300A0E1 		mov	r0, r3
 266 0174 04D04BE2 		sub	sp, fp, #4
 267              		.cfi_def_cfa 13, 8
 268              		@ sp needed
 269 0178 0088BDE8 		pop	{fp, pc}
 270              		.cfi_endproc
 271              	.LFE1:
 273              		.section	.text.USR_DBG_H,"ax",%progbits
 274              		.align	2
 275              		.global	USR_DBG_H
 276              		.syntax unified
 277              		.arm
 279              	USR_DBG_H:
 280              	.LFB2:
 310:Include/benchmark.h **** /* End Function:USR_DBG_I ************************************************/
 311:Include/benchmark.h **** 
 312:Include/benchmark.h **** /* Function:USR_DBG_H *****************************************************
 313:Include/benchmark.h **** Description : Print a unsigned integer on the debugging console. This integer is
 314:Include/benchmark.h ****               printed as hexadecimal.
 315:Include/benchmark.h **** Input       : rme_ptr_t Uint - The unsigned integer to print.
 316:Include/benchmark.h **** Output      : None.
 317:Include/benchmark.h **** Return      : rme_cnt_t - The length of the string printed.
 318:Include/benchmark.h **** ******************************************************************************/
 319:Include/benchmark.h **** cnt_t USR_DBG_H(ptr_t Uint)
 320:Include/benchmark.h **** {
 281              		.loc 2 320 1
 282              		.cfi_startproc
 283              		@ args = 0, pretend = 0, frame = 24
 284              		@ frame_needed = 1, uses_anonymous_args = 0
 285 0000 00482DE9 		push	{fp, lr}
 286              		.cfi_def_cfa_offset 8
 287              		.cfi_offset 11, -8
 288              		.cfi_offset 14, -4
 289 0004 04B08DE2 		add	fp, sp, #4
 290              		.cfi_def_cfa 11, 4
 291 0008 18D04DE2 		sub	sp, sp, #24
 292 000c 18000BE5 		str	r0, [fp, #-24]
 321:Include/benchmark.h ****     ptr_t Iter;
 322:Include/benchmark.h ****     ptr_t Count;
 323:Include/benchmark.h ****     ptr_t Num;
 324:Include/benchmark.h **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 12


 325:Include/benchmark.h ****     /* Exit on zero */
 326:Include/benchmark.h ****     if(Uint==0U)
 293              		.loc 2 326 7
 294 0010 18301BE5 		ldr	r3, [fp, #-24]
 295 0014 000053E3 		cmp	r3, #0
 296 0018 0300001A 		bne	.L17
 327:Include/benchmark.h ****     {
 328:Include/benchmark.h ****         __USR_Putchar('0');
 297              		.loc 2 328 9
 298 001c 3000A0E3 		mov	r0, #48
 299 0020 FEFFFFEB 		bl	__USR_Putchar
 329:Include/benchmark.h ****         return 1;
 300              		.loc 2 329 16
 301 0024 0130A0E3 		mov	r3, #1
 302 0028 330000EA 		b	.L18
 303              	.L17:
 330:Include/benchmark.h ****     }
 331:Include/benchmark.h ****     else
 332:Include/benchmark.h ****     {
 333:Include/benchmark.h ****         /* No action required */
 334:Include/benchmark.h ****     }
 335:Include/benchmark.h **** 
 336:Include/benchmark.h ****     /* Filter out all the zeroes */
 337:Include/benchmark.h ****     Count=0U;
 304              		.loc 2 337 10
 305 002c 0030A0E3 		mov	r3, #0
 306 0030 0C300BE5 		str	r3, [fp, #-12]
 338:Include/benchmark.h ****     Iter=Uint;
 307              		.loc 2 338 9
 308 0034 18301BE5 		ldr	r3, [fp, #-24]
 309 0038 08300BE5 		str	r3, [fp, #-8]
 339:Include/benchmark.h ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 310              		.loc 2 339 10
 311 003c 050000EA 		b	.L19
 312              	.L20:
 340:Include/benchmark.h ****     {
 341:Include/benchmark.h ****         Iter<<=4;
 313              		.loc 2 341 13
 314 0040 08301BE5 		ldr	r3, [fp, #-8]
 315 0044 0332A0E1 		lsl	r3, r3, #4
 316 0048 08300BE5 		str	r3, [fp, #-8]
 342:Include/benchmark.h ****         Count++;
 317              		.loc 2 342 14
 318 004c 0C301BE5 		ldr	r3, [fp, #-12]
 319 0050 013083E2 		add	r3, r3, #1
 320 0054 0C300BE5 		str	r3, [fp, #-12]
 321              	.L19:
 339:Include/benchmark.h ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 322              		.loc 2 339 16
 323 0058 08301BE5 		ldr	r3, [fp, #-8]
 324 005c 233EA0E1 		lsr	r3, r3, #28
 339:Include/benchmark.h ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 325              		.loc 2 339 36
 326 0060 000053E3 		cmp	r3, #0
 327 0064 F5FFFF0A 		beq	.L20
 343:Include/benchmark.h ****     }
 344:Include/benchmark.h **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 13


 345:Include/benchmark.h ****     /* Count is the number of pts to print */
 346:Include/benchmark.h ****     Count=RME_POW2(RME_WORD_ORDER-2U)-Count;
 328              		.loc 2 346 10
 329 0068 0C301BE5 		ldr	r3, [fp, #-12]
 330 006c 083063E2 		rsb	r3, r3, #8
 331 0070 0C300BE5 		str	r3, [fp, #-12]
 347:Include/benchmark.h ****     Num=Count;
 332              		.loc 2 347 8
 333 0074 0C301BE5 		ldr	r3, [fp, #-12]
 334 0078 10300BE5 		str	r3, [fp, #-16]
 348:Include/benchmark.h ****     while(Count>0U)
 335              		.loc 2 348 10
 336 007c 1A0000EA 		b	.L21
 337              	.L23:
 349:Include/benchmark.h ****     {
 350:Include/benchmark.h ****         Count--;
 338              		.loc 2 350 14
 339 0080 0C301BE5 		ldr	r3, [fp, #-12]
 340 0084 013043E2 		sub	r3, r3, #1
 341 0088 0C300BE5 		str	r3, [fp, #-12]
 351:Include/benchmark.h ****         Iter=(Uint>>(Count<<2U))&0x0FU;
 342              		.loc 2 351 27
 343 008c 0C301BE5 		ldr	r3, [fp, #-12]
 344 0090 0331A0E1 		lsl	r3, r3, #2
 345              		.loc 2 351 19
 346 0094 18201BE5 		ldr	r2, [fp, #-24]
 347 0098 3233A0E1 		lsr	r3, r2, r3
 348              		.loc 2 351 13
 349 009c 0F3003E2 		and	r3, r3, #15
 350 00a0 08300BE5 		str	r3, [fp, #-8]
 352:Include/benchmark.h ****         if(Iter<10U)
 351              		.loc 2 352 11
 352 00a4 08301BE5 		ldr	r3, [fp, #-8]
 353 00a8 090053E3 		cmp	r3, #9
 354 00ac 0700008A 		bhi	.L22
 353:Include/benchmark.h ****         {
 354:Include/benchmark.h **** 
 355:Include/benchmark.h ****             __USR_Putchar((s8)Iter+'0');
 355              		.loc 2 355 27
 356 00b0 08301BE5 		ldr	r3, [fp, #-8]
 357 00b4 7330EFE6 		uxtb	r3, r3
 358              		.loc 2 355 35
 359 00b8 303083E2 		add	r3, r3, #48
 360 00bc 7330EFE6 		uxtb	r3, r3
 361              		.loc 2 355 13
 362 00c0 7330AFE6 		sxtb	r3, r3
 363 00c4 0300A0E1 		mov	r0, r3
 364 00c8 FEFFFFEB 		bl	__USR_Putchar
 365 00cc 060000EA 		b	.L21
 366              	.L22:
 356:Include/benchmark.h ****         }
 357:Include/benchmark.h ****         else
 358:Include/benchmark.h ****         {
 359:Include/benchmark.h **** 
 360:Include/benchmark.h ****             __USR_Putchar((s8)Iter+'A'-10);
 367              		.loc 2 360 27
 368 00d0 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 14


 369 00d4 7330EFE6 		uxtb	r3, r3
 370              		.loc 2 360 39
 371 00d8 373083E2 		add	r3, r3, #55
 372 00dc 7330EFE6 		uxtb	r3, r3
 373              		.loc 2 360 13
 374 00e0 7330AFE6 		sxtb	r3, r3
 375 00e4 0300A0E1 		mov	r0, r3
 376 00e8 FEFFFFEB 		bl	__USR_Putchar
 377              	.L21:
 348:Include/benchmark.h ****     {
 378              		.loc 2 348 16
 379 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 380 00f0 000053E3 		cmp	r3, #0
 381 00f4 E1FFFF1A 		bne	.L23
 361:Include/benchmark.h ****         }
 362:Include/benchmark.h ****     }
 363:Include/benchmark.h **** 
 364:Include/benchmark.h ****     return (cnt_t)Num;
 382              		.loc 2 364 12
 383 00f8 10301BE5 		ldr	r3, [fp, #-16]
 384              	.L18:
 365:Include/benchmark.h **** }
 385              		.loc 2 365 1
 386 00fc 0300A0E1 		mov	r0, r3
 387 0100 04D04BE2 		sub	sp, fp, #4
 388              		.cfi_def_cfa 13, 8
 389              		@ sp needed
 390 0104 0088BDE8 		pop	{fp, pc}
 391              		.cfi_endproc
 392              	.LFE2:
 394              		.section	.text.USR_DBG_S,"ax",%progbits
 395              		.align	2
 396              		.global	USR_DBG_S
 397              		.syntax unified
 398              		.arm
 400              	USR_DBG_S:
 401              	.LFB3:
 366:Include/benchmark.h **** /* End Function:USR_DBG_H ************************************************/
 367:Include/benchmark.h **** cnt_t USR_DBG_S(const s8* String)
 368:Include/benchmark.h **** {
 402              		.loc 2 368 1
 403              		.cfi_startproc
 404              		@ args = 0, pretend = 0, frame = 16
 405              		@ frame_needed = 1, uses_anonymous_args = 0
 406 0000 00482DE9 		push	{fp, lr}
 407              		.cfi_def_cfa_offset 8
 408              		.cfi_offset 11, -8
 409              		.cfi_offset 14, -4
 410 0004 04B08DE2 		add	fp, sp, #4
 411              		.cfi_def_cfa 11, 4
 412 0008 10D04DE2 		sub	sp, sp, #16
 413 000c 10000BE5 		str	r0, [fp, #-16]
 369:Include/benchmark.h ****     ptr_t Count;
 370:Include/benchmark.h **** 
 371:Include/benchmark.h ****     for(Count=0U;Count<255;Count++)
 414              		.loc 2 371 14
 415 0010 0030A0E3 		mov	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 15


 416 0014 08300BE5 		str	r3, [fp, #-8]
 417              		.loc 2 371 5
 418 0018 0E0000EA 		b	.L25
 419              	.L28:
 372:Include/benchmark.h ****     {
 373:Include/benchmark.h ****         if(String[Count]==(s8)'\0')
 420              		.loc 2 373 18
 421 001c 10201BE5 		ldr	r2, [fp, #-16]
 422 0020 08301BE5 		ldr	r3, [fp, #-8]
 423 0024 033082E0 		add	r3, r2, r3
 424 0028 D030D3E1 		ldrsb	r3, [r3]
 425              		.loc 2 373 11
 426 002c 000053E3 		cmp	r3, #0
 427 0030 0C00000A 		beq	.L30
 374:Include/benchmark.h ****         {
 375:Include/benchmark.h **** 
 376:Include/benchmark.h ****             break;
 377:Include/benchmark.h ****         }
 378:Include/benchmark.h ****         else
 379:Include/benchmark.h ****         {
 380:Include/benchmark.h ****             /* No action required */
 381:Include/benchmark.h ****         }
 382:Include/benchmark.h **** 
 383:Include/benchmark.h ****         __USR_Putchar(String[Count]);
 428              		.loc 2 383 29
 429 0034 10201BE5 		ldr	r2, [fp, #-16]
 430 0038 08301BE5 		ldr	r3, [fp, #-8]
 431 003c 033082E0 		add	r3, r2, r3
 432              		.loc 2 383 9
 433 0040 D030D3E1 		ldrsb	r3, [r3]
 434 0044 0300A0E1 		mov	r0, r3
 435 0048 FEFFFFEB 		bl	__USR_Putchar
 371:Include/benchmark.h ****     {
 436              		.loc 2 371 33 discriminator 2
 437 004c 08301BE5 		ldr	r3, [fp, #-8]
 438 0050 013083E2 		add	r3, r3, #1
 439 0054 08300BE5 		str	r3, [fp, #-8]
 440              	.L25:
 371:Include/benchmark.h ****     {
 441              		.loc 2 371 23 discriminator 1
 442 0058 08301BE5 		ldr	r3, [fp, #-8]
 443 005c FE0053E3 		cmp	r3, #254
 444 0060 EDFFFF9A 		bls	.L28
 445 0064 000000EA 		b	.L27
 446              	.L30:
 376:Include/benchmark.h ****         }
 447              		.loc 2 376 13
 448 0068 00F020E3 		nop
 449              	.L27:
 384:Include/benchmark.h ****     }
 385:Include/benchmark.h **** 
 386:Include/benchmark.h ****     return (cnt_t)Count;
 450              		.loc 2 386 12
 451 006c 08301BE5 		ldr	r3, [fp, #-8]
 387:Include/benchmark.h **** }
 452              		.loc 2 387 1
 453 0070 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 16


 454 0074 04D04BE2 		sub	sp, fp, #4
 455              		.cfi_def_cfa 13, 8
 456              		@ sp needed
 457 0078 0088BDE8 		pop	{fp, pc}
 458              		.cfi_endproc
 459              	.LFE3:
 461              		.section	.text.get_time,"ax",%progbits
 462              		.align	2
 463              		.global	get_time
 464              		.syntax unified
 465              		.arm
 467              	get_time:
 468              	.LFB4:
 388:Include/benchmark.h **** 
 389:Include/benchmark.h **** /* get current time */
 390:Include/benchmark.h **** ptr_t get_time(void)
 391:Include/benchmark.h **** {
 469              		.loc 2 391 1
 470              		.cfi_startproc
 471              		@ args = 0, pretend = 0, frame = 8
 472              		@ frame_needed = 1, uses_anonymous_args = 0
 473              		@ link register save eliminated.
 474 0000 04B02DE5 		str	fp, [sp, #-4]!
 475              		.cfi_def_cfa_offset 4
 476              		.cfi_offset 11, -4
 477 0004 00B08DE2 		add	fp, sp, #0
 478              		.cfi_def_cfa_register 11
 479 0008 0CD04DE2 		sub	sp, sp, #12
 392:Include/benchmark.h **** 	ptr_t temp;
 393:Include/benchmark.h **** 	temp=RME_A7A_REG(&RME_A7A_GTWD_GTCR0);
 480              		.loc 2 393 7
 481 000c 023CA0E3 		mov	r3, #512
 482 0010 F0384FE3 		movt	r3, 63728
 483              		.loc 2 393 6
 484 0014 003093E5 		ldr	r3, [r3]
 485 0018 08300BE5 		str	r3, [fp, #-8]
 394:Include/benchmark.h **** 	return temp;
 486              		.loc 2 394 9
 487 001c 08301BE5 		ldr	r3, [fp, #-8]
 395:Include/benchmark.h ****     /*USR_DBG_S("\r\n time=");
 396:Include/benchmark.h **** 	double time =(double)temp/RME_A7A_SYSTICK_VAL;
 397:Include/benchmark.h **** 	time =time*1000;
 398:Include/benchmark.h ****     USR_DBG_I(time);
 399:Include/benchmark.h ****     USR_DBG_S(" ms");*/
 400:Include/benchmark.h **** }
 488              		.loc 2 400 1
 489 0020 0300A0E1 		mov	r0, r3
 490 0024 00D08BE2 		add	sp, fp, #0
 491              		.cfi_def_cfa_register 13
 492              		@ sp needed
 493 0028 04B09DE4 		ldr	fp, [sp], #4
 494              		.cfi_restore 11
 495              		.cfi_def_cfa_offset 0
 496 002c 1EFF2FE1 		bx	lr
 497              		.cfi_endproc
 498              	.LFE4:
 500              		.section	.text.RME_Thd_Crt,"ax",%progbits
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 17


 501              		.align	2
 502              		.global	RME_Thd_Crt
 503              		.syntax unified
 504              		.arm
 506              	RME_Thd_Crt:
 507              	.LFB5:
 508              		.file 3 "Include/sys.h"
   1:Include/sys.h **** #include"benchmark.h"
   2:Include/sys.h **** /* Function:RME_Thd_Crt *******************************************************
   3:Include/sys.h **** Description : Create a thread. A thread is the minimal kernel-level execution
   4:Include/sys.h ****               unit.
   5:Include/sys.h **** Input       : RME_cid_t Cap_Cpt - The capability to the capability table.
   6:Include/sys.h ****                                   2-Level.
   7:Include/sys.h ****               RME_cid_t Cap_Kom - The kernel memory capability.
   8:Include/sys.h ****                                   2-Level.
   9:Include/sys.h ****               RME_cid_t Cap_Thd - The capability slot that you want this newly
  10:Include/sys.h ****                                   created thread capability to be in.
  11:Include/sys.h ****                                   1-Level.
  12:Include/sys.h ****               RME_cid_t Cap_Prc - The capability to the process that it is in.
  13:Include/sys.h ****                                   2-Level.
  14:Include/sys.h ****               RME_ptr_t Prio_Max - The maximum priority allowed for this
  15:Include/sys.h ****                                    thread. Once set, this cannot be changed.
  16:Include/sys.h ****               RME_ptr_t Raddr - The relative virtual address to store the
  17:Include/sys.h ****                                 thread kernel object.
  18:Include/sys.h ****               RME_ptr_t Attr - The context attributes.
  19:Include/sys.h **** Output      : None.
  20:Include/sys.h **** Return      : RME_ret_t - If successful, the Thread ID; or an error code.
  21:Include/sys.h **** ******************************************************************************/
  22:Include/sys.h **** ret_t RME_Thd_Crt(cid_t Cap_Cpt,
  23:Include/sys.h ****                       cid_t Cap_Kom,
  24:Include/sys.h ****                       cid_t Cap_Thd,
  25:Include/sys.h ****                       cid_t Cap_Prc,
  26:Include/sys.h ****                       ptr_t Prio_Max,
  27:Include/sys.h ****                       ptr_t Raddr,
  28:Include/sys.h ****                       ptr_t Attr)
  29:Include/sys.h **** {
 509              		.loc 3 29 1
 510              		.cfi_startproc
 511              		@ args = 12, pretend = 0, frame = 16
 512              		@ frame_needed = 1, uses_anonymous_args = 0
 513 0000 00482DE9 		push	{fp, lr}
 514              		.cfi_def_cfa_offset 8
 515              		.cfi_offset 11, -8
 516              		.cfi_offset 14, -4
 517 0004 04B08DE2 		add	fp, sp, #4
 518              		.cfi_def_cfa 11, 4
 519 0008 10D04DE2 		sub	sp, sp, #16
 520 000c 08000BE5 		str	r0, [fp, #-8]
 521 0010 0C100BE5 		str	r1, [fp, #-12]
 522 0014 10200BE5 		str	r2, [fp, #-16]
 523 0018 14300BE5 		str	r3, [fp, #-20]
  30:Include/sys.h ****     return RME_SVC(RME_THD_SVC(Attr,0U,RME_SVC_THD_CRT),
 524              		.loc 3 30 12
 525 001c 0C309BE5 		ldr	r3, [fp, #12]
 526 0020 832BA0E1 		lsl	r2, r3, #23
 527 0024 08301BE5 		ldr	r3, [fp, #-8]
 528 0028 033082E1 		orr	r3, r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 18


 529 002c 190883E3 		orr	r0, r3, #1638400
 530 0030 0C301BE5 		ldr	r3, [fp, #-12]
 531 0034 0328A0E1 		lsl	r2, r3, #16
 532 0038 10301BE5 		ldr	r3, [fp, #-16]
 533 003c 7330FFE6 		uxth	r3, r3
 534 0040 031082E1 		orr	r1, r2, r3
 535 0044 14301BE5 		ldr	r3, [fp, #-20]
 536 0048 0328A0E1 		lsl	r2, r3, #16
 537 004c 04309BE5 		ldr	r3, [fp, #4]
 538 0050 7330FFE6 		uxth	r3, r3
 539 0054 032082E1 		orr	r2, r2, r3
 540 0058 08309BE5 		ldr	r3, [fp, #8]
 541 005c FEFFFFEB 		bl	RME_Svc
 542 0060 0030A0E1 		mov	r3, r0
  31:Include/sys.h ****                    Cap_Cpt,
  32:Include/sys.h ****                    RME_PARAM_D1(Cap_Kom)|RME_PARAM_D0(Cap_Thd),
  33:Include/sys.h ****                    RME_PARAM_D1(Cap_Prc)|RME_PARAM_D0(Prio_Max),
  34:Include/sys.h ****                    Raddr);
  35:Include/sys.h **** }
 543              		.loc 3 35 1
 544 0064 0300A0E1 		mov	r0, r3
 545 0068 04D04BE2 		sub	sp, fp, #4
 546              		.cfi_def_cfa 13, 8
 547              		@ sp needed
 548 006c 0088BDE8 		pop	{fp, pc}
 549              		.cfi_endproc
 550              	.LFE5:
 552              		.section	.text.RME_Thd_Exec_Set,"ax",%progbits
 553              		.align	2
 554              		.global	RME_Thd_Exec_Set
 555              		.syntax unified
 556              		.arm
 558              	RME_Thd_Exec_Set:
 559              	.LFB6:
  36:Include/sys.h **** /* End Function:RME_Thd_Crt **************************************************/
  37:Include/sys.h **** 
  38:Include/sys.h **** /* Function:RME_Thd_Exec_Set **************************************************
  39:Include/sys.h **** Description : Set a thread's entry point and stack. The registers will be
  40:Include/sys.h ****               initialized with these contents.
  41:Include/sys.h **** Input       : RME_cid_t Cap_Thd - The capability to the thread.
  42:Include/sys.h ****                                   2-Level.
  43:Include/sys.h ****               void* Entry - The entry address of the thread.
  44:Include/sys.h ****               void* Stack - The stack address to use for execution.
  45:Include/sys.h ****               void* Param - The parameter to pass to the thread.
  46:Include/sys.h **** Output      : None.
  47:Include/sys.h **** Return      : RME_ret_t - If successful, 0; or an error code.
  48:Include/sys.h **** ******************************************************************************/
  49:Include/sys.h **** ret_t RME_Thd_Exec_Set(cid_t Cap_Thd,
  50:Include/sys.h ****                            ptr_t Entry,
  51:Include/sys.h ****                            ptr_t Stack,
  52:Include/sys.h ****                            ptr_t Param)
  53:Include/sys.h **** {
 560              		.loc 3 53 1
 561              		.cfi_startproc
 562              		@ args = 0, pretend = 0, frame = 16
 563              		@ frame_needed = 1, uses_anonymous_args = 0
 564 0000 00482DE9 		push	{fp, lr}
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 19


 565              		.cfi_def_cfa_offset 8
 566              		.cfi_offset 11, -8
 567              		.cfi_offset 14, -4
 568 0004 04B08DE2 		add	fp, sp, #4
 569              		.cfi_def_cfa 11, 4
 570 0008 10D04DE2 		sub	sp, sp, #16
 571 000c 08000BE5 		str	r0, [fp, #-8]
 572 0010 0C100BE5 		str	r1, [fp, #-12]
 573 0014 10200BE5 		str	r2, [fp, #-16]
 574 0018 14300BE5 		str	r3, [fp, #-20]
  54:Include/sys.h ****     return RME_SVC(RME_SVC_THD_EXEC_SET,
 575              		.loc 3 54 12
 576 001c 08301BE5 		ldr	r3, [fp, #-8]
 577 0020 060883E3 		orr	r0, r3, #393216
 578 0024 14301BE5 		ldr	r3, [fp, #-20]
 579 0028 10201BE5 		ldr	r2, [fp, #-16]
 580 002c 0C101BE5 		ldr	r1, [fp, #-12]
 581 0030 FEFFFFEB 		bl	RME_Svc
 582 0034 0030A0E1 		mov	r3, r0
  55:Include/sys.h ****                    Cap_Thd,
  56:Include/sys.h ****                    (ptr_t)Entry,
  57:Include/sys.h ****                    (ptr_t)Stack,
  58:Include/sys.h ****                    (ptr_t)Param);
  59:Include/sys.h **** }
 583              		.loc 3 59 1
 584 0038 0300A0E1 		mov	r0, r3
 585 003c 04D04BE2 		sub	sp, fp, #4
 586              		.cfi_def_cfa 13, 8
 587              		@ sp needed
 588 0040 0088BDE8 		pop	{fp, pc}
 589              		.cfi_endproc
 590              	.LFE6:
 592              		.section	.text.RME_Thd_Time_Xfer,"ax",%progbits
 593              		.align	2
 594              		.global	RME_Thd_Time_Xfer
 595              		.syntax unified
 596              		.arm
 598              	RME_Thd_Time_Xfer:
 599              	.LFB7:
  60:Include/sys.h **** /* End Function:RME_Thd_Exec_Set *********************************************/
  61:Include/sys.h **** 
  62:Include/sys.h **** /* Function:RME_Thd_Time_Xfer *************************************************
  63:Include/sys.h **** Description : Transfer time from one thread to another. This can only be called
  64:Include/sys.h ****               from the core that the thread is on, and the the two threads
  65:Include/sys.h ****               involved in the time transfer must be on the same core.
  66:Include/sys.h ****               If the time transfered is more than or equal to what the source
  67:Include/sys.h ****               have, the source will be out of time or blocked. If the source is
  68:Include/sys.h ****               both out of time and blocked, we do not send the notification;
  69:Include/sys.h ****               Instead, we send the notification when the receive endpoint
  70:Include/sys.h ****               actually receive something.
  71:Include/sys.h ****               It is possible to transfer time to threads have a lower priority,
  72:Include/sys.h ****               and it is also possible to transfer time to threads that have a
  73:Include/sys.h ****               higher priority. In the latter case, and if the source is
  74:Include/sys.h ****               currently running, a preemption will occur.
  75:Include/sys.h **** Input       : RME_cid_t Cap_Thd_Dst - The destination thread.
  76:Include/sys.h ****                                       2-Level.
  77:Include/sys.h ****               RME_cid_t Cap_Thd_Src - The source thread.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 20


  78:Include/sys.h ****                                       2-Level.
  79:Include/sys.h ****               RME_ptr_t Time - The time to transfer, in slices. A slice is the
  80:Include/sys.h ****                                minimal amount of time transfered in the system
  81:Include/sys.h ****                                usually on the order of 100us or 1ms.
  82:Include/sys.h ****                                Use RME_THD_INIT_TIME for revoking transfer.
  83:Include/sys.h ****                                Use RME_THD_INF_TIME for infinite trasnfer.
  84:Include/sys.h **** Output      : None.
  85:Include/sys.h **** Return      : RME_ret_t - If successful, the destination time amount; or an
  86:Include/sys.h ****                           error code.
  87:Include/sys.h **** ******************************************************************************/
  88:Include/sys.h **** ret_t RME_Thd_Time_Xfer(cid_t Cap_Thd_Dst,
  89:Include/sys.h ****                         cid_t Cap_Thd_Src,
  90:Include/sys.h ****                         ptr_t Time)
  91:Include/sys.h **** {
 600              		.loc 3 91 1
 601              		.cfi_startproc
 602              		@ args = 0, pretend = 0, frame = 16
 603              		@ frame_needed = 1, uses_anonymous_args = 0
 604 0000 00482DE9 		push	{fp, lr}
 605              		.cfi_def_cfa_offset 8
 606              		.cfi_offset 11, -8
 607              		.cfi_offset 14, -4
 608 0004 04B08DE2 		add	fp, sp, #4
 609              		.cfi_def_cfa 11, 4
 610 0008 10D04DE2 		sub	sp, sp, #16
 611 000c 08000BE5 		str	r0, [fp, #-8]
 612 0010 0C100BE5 		str	r1, [fp, #-12]
 613 0014 10200BE5 		str	r2, [fp, #-16]
  92:Include/sys.h ****     return RME_SVC(RME_SVC_THD_TIME_XFER,
 614              		.loc 3 92 12
 615 0018 08101BE5 		ldr	r1, [fp, #-8]
 616 001c 0C201BE5 		ldr	r2, [fp, #-12]
 617 0020 10301BE5 		ldr	r3, [fp, #-16]
 618 0024 0207A0E3 		mov	r0, #524288
 619 0028 FEFFFFEB 		bl	RME_Svc
 620 002c 0030A0E1 		mov	r3, r0
  93:Include/sys.h ****                    0U,
  94:Include/sys.h ****                    Cap_Thd_Dst,
  95:Include/sys.h ****                    Cap_Thd_Src,
  96:Include/sys.h ****                    Time);
  97:Include/sys.h **** }
 621              		.loc 3 97 1
 622 0030 0300A0E1 		mov	r0, r3
 623 0034 04D04BE2 		sub	sp, fp, #4
 624              		.cfi_def_cfa 13, 8
 625              		@ sp needed
 626 0038 0088BDE8 		pop	{fp, pc}
 627              		.cfi_endproc
 628              	.LFE7:
 630              		.section	.text.RME_Thd_Sched_Bind,"ax",%progbits
 631              		.align	2
 632              		.global	RME_Thd_Sched_Bind
 633              		.syntax unified
 634              		.arm
 636              	RME_Thd_Sched_Bind:
 637              	.LFB8:
  98:Include/sys.h **** /* End Function:RME_Thd_Time_Xfer ********************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 21


  99:Include/sys.h **** 
 100:Include/sys.h **** 
 101:Include/sys.h **** /* Function:RME_Thd_Sched_Bind ************************************************
 102:Include/sys.h **** Description : Set a thread's priority level, and its scheduler thread. When
 103:Include/sys.h ****               there are any state changes on this thread, a notification will
 104:Include/sys.h ****               be sent to its scheduler thread. If the state of the thread
 105:Include/sys.h ****               changes for multiple times, then only the most recent state will
 106:Include/sys.h ****               be reflected in the scheduler's receive queue.
 107:Include/sys.h ****               The scheduler and the threads that it schedule must be on the
 108:Include/sys.h ****               same core. When a thread wants to go from one core to another,
 109:Include/sys.h ****               its notification to the scheduler must all be processed, and it
 110:Include/sys.h ****               must have no scheduler notifications in itself.
 111:Include/sys.h ****               This must be called on the same core with the Cap_Thd_Sched, and
 112:Include/sys.h ****               the Cap_Thd itself must be free.
 113:Include/sys.h ****               It is impossible to set a thread's priority beyond its maximum
 114:Include/sys.h ****               priority.
 115:Include/sys.h **** Input       : RME_cid_t Cap_Thd - The capability to the thread.
 116:Include/sys.h ****                                   2-Level.
 117:Include/sys.h ****               RME_cid_t Cap_Thd_Sched - The scheduler thread.
 118:Include/sys.h ****                                         2-Level.
 119:Include/sys.h ****               RME_cid_t Cap_Sig - The signal endpoint for scheduler
 120:Include/sys.h ****                                   notifications. This signal endpoint will be
 121:Include/sys.h ****                                   sent to whenever this thread has a fault, or
 122:Include/sys.h ****                                   timeouts. This is purely optional; if it is
 123:Include/sys.h ****                                   not needed, pass in RME_CID_NULL.
 124:Include/sys.h ****               RME_tid_t TID - The thread ID. This is user-supplied, and the
 125:Include/sys.h ****                               kernel will not check whether there are two
 126:Include/sys.h ****                               threads that have the same TID.
 127:Include/sys.h ****               RME_ptr_t Prio - The priority level, higher is more critical.
 128:Include/sys.h ****               ptr_t Haddr - The kernel-accessible virtual memory address
 129:Include/sys.h ****                                 for this thread's register sets, only used by
 130:Include/sys.h ****                                 hypervisor-managed threads. For other threads,
 131:Include/sys.h ****                                 please pass in NULL instead.
 132:Include/sys.h **** 
 133:Include/sys.h **** Output      : None.
 134:Include/sys.h **** Return      : RME_ret_t - If successful, 0; or an error code.
 135:Include/sys.h **** ******************************************************************************/
 136:Include/sys.h **** ret_t RME_Thd_Sched_Bind(cid_t Cap_Thd,
 137:Include/sys.h ****                          cid_t Cap_Thd_Sched,
 138:Include/sys.h ****                          cid_t Cap_Sig,
 139:Include/sys.h ****                          tid_t TID,
 140:Include/sys.h ****                          ptr_t Prio,
 141:Include/sys.h ****                          ptr_t Haddr)
 142:Include/sys.h **** {
 638              		.loc 3 142 1
 639              		.cfi_startproc
 640              		@ args = 8, pretend = 0, frame = 16
 641              		@ frame_needed = 1, uses_anonymous_args = 0
 642 0000 00482DE9 		push	{fp, lr}
 643              		.cfi_def_cfa_offset 8
 644              		.cfi_offset 11, -8
 645              		.cfi_offset 14, -4
 646 0004 04B08DE2 		add	fp, sp, #4
 647              		.cfi_def_cfa 11, 4
 648 0008 10D04DE2 		sub	sp, sp, #16
 649 000c 08000BE5 		str	r0, [fp, #-8]
 650 0010 0C100BE5 		str	r1, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 22


 651 0014 10200BE5 		str	r2, [fp, #-16]
 652 0018 14300BE5 		str	r3, [fp, #-20]
 143:Include/sys.h ****     return RME_SVC(RME_SVC_THD_SCHED_BIND,
 653              		.loc 3 143 12
 654 001c 08301BE5 		ldr	r3, [fp, #-8]
 655 0020 1B0883E3 		orr	r0, r3, #1769472
 656 0024 0C301BE5 		ldr	r3, [fp, #-12]
 657 0028 0328A0E1 		lsl	r2, r3, #16
 658 002c 10301BE5 		ldr	r3, [fp, #-16]
 659 0030 7330FFE6 		uxth	r3, r3
 660 0034 031082E1 		orr	r1, r2, r3
 661 0038 14301BE5 		ldr	r3, [fp, #-20]
 662 003c 0328A0E1 		lsl	r2, r3, #16
 663 0040 04309BE5 		ldr	r3, [fp, #4]
 664 0044 7330FFE6 		uxth	r3, r3
 665 0048 032082E1 		orr	r2, r2, r3
 666 004c 08309BE5 		ldr	r3, [fp, #8]
 667 0050 FEFFFFEB 		bl	RME_Svc
 668 0054 0030A0E1 		mov	r3, r0
 144:Include/sys.h ****                    Cap_Thd,
 145:Include/sys.h ****                    RME_PARAM_D1(Cap_Thd_Sched)|RME_PARAM_D0(Cap_Sig),
 146:Include/sys.h ****                    RME_PARAM_D1(TID)|RME_PARAM_D0(Prio),
 147:Include/sys.h ****                    Haddr);
 148:Include/sys.h **** }
 669              		.loc 3 148 1
 670 0058 0300A0E1 		mov	r0, r3
 671 005c 04D04BE2 		sub	sp, fp, #4
 672              		.cfi_def_cfa 13, 8
 673              		@ sp needed
 674 0060 0088BDE8 		pop	{fp, pc}
 675              		.cfi_endproc
 676              	.LFE8:
 678              		.section	.text.RME_Thd_Swt,"ax",%progbits
 679              		.align	2
 680              		.global	RME_Thd_Swt
 681              		.syntax unified
 682              		.arm
 684              	RME_Thd_Swt:
 685              	.LFB9:
 149:Include/sys.h **** /* End Function:RME_Thd_Sched_Bind *******************************************/
 150:Include/sys.h **** 
 151:Include/sys.h **** 
 152:Include/sys.h **** /* Function:RME_Thd_Swt *******************************************************
 153:Include/sys.h **** Description : Switch to another thread. The thread to switch to must have the
 154:Include/sys.h ****               same preemptive priority as this thread, and have time, and not
 155:Include/sys.h ****               blocked.
 156:Include/sys.h **** Input       : RME_cid_t Cap_Thd - The capability to the thread. If this is -1,
 157:Include/sys.h ****                                   the kernel will pickup whatever thread that
 158:Include/sys.h ****                                   has the highest priority and time to run.
 159:Include/sys.h ****                                   2-Level.
 160:Include/sys.h ****               RME_ptr_t Is_Yield - This is a flag to indicate whether this
 161:Include/sys.h ****                                    is a full yield. If it is, the kernel will
 162:Include/sys.h ****                                    discard all the time alloted on this
 163:Include/sys.h ****                                    thread.
 164:Include/sys.h **** Output      : None.
 165:Include/sys.h **** Return      : RME_ret_t - If successful, 0; or an error code.
 166:Include/sys.h **** ******************************************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 23


 167:Include/sys.h **** ret_t RME_Thd_Swt(cid_t Cap_Thd,
 168:Include/sys.h ****                   ptr_t Is_Yield)
 169:Include/sys.h **** {
 686              		.loc 3 169 1
 687              		.cfi_startproc
 688              		@ args = 0, pretend = 0, frame = 8
 689              		@ frame_needed = 1, uses_anonymous_args = 0
 690 0000 00482DE9 		push	{fp, lr}
 691              		.cfi_def_cfa_offset 8
 692              		.cfi_offset 11, -8
 693              		.cfi_offset 14, -4
 694 0004 04B08DE2 		add	fp, sp, #4
 695              		.cfi_def_cfa 11, 4
 696 0008 08D04DE2 		sub	sp, sp, #8
 697 000c 08000BE5 		str	r0, [fp, #-8]
 698 0010 0C100BE5 		str	r1, [fp, #-12]
 170:Include/sys.h ****     return RME_SVC(RME_SVC_THD_SWT,
 699              		.loc 3 170 12
 700 0014 08101BE5 		ldr	r1, [fp, #-8]
 701 0018 0030A0E3 		mov	r3, #0
 702 001c 0C201BE5 		ldr	r2, [fp, #-12]
 703 0020 0908A0E3 		mov	r0, #589824
 704 0024 FEFFFFEB 		bl	RME_Svc
 705 0028 0030A0E1 		mov	r3, r0
 171:Include/sys.h ****                    0U,
 172:Include/sys.h ****                    Cap_Thd,
 173:Include/sys.h ****                    Is_Yield,
 174:Include/sys.h ****                    0U);
 175:Include/sys.h **** }
 706              		.loc 3 175 1
 707 002c 0300A0E1 		mov	r0, r3
 708 0030 04D04BE2 		sub	sp, fp, #4
 709              		.cfi_def_cfa 13, 8
 710              		@ sp needed
 711 0034 0088BDE8 		pop	{fp, pc}
 712              		.cfi_endproc
 713              	.LFE9:
 715              		.section	.text.RME_Sig_Crt,"ax",%progbits
 716              		.align	2
 717              		.global	RME_Sig_Crt
 718              		.syntax unified
 719              		.arm
 721              	RME_Sig_Crt:
 722              	.LFB10:
 176:Include/sys.h **** /* End Function:RME_Thd_Swt **************************************************/
 177:Include/sys.h **** /*asynchronous communication function*/
 178:Include/sys.h **** /* Function:RME_Sig_Crt *******************************************************
 179:Include/sys.h **** Description : Create a signal endpoint.
 180:Include/sys.h **** Input       : RME_cid_t Cap_Cpt - The capability to the capability table to use
 181:Include/sys.h ****                                   for this signal.
 182:Include/sys.h ****                                   2-Level.
 183:Include/sys.h ****               RME_cid_t Cap_Sig - The capability slot that you want this newly
 184:Include/sys.h ****                                   created signal capability to be in.
 185:Include/sys.h ****                                   1-Level.
 186:Include/sys.h **** Output      : None.
 187:Include/sys.h **** Return      : RME_ret_t - If successful, 0; or an error code.
 188:Include/sys.h **** ******************************************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 24


 189:Include/sys.h **** ret_t RME_Sig_Crt(cid_t Cap_Cpt,
 190:Include/sys.h ****                   cid_t Cap_Sig)
 191:Include/sys.h **** {
 723              		.loc 3 191 1
 724              		.cfi_startproc
 725              		@ args = 0, pretend = 0, frame = 8
 726              		@ frame_needed = 1, uses_anonymous_args = 0
 727 0000 00482DE9 		push	{fp, lr}
 728              		.cfi_def_cfa_offset 8
 729              		.cfi_offset 11, -8
 730              		.cfi_offset 14, -4
 731 0004 04B08DE2 		add	fp, sp, #4
 732              		.cfi_def_cfa 11, 4
 733 0008 08D04DE2 		sub	sp, sp, #8
 734 000c 08000BE5 		str	r0, [fp, #-8]
 735 0010 0C100BE5 		str	r1, [fp, #-12]
 192:Include/sys.h ****     return RME_SVC(RME_SVC_SIG_CRT,
 736              		.loc 3 192 12
 737 0014 08301BE5 		ldr	r3, [fp, #-8]
 738 0018 1D0883E3 		orr	r0, r3, #1900544
 739 001c 0C101BE5 		ldr	r1, [fp, #-12]
 740 0020 0030A0E3 		mov	r3, #0
 741 0024 0020A0E3 		mov	r2, #0
 742 0028 FEFFFFEB 		bl	RME_Svc
 743 002c 0030A0E1 		mov	r3, r0
 193:Include/sys.h ****                    Cap_Cpt,
 194:Include/sys.h ****                    Cap_Sig,
 195:Include/sys.h ****                    0U,
 196:Include/sys.h ****                    0U);
 197:Include/sys.h **** }
 744              		.loc 3 197 1
 745 0030 0300A0E1 		mov	r0, r3
 746 0034 04D04BE2 		sub	sp, fp, #4
 747              		.cfi_def_cfa 13, 8
 748              		@ sp needed
 749 0038 0088BDE8 		pop	{fp, pc}
 750              		.cfi_endproc
 751              	.LFE10:
 753              		.section	.text.RME_Sig_Del,"ax",%progbits
 754              		.align	2
 755              		.global	RME_Sig_Del
 756              		.syntax unified
 757              		.arm
 759              	RME_Sig_Del:
 760              	.LFB11:
 198:Include/sys.h **** /* End Function:RME_Sig_Crt **************************************************/
 199:Include/sys.h **** /* Function:RME_Sig_Del *******************************************************
 200:Include/sys.h **** Description : Delete a signal endpoint.
 201:Include/sys.h **** Input       : RME_cid_t Cap_Cpt - The capability to the capability table to
 202:Include/sys.h ****                                   delete from.
 203:Include/sys.h ****                                   2-Level.
 204:Include/sys.h ****               RME_cid_t Cap_Sig - The capability to the signal.
 205:Include/sys.h ****                                   1-Level.
 206:Include/sys.h **** Output      : None.
 207:Include/sys.h **** Return      : RME_ret_t - If successful, 0; or an error code.
 208:Include/sys.h **** ******************************************************************************/
 209:Include/sys.h **** ret_t RME_Sig_Del(cid_t Cap_Cpt,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 25


 210:Include/sys.h ****                   cid_t Cap_Sig)
 211:Include/sys.h **** {
 761              		.loc 3 211 1
 762              		.cfi_startproc
 763              		@ args = 0, pretend = 0, frame = 8
 764              		@ frame_needed = 1, uses_anonymous_args = 0
 765 0000 00482DE9 		push	{fp, lr}
 766              		.cfi_def_cfa_offset 8
 767              		.cfi_offset 11, -8
 768              		.cfi_offset 14, -4
 769 0004 04B08DE2 		add	fp, sp, #4
 770              		.cfi_def_cfa 11, 4
 771 0008 08D04DE2 		sub	sp, sp, #8
 772 000c 08000BE5 		str	r0, [fp, #-8]
 773 0010 0C100BE5 		str	r1, [fp, #-12]
 212:Include/sys.h ****     return RME_SVC(RME_SVC_SIG_DEL,
 774              		.loc 3 212 12
 775 0014 08301BE5 		ldr	r3, [fp, #-8]
 776 0018 1E0883E3 		orr	r0, r3, #1966080
 777 001c 0C101BE5 		ldr	r1, [fp, #-12]
 778 0020 0030A0E3 		mov	r3, #0
 779 0024 0020A0E3 		mov	r2, #0
 780 0028 FEFFFFEB 		bl	RME_Svc
 781 002c 0030A0E1 		mov	r3, r0
 213:Include/sys.h ****                    Cap_Cpt,
 214:Include/sys.h ****                    Cap_Sig,
 215:Include/sys.h ****                    0U,
 216:Include/sys.h ****                    0U);
 217:Include/sys.h **** }
 782              		.loc 3 217 1
 783 0030 0300A0E1 		mov	r0, r3
 784 0034 04D04BE2 		sub	sp, fp, #4
 785              		.cfi_def_cfa 13, 8
 786              		@ sp needed
 787 0038 0088BDE8 		pop	{fp, pc}
 788              		.cfi_endproc
 789              	.LFE11:
 791              		.section	.text.RME_Sig_Snd,"ax",%progbits
 792              		.align	2
 793              		.global	RME_Sig_Snd
 794              		.syntax unified
 795              		.arm
 797              	RME_Sig_Snd:
 798              	.LFB12:
 218:Include/sys.h **** /* End Function:RME_Sig_Del **************************************************/
 219:Include/sys.h **** /* Function:RME_Sig_Snd ******************************************************
 220:Include/sys.h **** Description : Try to send to a signal endpoint. This system call can cause
 221:Include/sys.h ****               a potential context switch.
 222:Include/sys.h **** Input       : RME_cid_t Cap_Sig - The capability to the signal.
 223:Include/sys.h ****                                   2-Level.
 224:Include/sys.h **** Output      : None.
 225:Include/sys.h **** Return      : RME_ret_t - If successful, 0, or an error code.
 226:Include/sys.h **** ******************************************************************************/
 227:Include/sys.h **** ret_t RME_Sig_Snd(cid_t Cap_Sig)
 228:Include/sys.h **** {
 799              		.loc 3 228 1
 800              		.cfi_startproc
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 26


 801              		@ args = 0, pretend = 0, frame = 8
 802              		@ frame_needed = 1, uses_anonymous_args = 0
 803 0000 00482DE9 		push	{fp, lr}
 804              		.cfi_def_cfa_offset 8
 805              		.cfi_offset 11, -8
 806              		.cfi_offset 14, -4
 807 0004 04B08DE2 		add	fp, sp, #4
 808              		.cfi_def_cfa 11, 4
 809 0008 08D04DE2 		sub	sp, sp, #8
 810 000c 08000BE5 		str	r0, [fp, #-8]
 229:Include/sys.h ****     return RME_SVC(RME_SVC_SIG_SND,
 811              		.loc 3 229 12
 812 0010 08101BE5 		ldr	r1, [fp, #-8]
 813 0014 0030A0E3 		mov	r3, #0
 814 0018 0020A0E3 		mov	r2, #0
 815 001c 0208A0E3 		mov	r0, #131072
 816 0020 FEFFFFEB 		bl	RME_Svc
 817 0024 0030A0E1 		mov	r3, r0
 230:Include/sys.h ****                    0U,
 231:Include/sys.h ****                    Cap_Sig,
 232:Include/sys.h ****                    0U,
 233:Include/sys.h ****                    0U);
 234:Include/sys.h **** }
 818              		.loc 3 234 1
 819 0028 0300A0E1 		mov	r0, r3
 820 002c 04D04BE2 		sub	sp, fp, #4
 821              		.cfi_def_cfa 13, 8
 822              		@ sp needed
 823 0030 0088BDE8 		pop	{fp, pc}
 824              		.cfi_endproc
 825              	.LFE12:
 827              		.section	.text.RME_Sig_Rcv,"ax",%progbits
 828              		.align	2
 829              		.global	RME_Sig_Rcv
 830              		.syntax unified
 831              		.arm
 833              	RME_Sig_Rcv:
 834              	.LFB13:
 235:Include/sys.h **** /* End Function:RME_Sig_Snd **************************************************/
 236:Include/sys.h **** /* Function:RME_Sig_Rcv *******************************************************
 237:Include/sys.h **** Description : Try to receive from a signal endpoint. The rules for signal
 238:Include/sys.h ****               endpoint receive is:
 239:Include/sys.h ****               1.If a receive endpoint have many send endpoints, everyone can
 240:Include/sys.h ****                 send to it, and sending to it will increase the count by 1.
 241:Include/sys.h ****               2.If some thread blocks on a receive endpoint, the wakeup is only
 242:Include/sys.h ****                 possible from the same core that thread is on.
 243:Include/sys.h ****               3.It is not recommended to let 2 cores operate on the rcv
 244:Include/sys.h ****                 endpoint simutaneously.
 245:Include/sys.h ****               This system call can potentially trigger a context switch.
 246:Include/sys.h **** Input       : RME_cid_t Cap_Sig - The capability to the signal.
 247:Include/sys.h ****                                   2-Level.
 248:Include/sys.h ****               RME_ptr_t Option - The receive option.
 249:Include/sys.h **** Output      : None.
 250:Include/sys.h **** Return      : RME_ret_t - If successful, a non-negative number containing the
 251:Include/sys.h ****                           number of signals received; or an error code.
 252:Include/sys.h **** ******************************************************************************/
 253:Include/sys.h **** ret_t RME_Sig_Rcv(cid_t Cap_Sig,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 27


 254:Include/sys.h ****                   ptr_t Option)
 255:Include/sys.h **** {
 835              		.loc 3 255 1
 836              		.cfi_startproc
 837              		@ args = 0, pretend = 0, frame = 8
 838              		@ frame_needed = 1, uses_anonymous_args = 0
 839 0000 00482DE9 		push	{fp, lr}
 840              		.cfi_def_cfa_offset 8
 841              		.cfi_offset 11, -8
 842              		.cfi_offset 14, -4
 843 0004 04B08DE2 		add	fp, sp, #4
 844              		.cfi_def_cfa 11, 4
 845 0008 08D04DE2 		sub	sp, sp, #8
 846 000c 08000BE5 		str	r0, [fp, #-8]
 847 0010 0C100BE5 		str	r1, [fp, #-12]
 256:Include/sys.h ****     return RME_SVC(RME_SVC_SIG_RCV,
 848              		.loc 3 256 12
 849 0014 08101BE5 		ldr	r1, [fp, #-8]
 850 0018 0030A0E3 		mov	r3, #0
 851 001c 0C201BE5 		ldr	r2, [fp, #-12]
 852 0020 0308A0E3 		mov	r0, #196608
 853 0024 FEFFFFEB 		bl	RME_Svc
 854 0028 0030A0E1 		mov	r3, r0
 257:Include/sys.h ****                    0U,
 258:Include/sys.h ****                    Cap_Sig,
 259:Include/sys.h ****                    Option,
 260:Include/sys.h ****                    0U);
 261:Include/sys.h **** }
 855              		.loc 3 261 1
 856 002c 0300A0E1 		mov	r0, r3
 857 0030 04D04BE2 		sub	sp, fp, #4
 858              		.cfi_def_cfa 13, 8
 859              		@ sp needed
 860 0034 0088BDE8 		pop	{fp, pc}
 861              		.cfi_endproc
 862              	.LFE13:
 864              		.section	.text.RME_Prc_Crt,"ax",%progbits
 865              		.align	2
 866              		.global	RME_Prc_Crt
 867              		.syntax unified
 868              		.arm
 870              	RME_Prc_Crt:
 871              	.LFB14:
 262:Include/sys.h **** /* Function:RME_Prc_Crt *******************************************************
 263:Include/sys.h **** Description : Create a process. A process is in fact a protection domain
 264:Include/sys.h ****               associated with a set of capabilities.
 265:Include/sys.h **** Input       : cid_t Cap_Cpt_Crt - The capability to the capability table to
 266:Include/sys.h ****                                       put this process capability in.
 267:Include/sys.h ****                                       2-Level.
 268:Include/sys.h ****               cid_t Cap_Prc - The capability slot that you want this newly
 269:Include/sys.h ****                                   created process capability to be in.
 270:Include/sys.h ****                                   1-Level.
 271:Include/sys.h ****               cid_t Cap_Cpt - The capability to the capability table to use
 272:Include/sys.h ****                                   for this process.
 273:Include/sys.h ****                                   2-Level.
 274:Include/sys.h ****               cid_t Cap_Pgt - The capability to the page table to use for
 275:Include/sys.h ****                                   this process.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 28


 276:Include/sys.h ****                                   2-Level.
 277:Include/sys.h ****               ptr_t Raw_Pgt - Alternate user-supplied page table physical
 278:Include/sys.h ****                                   address.
 279:Include/sys.h **** Output      : None.
 280:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 281:Include/sys.h **** ******************************************************************************/
 282:Include/sys.h **** ret_t RME_Prc_Crt(cid_t Cap_Cpt_Crt,
 283:Include/sys.h ****                       cid_t Cap_Prc,
 284:Include/sys.h ****                       cid_t Cap_Cpt,
 285:Include/sys.h ****                       cid_t Cap_Pgt)
 286:Include/sys.h **** {
 872              		.loc 3 286 1
 873              		.cfi_startproc
 874              		@ args = 0, pretend = 0, frame = 16
 875              		@ frame_needed = 1, uses_anonymous_args = 0
 876 0000 00482DE9 		push	{fp, lr}
 877              		.cfi_def_cfa_offset 8
 878              		.cfi_offset 11, -8
 879              		.cfi_offset 14, -4
 880 0004 04B08DE2 		add	fp, sp, #4
 881              		.cfi_def_cfa 11, 4
 882 0008 10D04DE2 		sub	sp, sp, #16
 883 000c 08000BE5 		str	r0, [fp, #-8]
 884 0010 0C100BE5 		str	r1, [fp, #-12]
 885 0014 10200BE5 		str	r2, [fp, #-16]
 886 0018 14300BE5 		str	r3, [fp, #-20]
 287:Include/sys.h ****     return RME_SVC(RME_SVC_PRC_CRT,
 887              		.loc 3 287 12
 888 001c 08301BE5 		ldr	r3, [fp, #-8]
 889 0020 150883E3 		orr	r0, r3, #1376256
 890 0024 0C101BE5 		ldr	r1, [fp, #-12]
 891 0028 10201BE5 		ldr	r2, [fp, #-16]
 892 002c 14301BE5 		ldr	r3, [fp, #-20]
 893 0030 FEFFFFEB 		bl	RME_Svc
 894 0034 0030A0E1 		mov	r3, r0
 288:Include/sys.h ****                    Cap_Cpt_Crt,
 289:Include/sys.h ****                    Cap_Prc,
 290:Include/sys.h ****                    Cap_Cpt,
 291:Include/sys.h ****                    Cap_Pgt);
 292:Include/sys.h **** }
 895              		.loc 3 292 1
 896 0038 0300A0E1 		mov	r0, r3
 897 003c 04D04BE2 		sub	sp, fp, #4
 898              		.cfi_def_cfa 13, 8
 899              		@ sp needed
 900 0040 0088BDE8 		pop	{fp, pc}
 901              		.cfi_endproc
 902              	.LFE14:
 904              		.section	.text.RME_Prc_Del,"ax",%progbits
 905              		.align	2
 906              		.global	RME_Prc_Del
 907              		.syntax unified
 908              		.arm
 910              	RME_Prc_Del:
 911              	.LFB15:
 293:Include/sys.h **** /* End Function:RME_Prc_Crt **************************************************/
 294:Include/sys.h **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 29


 295:Include/sys.h **** /* Function:RME_Prc_Del *******************************************************
 296:Include/sys.h **** Description : Delete a process.
 297:Include/sys.h **** Input       : cid_t Cap_Cpt - The capability to the capability table.
 298:Include/sys.h ****                                   2-Level.
 299:Include/sys.h ****               cid_t Cap_Prc - The capability to the process.
 300:Include/sys.h ****                                   1-Level.
 301:Include/sys.h **** Output      : None.
 302:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 303:Include/sys.h **** ******************************************************************************/
 304:Include/sys.h **** ret_t RME_Prc_Del(cid_t Cap_Cpt,
 305:Include/sys.h ****                       cid_t Cap_Prc)
 306:Include/sys.h **** {
 912              		.loc 3 306 1
 913              		.cfi_startproc
 914              		@ args = 0, pretend = 0, frame = 8
 915              		@ frame_needed = 1, uses_anonymous_args = 0
 916 0000 00482DE9 		push	{fp, lr}
 917              		.cfi_def_cfa_offset 8
 918              		.cfi_offset 11, -8
 919              		.cfi_offset 14, -4
 920 0004 04B08DE2 		add	fp, sp, #4
 921              		.cfi_def_cfa 11, 4
 922 0008 08D04DE2 		sub	sp, sp, #8
 923 000c 08000BE5 		str	r0, [fp, #-8]
 924 0010 0C100BE5 		str	r1, [fp, #-12]
 307:Include/sys.h ****     return RME_SVC(RME_SVC_PRC_DEL,
 925              		.loc 3 307 12
 926 0014 08301BE5 		ldr	r3, [fp, #-8]
 927 0018 160883E3 		orr	r0, r3, #1441792
 928 001c 0C101BE5 		ldr	r1, [fp, #-12]
 929 0020 0030A0E3 		mov	r3, #0
 930 0024 0020A0E3 		mov	r2, #0
 931 0028 FEFFFFEB 		bl	RME_Svc
 932 002c 0030A0E1 		mov	r3, r0
 308:Include/sys.h ****                    Cap_Cpt,
 309:Include/sys.h ****                    Cap_Prc,
 310:Include/sys.h ****                    0U,
 311:Include/sys.h ****                    0U);
 312:Include/sys.h **** }
 933              		.loc 3 312 1
 934 0030 0300A0E1 		mov	r0, r3
 935 0034 04D04BE2 		sub	sp, fp, #4
 936              		.cfi_def_cfa 13, 8
 937              		@ sp needed
 938 0038 0088BDE8 		pop	{fp, pc}
 939              		.cfi_endproc
 940              	.LFE15:
 942              		.section	.text.RME_Prc_Cpt,"ax",%progbits
 943              		.align	2
 944              		.global	RME_Prc_Cpt
 945              		.syntax unified
 946              		.arm
 948              	RME_Prc_Cpt:
 949              	.LFB16:
 313:Include/sys.h **** /* End Function:RME_Prc_Del **************************************************/
 314:Include/sys.h **** 
 315:Include/sys.h **** /* Function:RME_Prc_Cpt *******************************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 30


 316:Include/sys.h **** Description : Change a process's capability table.
 317:Include/sys.h **** Input       : cid_t Cap_Prc - The capability to the process that have been
 318:Include/sys.h ****                                   created already.
 319:Include/sys.h ****                                   2-Level.
 320:Include/sys.h ****               cid_t Cap_Cpt - The capability to the capability table to use
 321:Include/sys.h ****                                   for this process.
 322:Include/sys.h ****                                   2-Level.
 323:Include/sys.h **** Output      : None.
 324:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 325:Include/sys.h **** ******************************************************************************/
 326:Include/sys.h **** ret_t RME_Prc_Cpt(cid_t Cap_Prc,
 327:Include/sys.h ****                       cid_t Cap_Cpt)
 328:Include/sys.h **** {
 950              		.loc 3 328 1
 951              		.cfi_startproc
 952              		@ args = 0, pretend = 0, frame = 8
 953              		@ frame_needed = 1, uses_anonymous_args = 0
 954 0000 00482DE9 		push	{fp, lr}
 955              		.cfi_def_cfa_offset 8
 956              		.cfi_offset 11, -8
 957              		.cfi_offset 14, -4
 958 0004 04B08DE2 		add	fp, sp, #4
 959              		.cfi_def_cfa 11, 4
 960 0008 08D04DE2 		sub	sp, sp, #8
 961 000c 08000BE5 		str	r0, [fp, #-8]
 962 0010 0C100BE5 		str	r1, [fp, #-12]
 329:Include/sys.h ****     return RME_SVC(RME_SVC_PRC_CPT,
 963              		.loc 3 329 12
 964 0014 08101BE5 		ldr	r1, [fp, #-8]
 965 0018 0C201BE5 		ldr	r2, [fp, #-12]
 966 001c 0030A0E3 		mov	r3, #0
 967 0020 1708A0E3 		mov	r0, #1507328
 968 0024 FEFFFFEB 		bl	RME_Svc
 969 0028 0030A0E1 		mov	r3, r0
 330:Include/sys.h ****                    0U,
 331:Include/sys.h ****                    Cap_Prc,
 332:Include/sys.h ****                    Cap_Cpt,
 333:Include/sys.h ****                    0U);
 334:Include/sys.h **** }
 970              		.loc 3 334 1
 971 002c 0300A0E1 		mov	r0, r3
 972 0030 04D04BE2 		sub	sp, fp, #4
 973              		.cfi_def_cfa 13, 8
 974              		@ sp needed
 975 0034 0088BDE8 		pop	{fp, pc}
 976              		.cfi_endproc
 977              	.LFE16:
 979              		.section	.text.RME_Prc_Pgt,"ax",%progbits
 980              		.align	2
 981              		.global	RME_Prc_Pgt
 982              		.syntax unified
 983              		.arm
 985              	RME_Prc_Pgt:
 986              	.LFB17:
 335:Include/sys.h **** /* End Function:RME_Prc_Cpt **************************************************/
 336:Include/sys.h **** 
 337:Include/sys.h **** /* Function:RME_Prc_Pgt *******************************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 31


 338:Include/sys.h **** Description : Change a process's page table.
 339:Include/sys.h **** Input       : cid_t Cap_Prc - The capability to the process that have been
 340:Include/sys.h ****                                   created already.
 341:Include/sys.h ****                                   2-Level.
 342:Include/sys.h ****               cid_t Cap_Pgt - The capability to the page table to use for
 343:Include/sys.h ****                                   this process.
 344:Include/sys.h ****                                   2-Level.
 345:Include/sys.h ****               ptr_t Raw_Pgt - Alternate user-supplied page table physical
 346:Include/sys.h ****                                   address.
 347:Include/sys.h **** Output      : None.
 348:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 349:Include/sys.h **** ******************************************************************************/
 350:Include/sys.h **** ret_t RME_Prc_Pgt(cid_t Cap_Prc,
 351:Include/sys.h ****                       cid_t Cap_Pgt)
 352:Include/sys.h **** {
 987              		.loc 3 352 1
 988              		.cfi_startproc
 989              		@ args = 0, pretend = 0, frame = 8
 990              		@ frame_needed = 1, uses_anonymous_args = 0
 991 0000 00482DE9 		push	{fp, lr}
 992              		.cfi_def_cfa_offset 8
 993              		.cfi_offset 11, -8
 994              		.cfi_offset 14, -4
 995 0004 04B08DE2 		add	fp, sp, #4
 996              		.cfi_def_cfa 11, 4
 997 0008 08D04DE2 		sub	sp, sp, #8
 998 000c 08000BE5 		str	r0, [fp, #-8]
 999 0010 0C100BE5 		str	r1, [fp, #-12]
 353:Include/sys.h ****     return RME_SVC(RME_SVC_PRC_PGT,
 1000              		.loc 3 353 12
 1001 0014 08101BE5 		ldr	r1, [fp, #-8]
 1002 0018 0C201BE5 		ldr	r2, [fp, #-12]
 1003 001c 0030A0E3 		mov	r3, #0
 1004 0020 0607A0E3 		mov	r0, #1572864
 1005 0024 FEFFFFEB 		bl	RME_Svc
 1006 0028 0030A0E1 		mov	r3, r0
 354:Include/sys.h ****                    0U,
 355:Include/sys.h ****                    Cap_Prc,
 356:Include/sys.h ****                    Cap_Pgt,
 357:Include/sys.h ****                    0U);
 358:Include/sys.h **** }
 1007              		.loc 3 358 1
 1008 002c 0300A0E1 		mov	r0, r3
 1009 0030 04D04BE2 		sub	sp, fp, #4
 1010              		.cfi_def_cfa 13, 8
 1011              		@ sp needed
 1012 0034 0088BDE8 		pop	{fp, pc}
 1013              		.cfi_endproc
 1014              	.LFE17:
 1016              		.section	.text.RME_Pgt_Crt,"ax",%progbits
 1017              		.align	2
 1018              		.global	RME_Pgt_Crt
 1019              		.syntax unified
 1020              		.arm
 1022              	RME_Pgt_Crt:
 1023              	.LFB18:
 359:Include/sys.h **** /* End Function:RME_Prc_Pgt **************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 32


 360:Include/sys.h **** /* Function:RME_Pgt_Crt *******************************************************
 361:Include/sys.h **** Description : Create a page table.
 362:Include/sys.h **** Input       : cid_t Cap_Cpt - The capability table that contains the newly
 363:Include/sys.h ****                                   created cap to pgtbl.
 364:Include/sys.h ****                                   2-Level.
 365:Include/sys.h ****               cid_t Cap_Kom - The kernel memory capability.
 366:Include/sys.h ****                                   2-Level.
 367:Include/sys.h ****               cid_t Cap_Pgt - The capability slot that you want this newly
 368:Include/sys.h ****                                   created page table capability to be in.
 369:Include/sys.h ****                                   1-Level.
 370:Include/sys.h ****               ptr_t Raddr - The relative virtual address to store the page
 371:Include/sys.h ****                                 table kernel object.
 372:Include/sys.h ****               ptr_t Base - The virtual address to start mapping for this
 373:Include/sys.h ****                                page table. This address must be aligned to the
 374:Include/sys.h ****                                total size of the table.
 375:Include/sys.h ****               ptr_t Is_Top - Whether this page table is the top-level. If
 376:Include/sys.h ****                                  it is, we will map all the kernel page
 377:Include/sys.h ****                                  directories into this one.
 378:Include/sys.h ****               ptr_t Size_Order - The size order of the page table. The size
 379:Include/sys.h ****                                      refers to the size of each page in the
 380:Include/sys.h ****                                      page directory.
 381:Include/sys.h ****               ptr_t Num_Order - The number order of entries in the table.
 382:Include/sys.h **** Output      : None.
 383:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 384:Include/sys.h **** ******************************************************************************/
 385:Include/sys.h **** ret_t RME_Pgt_Crt(cid_t Cap_Cpt,
 386:Include/sys.h ****                       cid_t Cap_Kom,
 387:Include/sys.h ****                       cid_t Cap_Pgt,
 388:Include/sys.h ****                       ptr_t Raddr,
 389:Include/sys.h ****                       ptr_t Base,
 390:Include/sys.h ****                       ptr_t Is_Top,
 391:Include/sys.h ****                       ptr_t Size_Order,
 392:Include/sys.h ****                       ptr_t Num_Order)
 393:Include/sys.h **** {
 1024              		.loc 3 393 1
 1025              		.cfi_startproc
 1026              		@ args = 16, pretend = 0, frame = 16
 1027              		@ frame_needed = 1, uses_anonymous_args = 0
 1028 0000 00482DE9 		push	{fp, lr}
 1029              		.cfi_def_cfa_offset 8
 1030              		.cfi_offset 11, -8
 1031              		.cfi_offset 14, -4
 1032 0004 04B08DE2 		add	fp, sp, #4
 1033              		.cfi_def_cfa 11, 4
 1034 0008 10D04DE2 		sub	sp, sp, #16
 1035 000c 08000BE5 		str	r0, [fp, #-8]
 1036 0010 0C100BE5 		str	r1, [fp, #-12]
 1037 0014 10200BE5 		str	r2, [fp, #-16]
 1038 0018 14300BE5 		str	r3, [fp, #-20]
 394:Include/sys.h **** 
 395:Include/sys.h ****     return RME_SVC(RME_PGT_SVC(Num_Order,RME_SVC_PGT_CRT),
 1039              		.loc 3 395 12
 1040 001c 10309BE5 		ldr	r3, [fp, #16]
 1041 0020 032CA0E1 		lsl	r2, r3, #24
 1042 0024 08301BE5 		ldr	r3, [fp, #-8]
 1043 0028 033082E1 		orr	r3, r2, r3
 1044 002c 0F0883E3 		orr	r0, r3, #983040
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 33


 1045 0030 0C301BE5 		ldr	r3, [fp, #-12]
 1046 0034 0328A0E1 		lsl	r2, r3, #16
 1047 0038 10301BE5 		ldr	r3, [fp, #-16]
 1048 003c 0334A0E1 		lsl	r3, r3, #8
 1049 0040 7330FFE6 		uxth	r3, r3
 1050 0044 032082E1 		orr	r2, r2, r3
 1051 0048 0C309BE5 		ldr	r3, [fp, #12]
 1052 004c 7330EFE6 		uxtb	r3, r3
 1053 0050 031082E1 		orr	r1, r2, r3
 1054 0054 04209BE5 		ldr	r2, [fp, #4]
 1055 0058 08309BE5 		ldr	r3, [fp, #8]
 1056 005c 033082E1 		orr	r3, r2, r3
 1057 0060 14201BE5 		ldr	r2, [fp, #-20]
 1058 0064 FEFFFFEB 		bl	RME_Svc
 1059 0068 0030A0E1 		mov	r3, r0
 396:Include/sys.h ****                    Cap_Cpt,
 397:Include/sys.h ****                    RME_PARAM_D1(Cap_Kom)|RME_PARAM_Q1(Cap_Pgt)|RME_PARAM_Q0(Size_Order),
 398:Include/sys.h ****                    Raddr,
 399:Include/sys.h ****                    Base|Is_Top);
 400:Include/sys.h **** }
 1060              		.loc 3 400 1
 1061 006c 0300A0E1 		mov	r0, r3
 1062 0070 04D04BE2 		sub	sp, fp, #4
 1063              		.cfi_def_cfa 13, 8
 1064              		@ sp needed
 1065 0074 0088BDE8 		pop	{fp, pc}
 1066              		.cfi_endproc
 1067              	.LFE18:
 1069              		.section	.text.RME_Pgt_Del,"ax",%progbits
 1070              		.align	2
 1071              		.global	RME_Pgt_Del
 1072              		.syntax unified
 1073              		.arm
 1075              	RME_Pgt_Del:
 1076              	.LFB19:
 401:Include/sys.h **** /* End Function:RME_Pgt_Crt **************************************************/
 402:Include/sys.h **** 
 403:Include/sys.h **** /* Function:RME_Pgt_Del *******************************************************
 404:Include/sys.h **** Description : Delete a page table.
 405:Include/sys.h **** Input       : cid_t Cap_Cpt - The capability to the captbl that may contain
 406:Include/sys.h ****                                   the cap to new captbl.
 407:Include/sys.h ****                                   2-Level.
 408:Include/sys.h ****               cid_t Cap_Pgt - The capability slot that you want this newly
 409:Include/sys.h ****                                   created page table capability to be in.
 410:Include/sys.h ****                                   1-Level.
 411:Include/sys.h **** Output      : None.
 412:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 413:Include/sys.h **** ******************************************************************************/
 414:Include/sys.h **** ret_t RME_Pgt_Del(cid_t Cap_Cpt,
 415:Include/sys.h ****                       cid_t Cap_Pgt)
 416:Include/sys.h **** {
 1077              		.loc 3 416 1
 1078              		.cfi_startproc
 1079              		@ args = 0, pretend = 0, frame = 8
 1080              		@ frame_needed = 1, uses_anonymous_args = 0
 1081 0000 00482DE9 		push	{fp, lr}
 1082              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 34


 1083              		.cfi_offset 11, -8
 1084              		.cfi_offset 14, -4
 1085 0004 04B08DE2 		add	fp, sp, #4
 1086              		.cfi_def_cfa 11, 4
 1087 0008 08D04DE2 		sub	sp, sp, #8
 1088 000c 08000BE5 		str	r0, [fp, #-8]
 1089 0010 0C100BE5 		str	r1, [fp, #-12]
 417:Include/sys.h ****     return RME_SVC(RME_SVC_PGT_DEL,
 1090              		.loc 3 417 12
 1091 0014 08301BE5 		ldr	r3, [fp, #-8]
 1092 0018 010683E3 		orr	r0, r3, #1048576
 1093 001c 0C101BE5 		ldr	r1, [fp, #-12]
 1094 0020 0030A0E3 		mov	r3, #0
 1095 0024 0020A0E3 		mov	r2, #0
 1096 0028 FEFFFFEB 		bl	RME_Svc
 1097 002c 0030A0E1 		mov	r3, r0
 418:Include/sys.h ****                    Cap_Cpt,
 419:Include/sys.h ****                    Cap_Pgt,
 420:Include/sys.h ****                    0U,
 421:Include/sys.h ****                    0U);
 422:Include/sys.h **** }
 1098              		.loc 3 422 1
 1099 0030 0300A0E1 		mov	r0, r3
 1100 0034 04D04BE2 		sub	sp, fp, #4
 1101              		.cfi_def_cfa 13, 8
 1102              		@ sp needed
 1103 0038 0088BDE8 		pop	{fp, pc}
 1104              		.cfi_endproc
 1105              	.LFE19:
 1107              		.section	.text.RME_Pgt_Add,"ax",%progbits
 1108              		.align	2
 1109              		.global	RME_Pgt_Add
 1110              		.syntax unified
 1111              		.arm
 1113              	RME_Pgt_Add:
 1114              	.LFB20:
 423:Include/sys.h **** /* End Function:RME_Pgt_Del **************************************************/
 424:Include/sys.h **** 
 425:Include/sys.h **** /* Function:RME_Pgt_Add *******************************************************
 426:Include/sys.h **** Description : Delegate a page from one page table to another. This is the only
 427:Include/sys.h ****               way to add pages to new page tables after the system boots.
 428:Include/sys.h **** Input       : cid_t Cap_Pgt_Dst - The capability to the destination page
 429:Include/sys.h ****                                       directory.
 430:Include/sys.h ****                                       2-Level.
 431:Include/sys.h ****               ptr_t Pos_Dst - The position to delegate to in the
 432:Include/sys.h ****                                   destination page directory.
 433:Include/sys.h ****               ptr_t Flag_Dst - The page access permission for the
 434:Include/sys.h ****                                    destination page.
 435:Include/sys.h ****               cid_t Cap_Pgt_Src - The capability to the source page
 436:Include/sys.h ****                                       directory.
 437:Include/sys.h ****                                       2-Level.
 438:Include/sys.h ****               ptr_t Pos_Dst - The position to delegate from in the source
 439:Include/sys.h ****                                   page directory.
 440:Include/sys.h ****               ptr_t Index - The index of the physical address frame to
 441:Include/sys.h ****                                 delegate. For example, if the destination
 442:Include/sys.h ****                                 directory's page size is 1/4 of that of the
 443:Include/sys.h ****                                 source directory, index=0 will delegate the
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 35


 444:Include/sys.h ****                                 first 1/4, index=1 will delegate the second
 445:Include/sys.h ****                                 1/4, index=2 will delegate the third 1/4, and
 446:Include/sys.h ****                                 index=3 will delegate the last 1/4.
 447:Include/sys.h ****                                 All other index values are illegal.
 448:Include/sys.h **** Output      : None.
 449:Include/sys.h **** Return      : ret_t - If successful, 0; or an error code.
 450:Include/sys.h **** ******************************************************************************/
 451:Include/sys.h **** ret_t RME_Pgt_Add(cid_t Cap_Pgt_Dst,
 452:Include/sys.h ****                       ptr_t Pos_Dst,
 453:Include/sys.h ****                       ptr_t Flag_Dst,
 454:Include/sys.h ****                       cid_t Cap_Pgt_Src,
 455:Include/sys.h ****                       ptr_t Pos_Src,
 456:Include/sys.h ****                       ptr_t Index)
 457:Include/sys.h **** {
 1115              		.loc 3 457 1
 1116              		.cfi_startproc
 1117              		@ args = 8, pretend = 0, frame = 16
 1118              		@ frame_needed = 1, uses_anonymous_args = 0
 1119 0000 00482DE9 		push	{fp, lr}
 1120              		.cfi_def_cfa_offset 8
 1121              		.cfi_offset 11, -8
 1122              		.cfi_offset 14, -4
 1123 0004 04B08DE2 		add	fp, sp, #4
 1124              		.cfi_def_cfa 11, 4
 1125 0008 10D04DE2 		sub	sp, sp, #16
 1126 000c 08000BE5 		str	r0, [fp, #-8]
 1127 0010 0C100BE5 		str	r1, [fp, #-12]
 1128 0014 10200BE5 		str	r2, [fp, #-16]
 1129 0018 14300BE5 		str	r3, [fp, #-20]
 458:Include/sys.h ****     return RME_SVC(RME_SVC_PGT_ADD,
 1130              		.loc 3 458 12
 1131 001c 10301BE5 		ldr	r3, [fp, #-16]
 1132 0020 7330FFE6 		uxth	r3, r3
 1133 0024 110883E3 		orr	r0, r3, #1114112
 1134 0028 08301BE5 		ldr	r3, [fp, #-8]
 1135 002c 0328A0E1 		lsl	r2, r3, #16
 1136 0030 0C301BE5 		ldr	r3, [fp, #-12]
 1137 0034 7330FFE6 		uxth	r3, r3
 1138 0038 031082E1 		orr	r1, r2, r3
 1139 003c 14301BE5 		ldr	r3, [fp, #-20]
 1140 0040 0328A0E1 		lsl	r2, r3, #16
 1141 0044 04309BE5 		ldr	r3, [fp, #4]
 1142 0048 7330FFE6 		uxth	r3, r3
 1143 004c 032082E1 		orr	r2, r2, r3
 1144 0050 08309BE5 		ldr	r3, [fp, #8]
 1145 0054 FEFFFFEB 		bl	RME_Svc
 1146 0058 0030A0E1 		mov	r3, r0
 459:Include/sys.h ****                    RME_PARAM_D0(Flag_Dst),
 460:Include/sys.h ****                    RME_PARAM_D1(Cap_Pgt_Dst)|RME_PARAM_D0(Pos_Dst),
 461:Include/sys.h ****                    RME_PARAM_D1(Cap_Pgt_Src)|RME_PARAM_D0(Pos_Src),
 462:Include/sys.h ****                    Index);
 463:Include/sys.h **** }
 1147              		.loc 3 463 1
 1148 005c 0300A0E1 		mov	r0, r3
 1149 0060 04D04BE2 		sub	sp, fp, #4
 1150              		.cfi_def_cfa 13, 8
 1151              		@ sp needed
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 36


 1152 0064 0088BDE8 		pop	{fp, pc}
 1153              		.cfi_endproc
 1154              	.LFE20:
 1156              		.global	Cur_addr
 1157              		.section	.bss.Cur_addr,"aw",%nobits
 1158              		.align	2
 1161              	Cur_addr:
 1162 0000 00000000 		.space	4
 1163              		.global	start
 1164              		.section	.bss.start,"aw",%nobits
 1165              		.align	2
 1168              	start:
 1169 0000 00000000 		.space	4
 1170              		.global	end
 1171              		.section	.bss.end,"aw",%nobits
 1172              		.align	2
 1175              	end:
 1176 0000 00000000 		.space	4
 1177              		.section	.text._RME_Tsc_Init,"ax",%progbits
 1178              		.align	2
 1179              		.global	_RME_Tsc_Init
 1180              		.syntax unified
 1181              		.arm
 1183              	_RME_Tsc_Init:
 1184              	.LFB21:
   1:Source/rme_benchmark.c **** /******************************************************************************
   2:Source/rme_benchmark.c **** Filename    : benchmark.c
   3:Source/rme_benchmark.c **** Author      : pry
   4:Source/rme_benchmark.c **** Date        : 04/09/2017
   5:Source/rme_benchmark.c **** Licence     : The Unlicense; see LICENSE for details.
   6:Source/rme_benchmark.c **** Description : The benchmark file for RME.
   7:Source/rme_benchmark.c **** ******************************************************************************/
   8:Source/rme_benchmark.c **** 
   9:Source/rme_benchmark.c **** /* Include *******************************************************************/
  10:Source/rme_benchmark.c **** #include"sys.h"
  11:Source/rme_benchmark.c **** ptr_t Cur_addr;
  12:Source/rme_benchmark.c **** ptr_t start;
  13:Source/rme_benchmark.c **** ptr_t end;
  14:Source/rme_benchmark.c **** /* Need to export error codes, and size of each object, in words! */
  15:Source/rme_benchmark.c **** /* End Include ***************************************************************/
  16:Source/rme_benchmark.c **** 
  17:Source/rme_benchmark.c **** /* Function:_RME_Tsc_Init *****************************************************
  18:Source/rme_benchmark.c **** Description : The initialization of timestamp counter. 19 secs before overflowing.
  19:Source/rme_benchmark.c **** Input       : None.
  20:Source/rme_benchmark.c **** Output      : None.
  21:Source/rme_benchmark.c **** Return      : None.
  22:Source/rme_benchmark.c **** ******************************************************************************/
  23:Source/rme_benchmark.c **** void _RME_Tsc_Init(void)
  24:Source/rme_benchmark.c **** {
 1185              		.loc 1 24 1
 1186              		.cfi_startproc
 1187              		@ args = 0, pretend = 0, frame = 0
 1188              		@ frame_needed = 1, uses_anonymous_args = 0
 1189              		@ link register save eliminated.
 1190 0000 04B02DE5 		str	fp, [sp, #-4]!
 1191              		.cfi_def_cfa_offset 4
 1192              		.cfi_offset 11, -4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 37


 1193 0004 00B08DE2 		add	fp, sp, #0
 1194              		.cfi_def_cfa_register 11
  25:Source/rme_benchmark.c ****  //   TIM_HandleTypeDef TIM2_Handle;
  26:Source/rme_benchmark.c **** //    
  27:Source/rme_benchmark.c **** //    /* Initialize timer 2 to run at the same speed as the CPU */
  28:Source/rme_benchmark.c **** //    TIM2_Handle.Instance=TIM2;
  29:Source/rme_benchmark.c **** //    TIM2_Handle.Init.Prescaler=0;
  30:Source/rme_benchmark.c **** //    TIM2_Handle.Init.CounterMode=TIM_COUNTERMODE_UP;
  31:Source/rme_benchmark.c **** //    TIM2_Handle.Init.Period=(ptr_t)(-1);
  32:Source/rme_benchmark.c **** //    TIM2_Handle.Init.ClockDivision=TIM_CLOCKDIVISION_DIV1;
  33:Source/rme_benchmark.c **** //    HAL_TIM_Base_Init(&TIM2_Handle);
  34:Source/rme_benchmark.c **** //    __HAL_RCC_TIM2_CLK_ENABLE();
  35:Source/rme_benchmark.c **** //    __HAL_TIM_ENABLE(&TIM2_Handle);
  36:Source/rme_benchmark.c **** }
 1195              		.loc 1 36 1
 1196 0008 00F020E3 		nop
 1197 000c 00D08BE2 		add	sp, fp, #0
 1198              		.cfi_def_cfa_register 13
 1199              		@ sp needed
 1200 0010 04B09DE4 		ldr	fp, [sp], #4
 1201              		.cfi_restore 11
 1202              		.cfi_def_cfa_offset 0
 1203 0014 1EFF2FE1 		bx	lr
 1204              		.cfi_endproc
 1205              	.LFE21:
 1207              		.section	.text.RME_Same_Prc_Thd_Switch_Test_Thd,"ax",%progbits
 1208              		.align	2
 1209              		.global	RME_Same_Prc_Thd_Switch_Test_Thd
 1210              		.syntax unified
 1211              		.arm
 1213              	RME_Same_Prc_Thd_Switch_Test_Thd:
 1214              	.LFB22:
  37:Source/rme_benchmark.c **** /* End Function:_RME_Tsc_Init ************************************************/
  38:Source/rme_benchmark.c **** 
  39:Source/rme_benchmark.c **** /* Function:RME_Same_Prc_Thd_Switch_Test_Thd *********************************
  40:Source/rme_benchmark.c **** Description : The thread for testing same-process thread switching performance.
  41:Source/rme_benchmark.c **** Input       : None.
  42:Source/rme_benchmark.c **** Output      : None.
  43:Source/rme_benchmark.c **** Return      : None.
  44:Source/rme_benchmark.c **** ******************************************************************************/
  45:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Switch_Test_Thd(ptr_t Param1)
  46:Source/rme_benchmark.c **** {
 1215              		.loc 1 46 1
 1216              		.cfi_startproc
 1217              		@ args = 0, pretend = 0, frame = 16
 1218              		@ frame_needed = 1, uses_anonymous_args = 0
 1219 0000 00482DE9 		push	{fp, lr}
 1220              		.cfi_def_cfa_offset 8
 1221              		.cfi_offset 11, -8
 1222              		.cfi_offset 14, -4
 1223 0004 04B08DE2 		add	fp, sp, #4
 1224              		.cfi_def_cfa 11, 4
 1225 0008 10D04DE2 		sub	sp, sp, #16
 1226 000c 10000BE5 		str	r0, [fp, #-16]
 1227              	.L67:
  47:Source/rme_benchmark.c ****     ret_t Retval;
  48:Source/rme_benchmark.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 38


  49:Source/rme_benchmark.c ****     /*USR_DBG_S("\r\n hello! this is thread ");
  50:Source/rme_benchmark.c ****     USR_DBG_I(Param1);*/
  51:Source/rme_benchmark.c ****     /* Now we switch back to the init thread, immediately */
  52:Source/rme_benchmark.c ****     while(1)
  53:Source/rme_benchmark.c ****     {
  54:Source/rme_benchmark.c ****         /*Retval=RME_CAP_OP(RME_SVC_THD_SWT,0,
  55:Source/rme_benchmark.c ****                           RME_BOOT_INIT_THD,
  56:Source/rme_benchmark.c ****                           0,
  57:Source/rme_benchmark.c ****                           0);*/
  58:Source/rme_benchmark.c ****         Retval=RME_Thd_Swt(RME_BOOT_INIT_THD,0);
 1228              		.loc 1 58 16 discriminator 1
 1229 0010 0010A0E3 		mov	r1, #0
 1230 0014 0300A0E3 		mov	r0, #3
 1231 0018 FEFFFFEB 		bl	RME_Thd_Swt
 1232 001c 08000BE5 		str	r0, [fp, #-8]
 1233              		.loc 1 58 15
 1234 0020 FAFFFFEA 		b	.L67
 1235              		.cfi_endproc
 1236              	.LFE22:
 1238              		.section	.text.RME_Thd_Create,"ax",%progbits
 1239              		.align	2
 1240              		.global	RME_Thd_Create
 1241              		.syntax unified
 1242              		.arm
 1244              	RME_Thd_Create:
 1245              	.LFB23:
  59:Source/rme_benchmark.c ****     }
  60:Source/rme_benchmark.c **** }
  61:Source/rme_benchmark.c **** /* End Function:RME_Same_Prc_Thd_Switch_Test_Thd ****************************/
  62:Source/rme_benchmark.c **** 
  63:Source/rme_benchmark.c **** 
  64:Source/rme_benchmark.c **** void RME_Thd_Create(cid_t Cap_Prc,cid_t Cap_Thd,ptr_t Tid,ptr_t Prio,ptr_t Entry,ptr_t Raddr,cid_t 
  65:Source/rme_benchmark.c **** {
 1246              		.loc 1 65 1
 1247              		.cfi_startproc
 1248              		@ args = 20, pretend = 0, frame = 24
 1249              		@ frame_needed = 1, uses_anonymous_args = 0
 1250 0000 00482DE9 		push	{fp, lr}
 1251              		.cfi_def_cfa_offset 8
 1252              		.cfi_offset 11, -8
 1253              		.cfi_offset 14, -4
 1254 0004 04B08DE2 		add	fp, sp, #4
 1255              		.cfi_def_cfa 11, 4
 1256 0008 28D04DE2 		sub	sp, sp, #40
 1257 000c 10000BE5 		str	r0, [fp, #-16]
 1258 0010 14100BE5 		str	r1, [fp, #-20]
 1259 0014 18200BE5 		str	r2, [fp, #-24]
 1260 0018 1C300BE5 		str	r3, [fp, #-28]
  66:Source/rme_benchmark.c **** 	ret_t Retval;
  67:Source/rme_benchmark.c **** 	cnt_t Count;
  68:Source/rme_benchmark.c **** 	ptr_t Stack_Addr;
  69:Source/rme_benchmark.c **** 	ptr_t Temp;
  70:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\n-----create a thread , TID= ");
  71:Source/rme_benchmark.c **** 	USR_DBG_H(Tid);*/
  72:Source/rme_benchmark.c **** 	/* Initialize the thread's stack before entering it */
  73:Source/rme_benchmark.c **** 	Stack_Addr=(ptr_t)Stack;
 1261              		.loc 1 73 12
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 39


 1262 001c 14309BE5 		ldr	r3, [fp, #20]
 1263 0020 08300BE5 		str	r3, [fp, #-8]
  74:Source/rme_benchmark.c **** 
  75:Source/rme_benchmark.c **** 	/* create a thread */
  76:Source/rme_benchmark.c **** 	Retval=RME_Thd_Crt(RME_BOOT_INIT_CPT,RME_BOOT_INIT_KOM,Cap_Thd,
 1264              		.loc 1 76 9
 1265 0024 0030A0E3 		mov	r3, #0
 1266 0028 08308DE5 		str	r3, [sp, #8]
 1267 002c 08309BE5 		ldr	r3, [fp, #8]
 1268 0030 04308DE5 		str	r3, [sp, #4]
 1269 0034 1F30A0E3 		mov	r3, #31
 1270 0038 00308DE5 		str	r3, [sp]
 1271 003c 10301BE5 		ldr	r3, [fp, #-16]
 1272 0040 14201BE5 		ldr	r2, [fp, #-20]
 1273 0044 0510A0E3 		mov	r1, #5
 1274 0048 0000A0E3 		mov	r0, #0
 1275 004c FEFFFFEB 		bl	RME_Thd_Crt
 1276 0050 0C000BE5 		str	r0, [fp, #-12]
  77:Source/rme_benchmark.c **** 					   Cap_Prc,RME_THD_PRIO_MAX,Raddr,0);
  78:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\ncreate a thread      retval= ");
  79:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);*/
  80:Source/rme_benchmark.c **** 
  81:Source/rme_benchmark.c **** 	/* Bind the thread to the processor */
  82:Source/rme_benchmark.c **** 	Retval=RME_Thd_Sched_Bind(Cap_Thd,RME_BOOT_INIT_THD,Cap_Sig,
 1277              		.loc 1 82 9
 1278 0054 18201BE5 		ldr	r2, [fp, #-24]
 1279 0058 0030A0E3 		mov	r3, #0
 1280 005c 04308DE5 		str	r3, [sp, #4]
 1281 0060 1C301BE5 		ldr	r3, [fp, #-28]
 1282 0064 00308DE5 		str	r3, [sp]
 1283 0068 0230A0E1 		mov	r3, r2
 1284 006c 0C209BE5 		ldr	r2, [fp, #12]
 1285 0070 0310A0E3 		mov	r1, #3
 1286 0074 14001BE5 		ldr	r0, [fp, #-20]
 1287 0078 FEFFFFEB 		bl	RME_Thd_Sched_Bind
 1288 007c 0C000BE5 		str	r0, [fp, #-12]
  83:Source/rme_benchmark.c **** 							  Tid,Prio,RME_BOOT_HYPER_KOM_VADDR);
  84:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\nBind the thread to the processor retval= ");
  85:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);*/
  86:Source/rme_benchmark.c **** 	/* Set the execution information */
  87:Source/rme_benchmark.c **** 
  88:Source/rme_benchmark.c **** 	Retval=RME_Thd_Exec_Set(Cap_Thd,Entry,Stack_Addr,Tid);
 1289              		.loc 1 88 9
 1290 0080 18301BE5 		ldr	r3, [fp, #-24]
 1291 0084 08201BE5 		ldr	r2, [fp, #-8]
 1292 0088 04109BE5 		ldr	r1, [fp, #4]
 1293 008c 14001BE5 		ldr	r0, [fp, #-20]
 1294 0090 FEFFFFEB 		bl	RME_Thd_Exec_Set
 1295 0094 0C000BE5 		str	r0, [fp, #-12]
  89:Source/rme_benchmark.c **** 	//RME_Stack[2000]=1234;
  90:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\nSet the execution information retval= ");
  91:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);
  92:Source/rme_benchmark.c **** 	USR_DBG_S("\r\n");*/
  93:Source/rme_benchmark.c **** 	/* Delegate some timeslice to it */
  94:Source/rme_benchmark.c **** 	Retval=RME_Thd_Time_Xfer(Cap_Thd,RME_BOOT_INIT_THD,Time);
 1296              		.loc 1 94 9
 1297 0098 10209BE5 		ldr	r2, [fp, #16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 40


 1298 009c 0310A0E3 		mov	r1, #3
 1299 00a0 14001BE5 		ldr	r0, [fp, #-20]
 1300 00a4 FEFFFFEB 		bl	RME_Thd_Time_Xfer
 1301 00a8 0C000BE5 		str	r0, [fp, #-12]
  95:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\nDelegate some timeslice to it retval= ");
  96:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);*/
  97:Source/rme_benchmark.c **** }
 1302              		.loc 1 97 1
 1303 00ac 00F020E3 		nop
 1304 00b0 04D04BE2 		sub	sp, fp, #4
 1305              		.cfi_def_cfa 13, 8
 1306              		@ sp needed
 1307 00b4 0088BDE8 		pop	{fp, pc}
 1308              		.cfi_endproc
 1309              	.LFE23:
 1311              		.section	.rodata
 1312              		.align	2
 1313              	.LC0:
 1314 0000 0D0A456E 		.ascii	"\015\012Entering send thread!\000"
 1314      74657269 
 1314      6E672073 
 1314      656E6420 
 1314      74687265 
 1315              		.align	2
 1316              	.LC1:
 1317 0018 0D0A5365 		.ascii	"\015\012Send!\000"
 1317      6E642100 
 1318              		.section	.text.RME_Same_Prc_Thd_Sig_Test_Thd_send,"ax",%progbits
 1319              		.align	2
 1320              		.global	RME_Same_Prc_Thd_Sig_Test_Thd_send
 1321              		.syntax unified
 1322              		.arm
 1324              	RME_Same_Prc_Thd_Sig_Test_Thd_send:
 1325              	.LFB24:
  98:Source/rme_benchmark.c **** 
  99:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Sig_Test_Thd_send(void) //low prio 4
 100:Source/rme_benchmark.c **** {
 1326              		.loc 1 100 1
 1327              		.cfi_startproc
 1328              		@ args = 0, pretend = 0, frame = 0
 1329              		@ frame_needed = 1, uses_anonymous_args = 0
 1330 0000 00482DE9 		push	{fp, lr}
 1331              		.cfi_def_cfa_offset 8
 1332              		.cfi_offset 11, -8
 1333              		.cfi_offset 14, -4
 1334 0004 04B08DE2 		add	fp, sp, #4
 1335              		.cfi_def_cfa 11, 4
 101:Source/rme_benchmark.c **** 	USR_DBG_S("\r\nEntering send thread!");
 1336              		.loc 1 101 2
 1337 0008 000000E3 		movw	r0, #:lower16:.LC0
 1338 000c 000040E3 		movt	r0, #:upper16:.LC0
 1339 0010 FEFFFFEB 		bl	USR_DBG_S
 1340              	.L70:
 102:Source/rme_benchmark.c **** 
 103:Source/rme_benchmark.c **** 
 104:Source/rme_benchmark.c **** 	while(1)
 105:Source/rme_benchmark.c **** 	{
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 41


 106:Source/rme_benchmark.c **** 		USR_DBG_S("\r\nSend!");
 1341              		.loc 1 106 3
 1342 0014 000000E3 		movw	r0, #:lower16:.LC1
 1343 0018 000040E3 		movt	r0, #:upper16:.LC1
 1344 001c FEFFFFEB 		bl	USR_DBG_S
 107:Source/rme_benchmark.c **** 		RME_Sig_Snd(RME_BOOT_SIG_BENCH);
 1345              		.loc 1 107 3 discriminator 1
 1346 0020 0D00A0E3 		mov	r0, #13
 1347 0024 FEFFFFEB 		bl	RME_Sig_Snd
 106:Source/rme_benchmark.c **** 		RME_Sig_Snd(RME_BOOT_SIG_BENCH);
 1348              		.loc 1 106 3
 1349 0028 F9FFFFEA 		b	.L70
 1350              		.cfi_endproc
 1351              	.LFE24:
 1353              		.section	.rodata
 1354              		.align	2
 1355              	.LC2:
 1356 0020 0D0A456E 		.ascii	"\015\012Entering receive thread!\000"
 1356      74657269 
 1356      6E672072 
 1356      65636569 
 1356      76652074 
 1357 003b 00       		.align	2
 1358              	.LC3:
 1359 003c 0D0A5265 		.ascii	"\015\012Received wrong number!\000"
 1359      63656976 
 1359      65642077 
 1359      726F6E67 
 1359      206E756D 
 1360 0055 000000   		.align	2
 1361              	.LC4:
 1362 0058 0D0A5265 		.ascii	"\015\012Received!\000"
 1362      63656976 
 1362      65642100 
 1363              		.section	.text.RME_Same_Prc_Thd_Sig_Test_Thd_recv,"ax",%progbits
 1364              		.align	2
 1365              		.global	RME_Same_Prc_Thd_Sig_Test_Thd_recv
 1366              		.syntax unified
 1367              		.arm
 1369              	RME_Same_Prc_Thd_Sig_Test_Thd_recv:
 1370              	.LFB25:
 108:Source/rme_benchmark.c **** 	}
 109:Source/rme_benchmark.c **** 
 110:Source/rme_benchmark.c **** }
 111:Source/rme_benchmark.c **** 
 112:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Sig_Test_Thd_recv(void) // high prio 5
 113:Source/rme_benchmark.c **** {
 1371              		.loc 1 113 1
 1372              		.cfi_startproc
 1373              		@ args = 0, pretend = 0, frame = 0
 1374              		@ frame_needed = 1, uses_anonymous_args = 0
 1375 0000 00482DE9 		push	{fp, lr}
 1376              		.cfi_def_cfa_offset 8
 1377              		.cfi_offset 11, -8
 1378              		.cfi_offset 14, -4
 1379 0004 04B08DE2 		add	fp, sp, #4
 1380              		.cfi_def_cfa 11, 4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 42


 114:Source/rme_benchmark.c **** 	USR_DBG_S("\r\nEntering receive thread!");
 1381              		.loc 1 114 2
 1382 0008 000000E3 		movw	r0, #:lower16:.LC2
 1383 000c 000040E3 		movt	r0, #:upper16:.LC2
 1384 0010 FEFFFFEB 		bl	USR_DBG_S
 1385              	.L74:
 115:Source/rme_benchmark.c **** 
 116:Source/rme_benchmark.c **** 	while(1)
 117:Source/rme_benchmark.c **** 	{
 118:Source/rme_benchmark.c **** 		if(RME_Sig_Rcv(RME_BOOT_SIG_BENCH,RME_RCV_BS)!=1)
 1386              		.loc 1 118 6
 1387 0014 0010A0E3 		mov	r1, #0
 1388 0018 0D00A0E3 		mov	r0, #13
 1389 001c FEFFFFEB 		bl	RME_Sig_Rcv
 1390 0020 0030A0E1 		mov	r3, r0
 1391              		.loc 1 118 5 discriminator 1
 1392 0024 010053E3 		cmp	r3, #1
 1393 0028 0300000A 		beq	.L72
 119:Source/rme_benchmark.c **** 		{
 120:Source/rme_benchmark.c **** 			USR_DBG_S("\r\nReceived wrong number!");
 1394              		.loc 1 120 4
 1395 002c 000000E3 		movw	r0, #:lower16:.LC3
 1396 0030 000040E3 		movt	r0, #:upper16:.LC3
 1397 0034 FEFFFFEB 		bl	USR_DBG_S
 1398              	.L73:
 121:Source/rme_benchmark.c **** 			while(1);
 1399              		.loc 1 121 9
 1400 0038 FEFFFFEA 		b	.L73
 1401              	.L72:
 122:Source/rme_benchmark.c **** 		}
 123:Source/rme_benchmark.c **** 		USR_DBG_S("\r\nReceived!");
 1402              		.loc 1 123 3
 1403 003c 000000E3 		movw	r0, #:lower16:.LC4
 1404 0040 000040E3 		movt	r0, #:upper16:.LC4
 1405 0044 FEFFFFEB 		bl	USR_DBG_S
 118:Source/rme_benchmark.c **** 		{
 1406              		.loc 1 118 5
 1407 0048 F1FFFFEA 		b	.L74
 1408              		.cfi_endproc
 1409              	.LFE25:
 1411              		.section	.rodata
 1412              		.align	2
 1413              	.LC5:
 1414 0064 0D0A00   		.ascii	"\015\012\000"
 1415 0067 00       		.align	2
 1416              	.LC6:
 1417 0068 0D0A2F2A 		.ascii	"\015\012/****************\000"
 1417      2A2A2A2A 
 1417      2A2A2A2A 
 1417      2A2A2A2A 
 1417      2A2A2A00 
 1418              		.align	2
 1419              	.LC7:
 1420 007c 62656769 		.ascii	"begin RME_Same_Prc_Thd_Sig_Test_Thd_main\000"
 1420      6E20524D 
 1420      455F5361 
 1420      6D655F50 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 43


 1420      72635F54 
 1421 00a5 000000   		.align	2
 1422              	.LC8:
 1423 00a8 2A2A2A2A 		.ascii	"****************/\000"
 1423      2A2A2A2A 
 1423      2A2A2A2A 
 1423      2A2A2A2A 
 1423      2F00
 1424 00ba 0000     		.align	2
 1425              	.LC9:
 1426 00bc 0D0A4865 		.ascii	"\015\012Hello this is thread main\000"
 1426      6C6C6F20 
 1426      74686973 
 1426      20697320 
 1426      74687265 
 1427              		.section	.text.RME_Same_Prc_Thd_Sig_Test_Thd_main,"ax",%progbits
 1428              		.align	2
 1429              		.global	RME_Same_Prc_Thd_Sig_Test_Thd_main
 1430              		.syntax unified
 1431              		.arm
 1433              	RME_Same_Prc_Thd_Sig_Test_Thd_main:
 1434              	.LFB26:
 124:Source/rme_benchmark.c **** 	}
 125:Source/rme_benchmark.c **** }
 126:Source/rme_benchmark.c **** 
 127:Source/rme_benchmark.c **** 
 128:Source/rme_benchmark.c **** 
 129:Source/rme_benchmark.c **** 
 130:Source/rme_benchmark.c **** /* Function:RME_Same_Prc_Thd_Switch_Test_Thd *********************************
 131:Source/rme_benchmark.c **** Description : The thread for testing same-process thread signal send and receive performance.
 132:Source/rme_benchmark.c **** Input       : None.
 133:Source/rme_benchmark.c **** Output      : None.
 134:Source/rme_benchmark.c **** Return      : None.
 135:Source/rme_benchmark.c **** ******************************************************************************/
 136:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Sig_Test_Thd_main(ptr_t TID)
 137:Source/rme_benchmark.c **** {
 1435              		.loc 1 137 1
 1436              		.cfi_startproc
 1437              		@ args = 0, pretend = 0, frame = 8
 1438              		@ frame_needed = 1, uses_anonymous_args = 0
 1439 0000 00482DE9 		push	{fp, lr}
 1440              		.cfi_def_cfa_offset 8
 1441              		.cfi_offset 11, -8
 1442              		.cfi_offset 14, -4
 1443 0004 04B08DE2 		add	fp, sp, #4
 1444              		.cfi_def_cfa 11, 4
 1445 0008 08D04DE2 		sub	sp, sp, #8
 1446 000c 08000BE5 		str	r0, [fp, #-8]
 138:Source/rme_benchmark.c **** 	USR_DBG_S("\r\n");
 1447              		.loc 1 138 2
 1448 0010 000000E3 		movw	r0, #:lower16:.LC5
 1449 0014 000040E3 		movt	r0, #:upper16:.LC5
 1450 0018 FEFFFFEB 		bl	USR_DBG_S
 139:Source/rme_benchmark.c **** 	USR_DBG_S("\r\n/****************");
 1451              		.loc 1 139 2
 1452 001c 000000E3 		movw	r0, #:lower16:.LC6
 1453 0020 000040E3 		movt	r0, #:upper16:.LC6
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 44


 1454 0024 FEFFFFEB 		bl	USR_DBG_S
 140:Source/rme_benchmark.c **** 	USR_DBG_S("begin RME_Same_Prc_Thd_Sig_Test_Thd_main");
 1455              		.loc 1 140 2
 1456 0028 000000E3 		movw	r0, #:lower16:.LC7
 1457 002c 000040E3 		movt	r0, #:upper16:.LC7
 1458 0030 FEFFFFEB 		bl	USR_DBG_S
 141:Source/rme_benchmark.c **** 	USR_DBG_S("****************/");
 1459              		.loc 1 141 2
 1460 0034 000000E3 		movw	r0, #:lower16:.LC8
 1461 0038 000040E3 		movt	r0, #:upper16:.LC8
 1462 003c FEFFFFEB 		bl	USR_DBG_S
 142:Source/rme_benchmark.c **** 	USR_DBG_S("\r\nHello this is thread main");
 1463              		.loc 1 142 2
 1464 0040 000000E3 		movw	r0, #:lower16:.LC9
 1465 0044 000040E3 		movt	r0, #:upper16:.LC9
 1466 0048 FEFFFFEB 		bl	USR_DBG_S
 143:Source/rme_benchmark.c **** 	ret_t Retval;
 144:Source/rme_benchmark.c **** 
 145:Source/rme_benchmark.c **** 
 146:Source/rme_benchmark.c **** 	/* send the begin signal */
 147:Source/rme_benchmark.c **** 	RME_Sig_Snd(RME_BOOT_SIG_BENCH);
 1467              		.loc 1 147 2
 1468 004c 0D00A0E3 		mov	r0, #13
 1469 0050 FEFFFFEB 		bl	RME_Sig_Snd
 148:Source/rme_benchmark.c **** 	RME_Thd_Swt(RME_BOOT_BENCH_SEN_THD,0);
 1470              		.loc 1 148 2
 1471 0054 0010A0E3 		mov	r1, #0
 1472 0058 0E00A0E3 		mov	r0, #14
 1473 005c FEFFFFEB 		bl	RME_Thd_Swt
 1474              	.L76:
 149:Source/rme_benchmark.c **** 
 150:Source/rme_benchmark.c **** 	while(1);
 1475              		.loc 1 150 7
 1476 0060 FEFFFFEA 		b	.L76
 1477              		.cfi_endproc
 1478              	.LFE26:
 1480              		.section	.rodata
 1481              		.align	2
 1482              	.LC10:
 1483 00d8 0D0A6372 		.ascii	"\015\012create a signal end point      retval= \000"
 1483      65617465 
 1483      20612073 
 1483      69676E61 
 1483      6C20656E 
 1484              		.section	.text.RME_Same_Prc_Thd_Sig_Testinit,"ax",%progbits
 1485              		.align	2
 1486              		.global	RME_Same_Prc_Thd_Sig_Testinit
 1487              		.syntax unified
 1488              		.arm
 1490              	RME_Same_Prc_Thd_Sig_Testinit:
 1491              	.LFB27:
 151:Source/rme_benchmark.c **** }
 152:Source/rme_benchmark.c **** /* Function:RME_Same_Prc_Thd_Switch_Testinit *************************************
 153:Source/rme_benchmark.c **** Description : The same-process thread signal send and receive test code.
 154:Source/rme_benchmark.c **** Input       : None.
 155:Source/rme_benchmark.c **** Output      : None.
 156:Source/rme_benchmark.c **** Return      : None.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 45


 157:Source/rme_benchmark.c **** ******************************************************************************/
 158:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Sig_Testinit(void)
 159:Source/rme_benchmark.c **** {
 1492              		.loc 1 159 1
 1493              		.cfi_startproc
 1494              		@ args = 0, pretend = 0, frame = 8
 1495              		@ frame_needed = 1, uses_anonymous_args = 0
 1496 0000 00482DE9 		push	{fp, lr}
 1497              		.cfi_def_cfa_offset 8
 1498              		.cfi_offset 11, -8
 1499              		.cfi_offset 14, -4
 1500 0004 04B08DE2 		add	fp, sp, #4
 1501              		.cfi_def_cfa 11, 4
 1502 0008 20D04DE2 		sub	sp, sp, #32
 160:Source/rme_benchmark.c **** 	ret_t Retval;
 161:Source/rme_benchmark.c **** 
 162:Source/rme_benchmark.c **** 	/* create a signal end point */
 163:Source/rme_benchmark.c **** 	Retval=RME_Sig_Crt(RME_BOOT_INIT_CPT,RME_BOOT_SIG_BENCH);
 1503              		.loc 1 163 9
 1504 000c 0D10A0E3 		mov	r1, #13
 1505 0010 0000A0E3 		mov	r0, #0
 1506 0014 FEFFFFEB 		bl	RME_Sig_Crt
 1507 0018 08000BE5 		str	r0, [fp, #-8]
 164:Source/rme_benchmark.c **** 	USR_DBG_S("\r\ncreate a signal end point      retval= ");
 1508              		.loc 1 164 2
 1509 001c 000000E3 		movw	r0, #:lower16:.LC10
 1510 0020 000040E3 		movt	r0, #:upper16:.LC10
 1511 0024 FEFFFFEB 		bl	USR_DBG_S
 165:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);
 1512              		.loc 1 165 2
 1513 0028 08001BE5 		ldr	r0, [fp, #-8]
 1514 002c FEFFFFEB 		bl	USR_DBG_I
 166:Source/rme_benchmark.c **** 	/* create signal test thread */
 167:Source/rme_benchmark.c **** 	//void RME_Thd_Create(cid_t Cap_Thd,ptr_t Tid,ptr_t Prc,ptr_t Entry,ptr_t Raddr,cid_t Cap_Sig,ptr_
 168:Source/rme_benchmark.c **** 	RME_Thd_Create(RME_BOOT_INIT_PRC,RME_BOOT_BENCH_RCV_THD,RME_TID_4,5,(ptr_t)RME_Same_Prc_Thd_Sig_Te
 1515              		.loc 1 168 2
 1516 0030 003000E3 		movw	r3, #:lower16:RME_Same_Prc_Thd_Sig_Test_Thd_recv
 1517 0034 003040E3 		movt	r3, #:upper16:RME_Same_Prc_Thd_Sig_Test_Thd_recv
 1518 0038 002000E3 		movw	r2, #:lower16:Cur_addr
 1519 003c 002040E3 		movt	r2, #:upper16:Cur_addr
 1520 0040 002092E5 		ldr	r2, [r2]
 1521 0044 B8109FE5 		ldr	r1, .L78
 1522 0048 10108DE5 		str	r1, [sp, #16]
 1523 004c 0611E0E3 		mvn	r1, #-2147483647
 1524 0050 0C108DE5 		str	r1, [sp, #12]
 1525 0054 0D10A0E3 		mov	r1, #13
 1526 0058 08108DE5 		str	r1, [sp, #8]
 1527 005c 04208DE5 		str	r2, [sp, #4]
 1528 0060 00308DE5 		str	r3, [sp]
 1529 0064 0530A0E3 		mov	r3, #5
 1530 0068 0420A0E3 		mov	r2, #4
 1531 006c 0F10A0E3 		mov	r1, #15
 1532 0070 0200A0E3 		mov	r0, #2
 1533 0074 FEFFFFEB 		bl	RME_Thd_Create
 169:Source/rme_benchmark.c ****                    Cur_addr,RME_BOOT_SIG_BENCH,RME_THD_INF_TIME,(ptr_t)&RME_Stack3[2000]);
 170:Source/rme_benchmark.c **** 	Cur_addr+=512;
 1534              		.loc 1 170 10
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 46


 1535 0078 003000E3 		movw	r3, #:lower16:Cur_addr
 1536 007c 003040E3 		movt	r3, #:upper16:Cur_addr
 1537 0080 003093E5 		ldr	r3, [r3]
 1538 0084 022C83E2 		add	r2, r3, #512
 1539 0088 003000E3 		movw	r3, #:lower16:Cur_addr
 1540 008c 003040E3 		movt	r3, #:upper16:Cur_addr
 1541 0090 002083E5 		str	r2, [r3]
 171:Source/rme_benchmark.c **** 	RME_Thd_Create(RME_BOOT_INIT_PRC,RME_BOOT_BENCH_SEN_THD,RME_TID_3,4,(ptr_t)RME_Same_Prc_Thd_Sig_Te
 1542              		.loc 1 171 2
 1543 0094 003000E3 		movw	r3, #:lower16:RME_Same_Prc_Thd_Sig_Test_Thd_send
 1544 0098 003040E3 		movt	r3, #:upper16:RME_Same_Prc_Thd_Sig_Test_Thd_send
 1545 009c 002000E3 		movw	r2, #:lower16:Cur_addr
 1546 00a0 002040E3 		movt	r2, #:upper16:Cur_addr
 1547 00a4 002092E5 		ldr	r2, [r2]
 1548 00a8 58109FE5 		ldr	r1, .L78+4
 1549 00ac 10108DE5 		str	r1, [sp, #16]
 1550 00b0 0611E0E3 		mvn	r1, #-2147483647
 1551 00b4 0C108DE5 		str	r1, [sp, #12]
 1552 00b8 0D10A0E3 		mov	r1, #13
 1553 00bc 08108DE5 		str	r1, [sp, #8]
 1554 00c0 04208DE5 		str	r2, [sp, #4]
 1555 00c4 00308DE5 		str	r3, [sp]
 1556 00c8 0430A0E3 		mov	r3, #4
 1557 00cc 0320A0E3 		mov	r2, #3
 1558 00d0 0E10A0E3 		mov	r1, #14
 1559 00d4 0200A0E3 		mov	r0, #2
 1560 00d8 FEFFFFEB 		bl	RME_Thd_Create
 172:Source/rme_benchmark.c **** 				   Cur_addr,RME_BOOT_SIG_BENCH,RME_THD_INF_TIME,(ptr_t)&RME_Stack2[2000]);
 173:Source/rme_benchmark.c **** 	Cur_addr+=512;
 1561              		.loc 1 173 10
 1562 00dc 003000E3 		movw	r3, #:lower16:Cur_addr
 1563 00e0 003040E3 		movt	r3, #:upper16:Cur_addr
 1564 00e4 003093E5 		ldr	r3, [r3]
 1565 00e8 022C83E2 		add	r2, r3, #512
 1566 00ec 003000E3 		movw	r3, #:lower16:Cur_addr
 1567 00f0 003040E3 		movt	r3, #:upper16:Cur_addr
 1568 00f4 002083E5 		str	r2, [r3]
 174:Source/rme_benchmark.c **** }
 1569              		.loc 1 174 1
 1570 00f8 00F020E3 		nop
 1571 00fc 04D04BE2 		sub	sp, fp, #4
 1572              		.cfi_def_cfa 13, 8
 1573              		@ sp needed
 1574 0100 0088BDE8 		pop	{fp, pc}
 1575              	.L79:
 1576              		.align	2
 1577              	.L78:
 1578 0104 401F0000 		.word	RME_Stack3+8000
 1579 0108 401F0000 		.word	RME_Stack2+8000
 1580              		.cfi_endproc
 1581              	.LFE27:
 1583              		.section	.rodata
 1584 0102 0000     		.align	2
 1585              	.LC11:
 1586 0104 0D0A2073 		.ascii	"\015\012 swt 10000 times time= \000"
 1586      77742031 
 1586      30303030 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 47


 1586      2074696D 
 1586      65732074 
 1587 011e 0000     		.align	2
 1588              	.LC12:
 1589 0120 0D0A2073 		.ascii	"\015\012 swt 1 times time= \000"
 1589      77742031 
 1589      2074696D 
 1589      65732074 
 1589      696D653D 
 1590 0136 0000     		.align	2
 1591              	.LC13:
 1592 0138 0D0A7465 		.ascii	"\015\012test done \000"
 1592      73742064 
 1592      6F6E6520 
 1592      00
 1593              		.section	.text.RME_Same_Prc_Thd_Switch_Test,"ax",%progbits
 1594              		.align	2
 1595              		.global	RME_Same_Prc_Thd_Switch_Test
 1596              		.syntax unified
 1597              		.arm
 1599              	RME_Same_Prc_Thd_Switch_Test:
 1600              	.LFB28:
 175:Source/rme_benchmark.c **** 
 176:Source/rme_benchmark.c **** /* Function:RME_Same_Prc_Thd_Switch_Test *************************************
 177:Source/rme_benchmark.c **** Description : The same-process thread switch test code.
 178:Source/rme_benchmark.c **** Input       : None.
 179:Source/rme_benchmark.c **** Output      : None.
 180:Source/rme_benchmark.c **** Return      : None.
 181:Source/rme_benchmark.c **** ******************************************************************************/
 182:Source/rme_benchmark.c **** void RME_Same_Prc_Thd_Switch_Test(void)
 183:Source/rme_benchmark.c **** {
 1601              		.loc 1 183 1
 1602              		.cfi_startproc
 1603              		@ args = 0, pretend = 0, frame = 16
 1604              		@ frame_needed = 1, uses_anonymous_args = 0
 1605 0000 00482DE9 		push	{fp, lr}
 1606              		.cfi_def_cfa_offset 8
 1607              		.cfi_offset 11, -8
 1608              		.cfi_offset 14, -4
 1609 0004 04B08DE2 		add	fp, sp, #4
 1610              		.cfi_def_cfa 11, 4
 1611 0008 20D04DE2 		sub	sp, sp, #32
 184:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\n/****************");
 185:Source/rme_benchmark.c **** 	USR_DBG_S("begin RME_Same_Prc_Thd_Switch_Test");
 186:Source/rme_benchmark.c ****     /* Intra-process thread switching time */
 187:Source/rme_benchmark.c ****     ret_t Retval;
 188:Source/rme_benchmark.c ****     cnt_t Count;
 189:Source/rme_benchmark.c ****     ptr_t Stack_Addr;
 190:Source/rme_benchmark.c ****     ptr_t Temp;
 191:Source/rme_benchmark.c ****     /* Initialize the thread's stack before entering it */
 192:Source/rme_benchmark.c ****     Stack_Addr=(ptr_t)&RME_Stack1[2000];/* _RME_Stack_Init((ptr_t)(&RME_Stack[2047]),
 1612              		.loc 1 192 15
 1613 000c 7C319FE5 		ldr	r3, .L84
 1614 0010 0C300BE5 		str	r3, [fp, #-12]
 193:Source/rme_benchmark.c ****                                (ptr_t)RME_Thd_Stub,
 194:Source/rme_benchmark.c ****                                1, 2, 3, 4); */
 195:Source/rme_benchmark.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 48


 196:Source/rme_benchmark.c ****     /*USR_DBG_S("\r\n(ptr_t)(&RME_Stack[2047])= ");
 197:Source/rme_benchmark.c ****     USR_DBG_H((ptr_t)(&RME_Stack1[2047]));
 198:Source/rme_benchmark.c ****     USR_DBG_S("\r\nInitialize the thread's stack Stack_Addr= ");
 199:Source/rme_benchmark.c ****     USR_DBG_H(Stack_Addr);*/
 200:Source/rme_benchmark.c **** 
 201:Source/rme_benchmark.c ****     /* There are still many bugs in the kernel. Need a white-box test to guarantee
 202:Source/rme_benchmark.c ****      * that it is free of bugs. Find a scheme to do that */
 203:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_CRT,RME_BOOT_INIT_CPT,
 204:Source/rme_benchmark.c ****                       RME_PARAM_D1(RME_BOOT_INIT_KOM)|RME_PARAM_D0(RME_BOOT_BENCH_THD),
 205:Source/rme_benchmark.c ****                       RME_PARAM_D1(RME_BOOT_INIT_PRC)|RME_PARAM_D0(31),
 206:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_KOM_FRONTIER);*/
 207:Source/rme_benchmark.c ****     Retval=RME_Thd_Crt(RME_BOOT_INIT_CPT,RME_BOOT_INIT_KOM,RME_BOOT_BENCH_THD,
 1615              		.loc 1 207 12
 1616 0014 0030A0E3 		mov	r3, #0
 1617 0018 08308DE5 		str	r3, [sp, #8]
 1618 001c 0239A0E3 		mov	r3, #32768
 1619 0020 04308DE5 		str	r3, [sp, #4]
 1620 0024 1F30A0E3 		mov	r3, #31
 1621 0028 00308DE5 		str	r3, [sp]
 1622 002c 0230A0E3 		mov	r3, #2
 1623 0030 0820A0E3 		mov	r2, #8
 1624 0034 0510A0E3 		mov	r1, #5
 1625 0038 0000A0E3 		mov	r0, #0
 1626 003c FEFFFFEB 		bl	RME_Thd_Crt
 1627 0040 10000BE5 		str	r0, [fp, #-16]
 208:Source/rme_benchmark.c ****                        RME_BOOT_INIT_PRC,RME_THD_PRIO_MAX,RME_BOOT_BENCH_KOM_FRONTIER,0);
 209:Source/rme_benchmark.c ****     //USR_DBG_S("\r\ncreate a thread      retval= ");
 210:Source/rme_benchmark.c ****     //USR_DBG_I(Retval);
 211:Source/rme_benchmark.c **** 
 212:Source/rme_benchmark.c ****     /* Bind the thread to the processor */
 213:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_SCHED_BIND,RME_BOOT_BENCH_THD,
 214:Source/rme_benchmark.c ****     		          RME_PARAM_D1(RME_BOOT_INIT_THD)|RME_PARAM_D0(RME_CID_NULL),
 215:Source/rme_benchmark.c **** 					  RME_PARAM_D1(RME_TID_2)|RME_PARAM_D0(RME_BOOT_INIT_PRC),
 216:Source/rme_benchmark.c **** 					  RME_BOOT_HYPER_KOM_VADDR);*/
 217:Source/rme_benchmark.c ****     Retval=RME_Thd_Sched_Bind(RME_BOOT_BENCH_THD,RME_BOOT_INIT_THD,RME_CID_NULL,
 1628              		.loc 1 217 12
 1629 0044 0030A0E3 		mov	r3, #0
 1630 0048 04308DE5 		str	r3, [sp, #4]
 1631 004c 0030A0E3 		mov	r3, #0
 1632 0050 00308DE5 		str	r3, [sp]
 1633 0054 0230A0E3 		mov	r3, #2
 1634 0058 0229A0E3 		mov	r2, #32768
 1635 005c 0310A0E3 		mov	r1, #3
 1636 0060 0800A0E3 		mov	r0, #8
 1637 0064 FEFFFFEB 		bl	RME_Thd_Sched_Bind
 1638 0068 10000BE5 		str	r0, [fp, #-16]
 218:Source/rme_benchmark.c ****                               RME_TID_2,0,RME_BOOT_HYPER_KOM_VADDR);
 219:Source/rme_benchmark.c ****     //USR_DBG_S("\r\nBind the thread to the processor retval= ");
 220:Source/rme_benchmark.c ****     //USR_DBG_I(Retval);
 221:Source/rme_benchmark.c ****     extern void RME_Deadloop(void);
 222:Source/rme_benchmark.c ****     /* Set the execution information */
 223:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_EXEC_SET,RME_BOOT_BENCH_THD,
 224:Source/rme_benchmark.c **** 	         	 	 (ptr_t)RME_Same_Prc_Thd_Switch_Test_Thd,
 225:Source/rme_benchmark.c ****     		         //(ptr_t)RME_Deadloop,
 226:Source/rme_benchmark.c **** 					 Stack_Addr,RME_TID_2);*/
 227:Source/rme_benchmark.c ****     Retval=RME_Thd_Exec_Set(RME_BOOT_BENCH_THD,(ptr_t)RME_Same_Prc_Thd_Switch_Test_Thd,Stack_Addr,R
 1639              		.loc 1 227 12
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 49


 1640 006c 001000E3 		movw	r1, #:lower16:RME_Same_Prc_Thd_Switch_Test_Thd
 1641 0070 001040E3 		movt	r1, #:upper16:RME_Same_Prc_Thd_Switch_Test_Thd
 1642 0074 0230A0E3 		mov	r3, #2
 1643 0078 0C201BE5 		ldr	r2, [fp, #-12]
 1644 007c 0800A0E3 		mov	r0, #8
 1645 0080 FEFFFFEB 		bl	RME_Thd_Exec_Set
 1646 0084 10000BE5 		str	r0, [fp, #-16]
 228:Source/rme_benchmark.c ****     //RME_Stack[2000]=1234;
 229:Source/rme_benchmark.c ****     //USR_DBG_S("\r\nSet the execution information retval= ");
 230:Source/rme_benchmark.c ****     //USR_DBG_I(Retval);
 231:Source/rme_benchmark.c ****     //USR_DBG_S("\r\n");
 232:Source/rme_benchmark.c ****     /* Delegate some timeslice to it */
 233:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_TIME_XFER,RME_BOOT_BENCH_THD,
 234:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_THD,
 235:Source/rme_benchmark.c ****                       RME_BOOT_INIT_THD,
 236:Source/rme_benchmark.c ****                       10000000);*/
 237:Source/rme_benchmark.c ****     Retval=RME_Thd_Time_Xfer(RME_BOOT_BENCH_THD,RME_BOOT_INIT_THD,RME_THD_INF_TIME);
 1647              		.loc 1 237 12
 1648 0088 0621E0E3 		mvn	r2, #-2147483647
 1649 008c 0310A0E3 		mov	r1, #3
 1650 0090 0800A0E3 		mov	r0, #8
 1651 0094 FEFFFFEB 		bl	RME_Thd_Time_Xfer
 1652 0098 10000BE5 		str	r0, [fp, #-16]
 238:Source/rme_benchmark.c **** 
 239:Source/rme_benchmark.c ****     //Retval=RME_Thd_Time_Xfer(RME_BOOT_BENCH_THD,RME_BOOT_INIT_THD,1000);
 240:Source/rme_benchmark.c ****     //USR_DBG_S("\r\nDelegate some timeslice to it retval= ");
 241:Source/rme_benchmark.c ****          //USR_DBG_I(Retval);
 242:Source/rme_benchmark.c **** 
 243:Source/rme_benchmark.c ****     Retval=RME_Thd_Swt(RME_BOOT_BENCH_THD,0);
 1653              		.loc 1 243 12
 1654 009c 0010A0E3 		mov	r1, #0
 1655 00a0 0800A0E3 		mov	r0, #8
 1656 00a4 FEFFFFEB 		bl	RME_Thd_Swt
 1657 00a8 10000BE5 		str	r0, [fp, #-16]
 244:Source/rme_benchmark.c ****     /*USR_DBG_S("\r\nTry to switch to that thread - should fail  retval= ");
 245:Source/rme_benchmark.c ****     USR_DBG_I(Retval);*/
 246:Source/rme_benchmark.c ****     /* Test result: intra-process ctxsw 358cycles/1.657us, frt w/mpu 163cycles/0.754us,
 247:Source/rme_benchmark.c ****     * composite 324. opted max:323
 248:Source/rme_benchmark.c ****     * all:33.0
 249:Source/rme_benchmark.c ****     * empty: 4.09 - 0.409us, most time spent on internals
 250:Source/rme_benchmark.c ****     * w/selections: 7.15 - maybe no need to check frozen cap from the proc.
 251:Source/rme_benchmark.c ****     * w/checkings:10.926 - 317us.
 252:Source/rme_benchmark.c ****     * total:16.57
 253:Source/rme_benchmark.c ****     * 16.2us now, after cleaning up two bad things
 254:Source/rme_benchmark.c ****     * 14.7us after CPUID optimizations. The quiescence hardly worked.
 255:Source/rme_benchmark.c ****     * no cache - 3 times slower, mainly due to the flash. ART does not really help.
 256:Source/rme_benchmark.c ****     * Performance cannot be further optimized anymore without compiler intrinsics.
 257:Source/rme_benchmark.c ****     * Something terribly wrong with systick. 38 second wrapwround
 258:Source/rme_benchmark.c ****     * This configuration, CPU works at 216MHz, correct, but the 
 259:Source/rme_benchmark.c ****     * The TSC is always 8 cycles between reads.
 260:Source/rme_benchmark.c ****     */
 261:Source/rme_benchmark.c ****     //_RME_Tsc_Init();
 262:Source/rme_benchmark.c ****     //for(Count=0;Count<10000;Count++)
 263:Source/rme_benchmark.c ****     start=get_time();
 1658              		.loc 1 263 11
 1659 00ac FEFFFFEB 		bl	get_time
 1660 00b0 0020A0E1 		mov	r2, r0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 50


 1661              		.loc 1 263 10 discriminator 1
 1662 00b4 003000E3 		movw	r3, #:lower16:start
 1663 00b8 003040E3 		movt	r3, #:upper16:start
 1664 00bc 002083E5 		str	r2, [r3]
 264:Source/rme_benchmark.c ****     for(Count=0;Count<10000;Count++)
 1665              		.loc 1 264 14
 1666 00c0 0030A0E3 		mov	r3, #0
 1667 00c4 08300BE5 		str	r3, [fp, #-8]
 1668              		.loc 1 264 5
 1669 00c8 050000EA 		b	.L81
 1670              	.L82:
 265:Source/rme_benchmark.c ****     {
 266:Source/rme_benchmark.c ****          RME_Thd_Swt(RME_BOOT_BENCH_THD,0);
 1671              		.loc 1 266 10
 1672 00cc 0010A0E3 		mov	r1, #0
 1673 00d0 0800A0E3 		mov	r0, #8
 1674 00d4 FEFFFFEB 		bl	RME_Thd_Swt
 264:Source/rme_benchmark.c ****     for(Count=0;Count<10000;Count++)
 1675              		.loc 1 264 34 discriminator 3
 1676 00d8 08301BE5 		ldr	r3, [fp, #-8]
 1677 00dc 013083E2 		add	r3, r3, #1
 1678 00e0 08300BE5 		str	r3, [fp, #-8]
 1679              	.L81:
 264:Source/rme_benchmark.c ****     for(Count=0;Count<10000;Count++)
 1680              		.loc 1 264 22 discriminator 1
 1681 00e4 08301BE5 		ldr	r3, [fp, #-8]
 1682 00e8 0F2702E3 		movw	r2, #9999
 1683 00ec 020053E1 		cmp	r3, r2
 1684 00f0 F5FFFFDA 		ble	.L82
 267:Source/rme_benchmark.c ****         //Temp=RME_TSC();
 268:Source/rme_benchmark.c ****         /*Retval=RME_CAP_OP(RME_SVC_THD_SWT,0,
 269:Source/rme_benchmark.c ****                           RME_BOOT_BENCH_THD,
 270:Source/rme_benchmark.c ****                           0,
 271:Source/rme_benchmark.c ****                           0);*/
 272:Source/rme_benchmark.c ****         //Retval=RME_Thd_Swt(RME_BOOT_BENCH_THD,0);
 273:Source/rme_benchmark.c ****         //Temp=RME_TSC()-Temp;
 274:Source/rme_benchmark.c ****        // Time[Count]=Temp-8;
 275:Source/rme_benchmark.c ****         //USR_DBG_S("\r\nTry to switch to that thread  retval= ");
 276:Source/rme_benchmark.c ****         //USR_DBG_I(Retval);
 277:Source/rme_benchmark.c ****     }
 278:Source/rme_benchmark.c ****     
 279:Source/rme_benchmark.c ****     end=get_time();
 1685              		.loc 1 279 9
 1686 00f4 FEFFFFEB 		bl	get_time
 1687 00f8 0020A0E1 		mov	r2, r0
 1688              		.loc 1 279 8 discriminator 1
 1689 00fc 003000E3 		movw	r3, #:lower16:end
 1690 0100 003040E3 		movt	r3, #:upper16:end
 1691 0104 002083E5 		str	r2, [r3]
 280:Source/rme_benchmark.c ****     USR_DBG_S("\r\n swt 10000 times time= ");
 1692              		.loc 1 280 5
 1693 0108 000000E3 		movw	r0, #:lower16:.LC11
 1694 010c 000040E3 		movt	r0, #:upper16:.LC11
 1695 0110 FEFFFFEB 		bl	USR_DBG_S
 281:Source/rme_benchmark.c ****     USR_DBG_I((end-start)*2);
 1696              		.loc 1 281 19
 1697 0114 003000E3 		movw	r3, #:lower16:end
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 51


 1698 0118 003040E3 		movt	r3, #:upper16:end
 1699 011c 002093E5 		ldr	r2, [r3]
 1700 0120 003000E3 		movw	r3, #:lower16:start
 1701 0124 003040E3 		movt	r3, #:upper16:start
 1702 0128 003093E5 		ldr	r3, [r3]
 1703 012c 033042E0 		sub	r3, r2, r3
 1704              		.loc 1 281 26
 1705 0130 8330A0E1 		lsl	r3, r3, #1
 1706              		.loc 1 281 5
 1707 0134 0300A0E1 		mov	r0, r3
 1708 0138 FEFFFFEB 		bl	USR_DBG_I
 282:Source/rme_benchmark.c ****     USR_DBG_S("\r\n swt 1 times time= ");
 1709              		.loc 1 282 5
 1710 013c 000000E3 		movw	r0, #:lower16:.LC12
 1711 0140 000040E3 		movt	r0, #:upper16:.LC12
 1712 0144 FEFFFFEB 		bl	USR_DBG_S
 283:Source/rme_benchmark.c ****     USR_DBG_I((end-start)/20000*2);
 1713              		.loc 1 283 19
 1714 0148 003000E3 		movw	r3, #:lower16:end
 1715 014c 003040E3 		movt	r3, #:upper16:end
 1716 0150 002093E5 		ldr	r2, [r3]
 1717 0154 003000E3 		movw	r3, #:lower16:start
 1718 0158 003040E3 		movt	r3, #:upper16:start
 1719 015c 003093E5 		ldr	r3, [r3]
 1720 0160 032042E0 		sub	r2, r2, r3
 1721              		.loc 1 283 26
 1722 0164 593701E3 		movw	r3, #5977
 1723 0168 B7314DE3 		movt	r3, 53687
 1724 016c 932283E0 		umull	r2, r3, r3, r2
 1725 0170 2337A0E1 		lsr	r3, r3, #14
 1726              		.loc 1 283 32
 1727 0174 8330A0E1 		lsl	r3, r3, #1
 1728              		.loc 1 283 5
 1729 0178 0300A0E1 		mov	r0, r3
 1730 017c FEFFFFEB 		bl	USR_DBG_I
 284:Source/rme_benchmark.c ****     USR_DBG_S("\r\ntest done ");
 1731              		.loc 1 284 5
 1732 0180 000000E3 		movw	r0, #:lower16:.LC13
 1733 0184 000040E3 		movt	r0, #:upper16:.LC13
 1734 0188 FEFFFFEB 		bl	USR_DBG_S
 1735              	.L83:
 285:Source/rme_benchmark.c **** 
 286:Source/rme_benchmark.c ****     // test sig_snd/sig_rcv
 287:Source/rme_benchmark.c **** 
 288:Source/rme_benchmark.c **** 
 289:Source/rme_benchmark.c **** 
 290:Source/rme_benchmark.c ****     while(1);
 1736              		.loc 1 290 10
 1737 018c FEFFFFEA 		b	.L83
 1738              	.L85:
 1739              		.align	2
 1740              	.L84:
 1741 0190 401F0000 		.word	RME_Stack1+8000
 1742              		.cfi_endproc
 1743              	.LFE28:
 1745              		.section	.text.RME_Diff_Prc_Thd_Switch_Test_Thd,"ax",%progbits
 1746              		.align	2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 52


 1747              		.global	RME_Diff_Prc_Thd_Switch_Test_Thd
 1748              		.syntax unified
 1749              		.arm
 1751              	RME_Diff_Prc_Thd_Switch_Test_Thd:
 1752              	.LFB29:
 291:Source/rme_benchmark.c **** }
 292:Source/rme_benchmark.c **** /* End Function:RME_Same_Prc_Thd_Switch_Test ********************************/
 293:Source/rme_benchmark.c **** 
 294:Source/rme_benchmark.c **** /* Function:RME_Diff_Prc_Thd_Switch_Test_Thd *********************************
 295:Source/rme_benchmark.c **** Description : The thread for testing same-process thread switching performance.
 296:Source/rme_benchmark.c **** Input       : None.
 297:Source/rme_benchmark.c **** Output      : None.
 298:Source/rme_benchmark.c **** Return      : None.
 299:Source/rme_benchmark.c **** ******************************************************************************/
 300:Source/rme_benchmark.c **** void RME_Diff_Prc_Thd_Switch_Test_Thd(ptr_t Param1, ptr_t Param2, ptr_t Param3, ptr_t Param4)
 301:Source/rme_benchmark.c **** {
 1753              		.loc 1 301 1
 1754              		.cfi_startproc
 1755              		@ args = 0, pretend = 0, frame = 24
 1756              		@ frame_needed = 1, uses_anonymous_args = 0
 1757 0000 00482DE9 		push	{fp, lr}
 1758              		.cfi_def_cfa_offset 8
 1759              		.cfi_offset 11, -8
 1760              		.cfi_offset 14, -4
 1761 0004 04B08DE2 		add	fp, sp, #4
 1762              		.cfi_def_cfa 11, 4
 1763 0008 18D04DE2 		sub	sp, sp, #24
 1764 000c 10000BE5 		str	r0, [fp, #-16]
 1765 0010 14100BE5 		str	r1, [fp, #-20]
 1766 0014 18200BE5 		str	r2, [fp, #-24]
 1767 0018 1C300BE5 		str	r3, [fp, #-28]
 1768              	.L87:
 302:Source/rme_benchmark.c ****     ret_t Retval;
 303:Source/rme_benchmark.c ****     /* Now we switch back to the init thread, immediately */
 304:Source/rme_benchmark.c ****     while(1)
 305:Source/rme_benchmark.c ****     {
 306:Source/rme_benchmark.c ****         /*Retval=RME_CAP_OP(RME_SVC_THD_SWT,0,
 307:Source/rme_benchmark.c ****                           RME_BOOT_INIT_THD,
 308:Source/rme_benchmark.c ****                           0,
 309:Source/rme_benchmark.c ****                           0);*/
 310:Source/rme_benchmark.c ****         Retval=RME_Thd_Swt(RME_BOOT_INIT_THD,0);
 1769              		.loc 1 310 16 discriminator 1
 1770 001c 0010A0E3 		mov	r1, #0
 1771 0020 0300A0E3 		mov	r0, #3
 1772 0024 FEFFFFEB 		bl	RME_Thd_Swt
 1773 0028 08000BE5 		str	r0, [fp, #-8]
 1774              		.loc 1 310 15
 1775 002c FAFFFFEA 		b	.L87
 1776              		.cfi_endproc
 1777              	.LFE29:
 1779              		.section	.text.RME_Diff_Prc_Thd_Switch_Test,"ax",%progbits
 1780              		.align	2
 1781              		.global	RME_Diff_Prc_Thd_Switch_Test
 1782              		.syntax unified
 1783              		.arm
 1785              	RME_Diff_Prc_Thd_Switch_Test:
 1786              	.LFB30:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 53


 311:Source/rme_benchmark.c ****     }
 312:Source/rme_benchmark.c **** }
 313:Source/rme_benchmark.c **** /* End Function:RME_Diff_Prc_Thd_Switch_Test_Thd ****************************/
 314:Source/rme_benchmark.c **** 
 315:Source/rme_benchmark.c **** /* Function:RME_Diff_Prc_Thd_Switch_Test *************************************
 316:Source/rme_benchmark.c **** Description : The same-process thread switch test code.
 317:Source/rme_benchmark.c **** Input       : None.
 318:Source/rme_benchmark.c **** Output      : None.
 319:Source/rme_benchmark.c **** Return      : None.
 320:Source/rme_benchmark.c **** ******************************************************************************/
 321:Source/rme_benchmark.c **** void RME_Diff_Prc_Thd_Switch_Test(void)
 322:Source/rme_benchmark.c **** {
 1787              		.loc 1 322 1
 1788              		.cfi_startproc
 1789              		@ args = 0, pretend = 0, frame = 16
 1790              		@ frame_needed = 1, uses_anonymous_args = 0
 1791 0000 00482DE9 		push	{fp, lr}
 1792              		.cfi_def_cfa_offset 8
 1793              		.cfi_offset 11, -8
 1794              		.cfi_offset 14, -4
 1795 0004 04B08DE2 		add	fp, sp, #4
 1796              		.cfi_def_cfa 11, 4
 1797 0008 18D04DE2 		sub	sp, sp, #24
 323:Source/rme_benchmark.c ****     /* Intra-process thread switching time */
 324:Source/rme_benchmark.c ****     ret_t Retval;
 325:Source/rme_benchmark.c ****     cnt_t Count;
 326:Source/rme_benchmark.c ****     ptr_t Stack_Addr;
 327:Source/rme_benchmark.c ****     ptr_t Temp;
 328:Source/rme_benchmark.c ****     ptr_t Frontier;
 329:Source/rme_benchmark.c ****     
 330:Source/rme_benchmark.c ****     Frontier=RME_BOOT_BENCH_KOM_FRONTIER;
 1798              		.loc 1 330 13
 1799 000c 0239A0E3 		mov	r3, #32768
 1800 0010 0C300BE5 		str	r3, [fp, #-12]
 331:Source/rme_benchmark.c ****     /* Initialize the thread's stack before entering it */
 332:Source/rme_benchmark.c ****     Stack_Addr=_RME_Stack_Init((ptr_t)(&RME_Stack1[2047]),
 1801              		.loc 1 332 16
 1802 0014 54009FE5 		ldr	r0, .L92
 1803 0018 001000E3 		movw	r1, #:lower16:RME_Thd_Stub
 1804 001c 001040E3 		movt	r1, #:upper16:RME_Thd_Stub
 1805 0020 0430A0E3 		mov	r3, #4
 1806 0024 04308DE5 		str	r3, [sp, #4]
 1807 0028 0330A0E3 		mov	r3, #3
 1808 002c 00308DE5 		str	r3, [sp]
 1809 0030 0230A0E3 		mov	r3, #2
 1810 0034 0120A0E3 		mov	r2, #1
 1811 0038 FEFFFFEB 		bl	_RME_Stack_Init
 1812 003c 10000BE5 		str	r0, [fp, #-16]
 333:Source/rme_benchmark.c ****                                (ptr_t)RME_Thd_Stub,
 334:Source/rme_benchmark.c ****                                1, 2, 3, 4);
 335:Source/rme_benchmark.c ****     
 336:Source/rme_benchmark.c ****     /* Create the page table for the whole address space range */
 337:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_PGT_CRT,RME_BOOT_INIT_CPT,
 338:Source/rme_benchmark.c ****                       RME_PARAM_D1(RME_BOOT_INIT_KOM)|RME_PARAM_Q1(RME_BOOT_BENCH_PGT_TOP)|
 339:Source/rme_benchmark.c ****                       RME_PARAM_O1(29)|RME_PARAM_O0(3),
 340:Source/rme_benchmark.c ****                       Frontier,
 341:Source/rme_benchmark.c ****                       1);*/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 54


 342:Source/rme_benchmark.c **** //    Frontier+=;
 343:Source/rme_benchmark.c **** //    /* Create the page table for the SRAM range */
 344:Source/rme_benchmark.c **** //    Retval=RME_CAP_OP(RME_SVC_PGT_CRT,RME_BOOT_INIT_CPT,
 345:Source/rme_benchmark.c **** //                      RME_PARAM_D1(RME_BOOT_INIT_KOM)|RME_PARAM_Q1(RME_BOOT_BENCH_PGT_SRAM)|
 346:Source/rme_benchmark.c **** //                      RME_PARAM_O1(16)|RME_PARAM_O0(3),
 347:Source/rme_benchmark.c **** //                      Frontier,
 348:Source/rme_benchmark.c **** //                      0x20000001);*/
 349:Source/rme_benchmark.c **** //    Frontier+=;
 350:Source/rme_benchmark.c **** //    /* Map the pages into the top-level and the second-level */
 351:Source/rme_benchmark.c **** //    RME_CAP_OP(RME_SVC_PGT_ADD,0,
 352:Source/rme_benchmark.c **** //               RME_PARAM_Q1(RME_BOOT_BENCH_PGT_TOP)|0,
 353:Source/rme_benchmark.c **** //               RME_PARAM_D1(RME_BOOT_INIT_PGT)|0,
 354:Source/rme_benchmark.c **** //               |0)*/
 355:Source/rme_benchmark.c ****                       
 356:Source/rme_benchmark.c ****                   
 357:Source/rme_benchmark.c ****     
 358:Source/rme_benchmark.c ****     
 359:Source/rme_benchmark.c ****     
 360:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_CRT,RME_BOOT_INIT_CPT,
 361:Source/rme_benchmark.c ****                       RME_PARAM_D1(RME_BOOT_INIT_KOM)|RME_PARAM_D0(RME_BOOT_BENCH_THD),
 362:Source/rme_benchmark.c ****                       RME_PARAM_D1(RME_BOOT_INIT_PRC)|RME_PARAM_D0(31),
 363:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_KOM_FRONTIER);*/
 364:Source/rme_benchmark.c ****     
 365:Source/rme_benchmark.c ****     /* Bind the thread to the processor */
 366:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_SCHED_BIND,0,
 367:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_THD,
 368:Source/rme_benchmark.c ****                       RME_BOOT_INIT_THD,
 369:Source/rme_benchmark.c ****                       0);*/
 370:Source/rme_benchmark.c ****     
 371:Source/rme_benchmark.c ****     /* Set the execution information */
 372:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_EXEC_SET,0,
 373:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_THD,
 374:Source/rme_benchmark.c ****                       (ptr_t)RME_Same_Prc_Thd_Switch_Test_Thd,
 375:Source/rme_benchmark.c ****                       Stack_Addr);*/
 376:Source/rme_benchmark.c ****                       
 377:Source/rme_benchmark.c ****     /* Delegate some timeslice to it */
 378:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_TIME_XFER,0,
 379:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_THD,
 380:Source/rme_benchmark.c ****                       RME_BOOT_INIT_THD,
 381:Source/rme_benchmark.c ****                       10000000);*/
 382:Source/rme_benchmark.c ****     
 383:Source/rme_benchmark.c ****     /* Try to switch to that thread - should fail */
 384:Source/rme_benchmark.c ****     /*Retval=RME_CAP_OP(RME_SVC_THD_SWT,0,
 385:Source/rme_benchmark.c ****                       RME_BOOT_BENCH_THD,
 386:Source/rme_benchmark.c ****                       0,
 387:Source/rme_benchmark.c ****                       0);*/
 388:Source/rme_benchmark.c ****     /* Test result: intra-process ctxsw 358cycles/1.657us, frt w/mpu 163cycles/0.754us,
 389:Source/rme_benchmark.c ****     * composite 324. opted max:323
 390:Source/rme_benchmark.c ****     * all:33.0
 391:Source/rme_benchmark.c ****     * empty: 4.09 - 0.409us, most time spent on internals
 392:Source/rme_benchmark.c ****     * w/selections: 7.15 - maybe no need to check frozen cap from the proc.
 393:Source/rme_benchmark.c ****     * w/checkings:10.926 - 317us.
 394:Source/rme_benchmark.c ****     * total:16.57
 395:Source/rme_benchmark.c ****     * 16.2us now, after cleaning up two bad things
 396:Source/rme_benchmark.c ****     * 14.7us after CPUID optimizations. The quiescence hardly worked.
 397:Source/rme_benchmark.c ****     * no cache - 3 times slower, mainly due to the flash. ART does not really help.
 398:Source/rme_benchmark.c ****     * Performance cannot be further optimized anymore without compiler intrinsics.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 55


 399:Source/rme_benchmark.c ****     * Something terribly wrong with systick. 38 second wrapwround
 400:Source/rme_benchmark.c ****     * This configuration, CPU works at 216MHz, correct, but the 
 401:Source/rme_benchmark.c ****     * The TSC is always 8 cycles between reads.
 402:Source/rme_benchmark.c ****     */
 403:Source/rme_benchmark.c ****     _RME_Tsc_Init();
 1813              		.loc 1 403 5
 1814 0040 FEFFFFEB 		bl	_RME_Tsc_Init
 404:Source/rme_benchmark.c ****     for(Count=0;Count<10000;Count++)
 1815              		.loc 1 404 14
 1816 0044 0030A0E3 		mov	r3, #0
 1817 0048 08300BE5 		str	r3, [fp, #-8]
 1818              		.loc 1 404 5
 1819 004c 020000EA 		b	.L89
 1820              	.L90:
 1821              		.loc 1 404 34 discriminator 3
 1822 0050 08301BE5 		ldr	r3, [fp, #-8]
 1823 0054 013083E2 		add	r3, r3, #1
 1824 0058 08300BE5 		str	r3, [fp, #-8]
 1825              	.L89:
 1826              		.loc 1 404 22 discriminator 1
 1827 005c 08301BE5 		ldr	r3, [fp, #-8]
 1828 0060 0F2702E3 		movw	r2, #9999
 1829 0064 020053E1 		cmp	r3, r2
 1830 0068 F8FFFFDA 		ble	.L90
 1831              	.L91:
 405:Source/rme_benchmark.c ****     {
 406:Source/rme_benchmark.c ****         //Temp=RME_TSC();
 407:Source/rme_benchmark.c ****         /*Retval=RME_CAP_OP(RME_SVC_THD_SWT,0,
 408:Source/rme_benchmark.c ****                           RME_BOOT_BENCH_THD,
 409:Source/rme_benchmark.c ****                           0,
 410:Source/rme_benchmark.c ****                           0);*/
 411:Source/rme_benchmark.c ****         //Temp=RME_TSC()-Temp;
 412:Source/rme_benchmark.c ****         //Time[Count]=Temp-8;
 413:Source/rme_benchmark.c ****     }
 414:Source/rme_benchmark.c **** 
 415:Source/rme_benchmark.c **** 
 416:Source/rme_benchmark.c ****     while(1);
 1832              		.loc 1 416 10
 1833 006c FEFFFFEA 		b	.L91
 1834              	.L93:
 1835              		.align	2
 1836              	.L92:
 1837 0070 FC1F0000 		.word	RME_Stack1+8188
 1838              		.cfi_endproc
 1839              	.LFE30:
 1841              		.section	.rodata
 1842 0145 000000   		.align	2
 1843              	.LC14:
 1844 0148 0D0A2073 		.ascii	"\015\012 switch to new prc time= \000"
 1844      77697463 
 1844      6820746F 
 1844      206E6577 
 1844      20707263 
 1845              		.align	2
 1846              	.LC15:
 1847 0164 0D0A2073 		.ascii	"\015\012 switch to new prc  retval= \000"
 1847      77697463 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 56


 1847      6820746F 
 1847      206E6577 
 1847      20707263 
 1848 0183 00       		.align	2
 1849              	.LC16:
 1850 0184 0D0A5465 		.ascii	"\015\012Test done!\000"
 1850      73742064 
 1850      6F6E6521 
 1850      00
 1851              		.section	.text.RME_Same_Prc_Switch_Test,"ax",%progbits
 1852              		.align	2
 1853              		.global	RME_Same_Prc_Switch_Test
 1854              		.syntax unified
 1855              		.arm
 1857              	RME_Same_Prc_Switch_Test:
 1858              	.LFB31:
 417:Source/rme_benchmark.c **** }
 418:Source/rme_benchmark.c **** /* End Function:RME_Diff_Prc_Thd_Switch_Test ********************************/
 419:Source/rme_benchmark.c **** 
 420:Source/rme_benchmark.c **** /* Function:RME_Same_Prc_Switch_Test *************************************
 421:Source/rme_benchmark.c **** Description : The same-process switch test code.
 422:Source/rme_benchmark.c **** Input       : None.
 423:Source/rme_benchmark.c **** Output      : None.
 424:Source/rme_benchmark.c **** Return      : None.
 425:Source/rme_benchmark.c **** ******************************************************************************/
 426:Source/rme_benchmark.c **** void RME_Same_Prc_Switch_Test(void)
 427:Source/rme_benchmark.c **** {
 1859              		.loc 1 427 1
 1860              		.cfi_startproc
 1861              		@ args = 0, pretend = 0, frame = 8
 1862              		@ frame_needed = 1, uses_anonymous_args = 0
 1863 0000 00482DE9 		push	{fp, lr}
 1864              		.cfi_def_cfa_offset 8
 1865              		.cfi_offset 11, -8
 1866              		.cfi_offset 14, -4
 1867 0004 04B08DE2 		add	fp, sp, #4
 1868              		.cfi_def_cfa 11, 4
 1869 0008 20D04DE2 		sub	sp, sp, #32
 428:Source/rme_benchmark.c **** 	// create benchmark page table
 429:Source/rme_benchmark.c **** 	ret_t Retval;
 430:Source/rme_benchmark.c **** 	ptr_t Count;
 431:Source/rme_benchmark.c **** 	Cur_addr=RME_BOOT_BENCH_PGT_RADDR;
 1870              		.loc 1 431 10
 1871 000c 003000E3 		movw	r3, #:lower16:Cur_addr
 1872 0010 003040E3 		movt	r3, #:upper16:Cur_addr
 1873 0014 0628A0E3 		mov	r2, #393216
 1874 0018 002083E5 		str	r2, [r3]
 432:Source/rme_benchmark.c **** 
 433:Source/rme_benchmark.c **** 	/*USR_DBG_S(" \r\nCur_addr= ");
 434:Source/rme_benchmark.c ****     USR_DBG_H(Cur_addr);*/
 435:Source/rme_benchmark.c **** 	Retval=RME_Pgt_Crt(RME_BOOT_INIT_CPT,RME_BOOT_INIT_KOM,RME_BOOT_BENCH_PGT,
 1875              		.loc 1 435 9
 1876 001c 003000E3 		movw	r3, #:lower16:Cur_addr
 1877 0020 003040E3 		movt	r3, #:upper16:Cur_addr
 1878 0024 003093E5 		ldr	r3, [r3]
 1879 0028 0C20A0E3 		mov	r2, #12
 1880 002c 0C208DE5 		str	r2, [sp, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 57


 1881 0030 1420A0E3 		mov	r2, #20
 1882 0034 08208DE5 		str	r2, [sp, #8]
 1883 0038 0120A0E3 		mov	r2, #1
 1884 003c 04208DE5 		str	r2, [sp, #4]
 1885 0040 0020A0E3 		mov	r2, #0
 1886 0044 00208DE5 		str	r2, [sp]
 1887 0048 0920A0E3 		mov	r2, #9
 1888 004c 0510A0E3 		mov	r1, #5
 1889 0050 0000A0E3 		mov	r0, #0
 1890 0054 FEFFFFEB 		bl	RME_Pgt_Crt
 1891 0058 0C000BE5 		str	r0, [fp, #-12]
 436:Source/rme_benchmark.c **** 			    	   Cur_addr,0x00000000U,RME_PGT_TOP,RME_PGT_SIZE_1M,RME_PGT_NUM_4K);
 437:Source/rme_benchmark.c **** 
 438:Source/rme_benchmark.c **** 	/*USR_DBG_S("\r\ncreate benchmark page table  retval= ");
 439:Source/rme_benchmark.c **** 	USR_DBG_I(Retval);*/
 440:Source/rme_benchmark.c **** 
 441:Source/rme_benchmark.c **** 	// add page to benchmark pgt
 442:Source/rme_benchmark.c **** 	for(Count=0U;Count<0x400U;Count++)
 1892              		.loc 1 442 11
 1893 005c 0030A0E3 		mov	r3, #0
 1894 0060 08300BE5 		str	r3, [fp, #-8]
 1895              		.loc 1 442 2
 1896 0064 0C0000EA 		b	.L95
 1897              	.L96:
 443:Source/rme_benchmark.c **** 	    {
 444:Source/rme_benchmark.c **** 		Retval=RME_Pgt_Add(RME_BOOT_BENCH_PGT,Count,RME_PGT_ALL_DYN,
 1898              		.loc 1 444 10
 1899 0068 0030A0E3 		mov	r3, #0
 1900 006c 04308DE5 		str	r3, [sp, #4]
 1901 0070 08301BE5 		ldr	r3, [fp, #-8]
 1902 0074 00308DE5 		str	r3, [sp]
 1903 0078 0130A0E3 		mov	r3, #1
 1904 007c 1F20A0E3 		mov	r2, #31
 1905 0080 08101BE5 		ldr	r1, [fp, #-8]
 1906 0084 0900A0E3 		mov	r0, #9
 1907 0088 FEFFFFEB 		bl	RME_Pgt_Add
 1908 008c 0C000BE5 		str	r0, [fp, #-12]
 442:Source/rme_benchmark.c **** 	    {
 1909              		.loc 1 442 33 discriminator 3
 1910 0090 08301BE5 		ldr	r3, [fp, #-8]
 1911 0094 013083E2 		add	r3, r3, #1
 1912 0098 08300BE5 		str	r3, [fp, #-8]
 1913              	.L95:
 442:Source/rme_benchmark.c **** 	    {
 1914              		.loc 1 442 20 discriminator 1
 1915 009c 08301BE5 		ldr	r3, [fp, #-8]
 1916 00a0 010B53E3 		cmp	r3, #1024
 1917 00a4 EFFFFF3A 		bcc	.L96
 445:Source/rme_benchmark.c **** 										 RME_BOOT_INIT_PGT,
 446:Source/rme_benchmark.c **** 										 Count,
 447:Source/rme_benchmark.c **** 										 0);
 448:Source/rme_benchmark.c **** 		    /*USR_DBG_S("\r\nadd page to benchmark pgt  retval= ");
 449:Source/rme_benchmark.c **** 			USR_DBG_I(Retval);*/
 450:Source/rme_benchmark.c **** 	    }
 451:Source/rme_benchmark.c **** 		/* Device memory 1, 512MiB 0x40000000 -> 0x40000000 */
 452:Source/rme_benchmark.c **** 	    for(Count=0U;Count<0x200U;Count++)
 1918              		.loc 1 452 15
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 58


 1919 00a8 0030A0E3 		mov	r3, #0
 1920 00ac 08300BE5 		str	r3, [fp, #-8]
 1921              		.loc 1 452 6
 1922 00b0 0E0000EA 		b	.L97
 1923              	.L98:
 453:Source/rme_benchmark.c **** 	    {
 454:Source/rme_benchmark.c **** 	    	Retval=RME_Pgt_Add(RME_BOOT_BENCH_PGT,(Count+0x400U),
 1924              		.loc 1 454 14
 1925 00b4 08301BE5 		ldr	r3, [fp, #-8]
 1926 00b8 011B83E2 		add	r1, r3, #1024
 1927 00bc 08301BE5 		ldr	r3, [fp, #-8]
 1928 00c0 013B83E2 		add	r3, r3, #1024
 1929 00c4 0020A0E3 		mov	r2, #0
 1930 00c8 04208DE5 		str	r2, [sp, #4]
 1931 00cc 00308DE5 		str	r3, [sp]
 1932 00d0 0130A0E3 		mov	r3, #1
 1933 00d4 0320A0E3 		mov	r2, #3
 1934 00d8 0900A0E3 		mov	r0, #9
 1935 00dc FEFFFFEB 		bl	RME_Pgt_Add
 1936 00e0 0C000BE5 		str	r0, [fp, #-12]
 452:Source/rme_benchmark.c **** 	    {
 1937              		.loc 1 452 37 discriminator 3
 1938 00e4 08301BE5 		ldr	r3, [fp, #-8]
 1939 00e8 013083E2 		add	r3, r3, #1
 1940 00ec 08300BE5 		str	r3, [fp, #-8]
 1941              	.L97:
 452:Source/rme_benchmark.c **** 	    {
 1942              		.loc 1 452 24 discriminator 1
 1943 00f0 08301BE5 		ldr	r3, [fp, #-8]
 1944 00f4 020C53E3 		cmp	r3, #512
 1945 00f8 EDFFFF3A 		bcc	.L98
 455:Source/rme_benchmark.c **** 										 RME_PGT_READ|RME_PGT_WRITE,
 456:Source/rme_benchmark.c **** 										 RME_BOOT_INIT_PGT,
 457:Source/rme_benchmark.c **** 										 (Count+0x400U),
 458:Source/rme_benchmark.c **** 										 0);
 459:Source/rme_benchmark.c **** 			/*USR_DBG_S("\r\nadd page to benchmark pgt  retval= ");
 460:Source/rme_benchmark.c **** 						USR_DBG_I(Retval);*/
 461:Source/rme_benchmark.c **** 	    }
 462:Source/rme_benchmark.c **** 
 463:Source/rme_benchmark.c **** 	    /* Device memory 2, 512MiB 0x60000000 -> 0xE0000000 */
 464:Source/rme_benchmark.c **** 	    for(Count=0U;Count<0x200U;Count++)
 1946              		.loc 1 464 15
 1947 00fc 0030A0E3 		mov	r3, #0
 1948 0100 08300BE5 		str	r3, [fp, #-8]
 1949              		.loc 1 464 6
 1950 0104 0E0000EA 		b	.L99
 1951              	.L100:
 465:Source/rme_benchmark.c **** 	    {
 466:Source/rme_benchmark.c **** 	    	Retval=RME_Pgt_Add(RME_BOOT_BENCH_PGT,(Count+0x600U),
 1952              		.loc 1 466 14
 1953 0108 08301BE5 		ldr	r3, [fp, #-8]
 1954 010c 061C83E2 		add	r1, r3, #1536
 1955 0110 08301BE5 		ldr	r3, [fp, #-8]
 1956 0114 063C83E2 		add	r3, r3, #1536
 1957 0118 0020A0E3 		mov	r2, #0
 1958 011c 04208DE5 		str	r2, [sp, #4]
 1959 0120 00308DE5 		str	r3, [sp]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 59


 1960 0124 0130A0E3 		mov	r3, #1
 1961 0128 0320A0E3 		mov	r2, #3
 1962 012c 0900A0E3 		mov	r0, #9
 1963 0130 FEFFFFEB 		bl	RME_Pgt_Add
 1964 0134 0C000BE5 		str	r0, [fp, #-12]
 464:Source/rme_benchmark.c **** 	    {
 1965              		.loc 1 464 37 discriminator 3
 1966 0138 08301BE5 		ldr	r3, [fp, #-8]
 1967 013c 013083E2 		add	r3, r3, #1
 1968 0140 08300BE5 		str	r3, [fp, #-8]
 1969              	.L99:
 464:Source/rme_benchmark.c **** 	    {
 1970              		.loc 1 464 24 discriminator 1
 1971 0144 08301BE5 		ldr	r3, [fp, #-8]
 1972 0148 020C53E3 		cmp	r3, #512
 1973 014c EDFFFF3A 		bcc	.L100
 467:Source/rme_benchmark.c **** 	    								 RME_PGT_READ|RME_PGT_WRITE,
 468:Source/rme_benchmark.c **** 										 RME_BOOT_INIT_PGT,
 469:Source/rme_benchmark.c **** 										 (Count+0x600U),
 470:Source/rme_benchmark.c **** 										 0);
 471:Source/rme_benchmark.c **** 			/*USR_DBG_S("\r\nadd page to benchmark pgt  retval= ");
 472:Source/rme_benchmark.c **** 									USR_DBG_I(Retval);*/
 473:Source/rme_benchmark.c **** 	    }
 474:Source/rme_benchmark.c **** 	    /*USR_DBG_S("\r\nFirst section's first entry ");
 475:Source/rme_benchmark.c **** 	    USR_DBG_H(RME_A7A_REG(Cur_addr+RME_KOM_VA_BASE));
 476:Source/rme_benchmark.c **** 	    USR_DBG_S(" @ ");
 477:Source/rme_benchmark.c **** 	    USR_DBG_H(Cur_addr+RME_KOM_VA_BASE);
 478:Source/rme_benchmark.c **** 
 479:Source/rme_benchmark.c **** 	    USR_DBG_S("\r\nFirst section's 0x080th entry ");
 480:Source/rme_benchmark.c **** 	    USR_DBG_H(RME_A7A_REG(Cur_addr+0x080*RME_WORD_BYTE+RME_KOM_VA_BASE));
 481:Source/rme_benchmark.c **** 	    USR_DBG_S(" @ ");
 482:Source/rme_benchmark.c **** 	    USR_DBG_H(Cur_addr+0x080*RME_WORD_BYTE+RME_KOM_VA_BASE);
 483:Source/rme_benchmark.c **** 
 484:Source/rme_benchmark.c **** 	    USR_DBG_S("\r\nSecond section's first entry ");
 485:Source/rme_benchmark.c **** 	    USR_DBG_H(RME_A7A_REG(Cur_addr+0x400*RME_WORD_BYTE+RME_KOM_VA_BASE));
 486:Source/rme_benchmark.c **** 	    USR_DBG_S(" @ ");
 487:Source/rme_benchmark.c **** 	    USR_DBG_H(Cur_addr+0x400*RME_WORD_BYTE+RME_KOM_VA_BASE);
 488:Source/rme_benchmark.c **** 
 489:Source/rme_benchmark.c **** 	    USR_DBG_S("\r\nThird section's first entry ");
 490:Source/rme_benchmark.c **** 	    USR_DBG_H(RME_A7A_REG(Cur_addr+0x600*RME_WORD_BYTE+RME_KOM_VA_BASE));
 491:Source/rme_benchmark.c **** 	    USR_DBG_S(" @ ");
 492:Source/rme_benchmark.c **** 	    USR_DBG_H(Cur_addr+0x600*RME_WORD_BYTE+RME_KOM_VA_BASE);
 493:Source/rme_benchmark.c **** 
 494:Source/rme_benchmark.c **** 	    /*USR_DBG_S("\r\nKernel pgtbl's 80th entry ");
 495:Source/rme_benchmark.c **** 	    USR_DBG_H(RME_A7A_REG(((ptr_t)(&__RME_A7A_Kern_Pgt))+0x080*RME_WORD_BYTE));
 496:Source/rme_benchmark.c **** 	    USR_DBG_S(" @ ");
 497:Source/rme_benchmark.c **** 	    USR_DBG_H(((ptr_t)(&__RME_A7A_Kern_Pgt))+0x080*RME_WORD_BYTE);*/
 498:Source/rme_benchmark.c **** 	// create benchmark prc
 499:Source/rme_benchmark.c **** 	    Retval=RME_Prc_Crt(RME_BOOT_INIT_CPT,RME_BOOT_BENCH_PRC,RME_BOOT_INIT_CPT,
 1974              		.loc 1 499 13
 1975 0150 0930A0E3 		mov	r3, #9
 1976 0154 0020A0E3 		mov	r2, #0
 1977 0158 1110A0E3 		mov	r1, #17
 1978 015c 0000A0E3 		mov	r0, #0
 1979 0160 FEFFFFEB 		bl	RME_Prc_Crt
 1980 0164 0C000BE5 		str	r0, [fp, #-12]
 500:Source/rme_benchmark.c **** 	    				   RME_BOOT_BENCH_PGT);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 60


 501:Source/rme_benchmark.c **** 	    /*USR_DBG_S("\r\n create benchmark prc  retval= ");
 502:Source/rme_benchmark.c **** 	    						USR_DBG_I(Retval);*/
 503:Source/rme_benchmark.c **** 	// create new thread
 504:Source/rme_benchmark.c **** //void RME_Thd_Create(cid_t Cap_Thd,ptr_t Tid,ptr_t Prio,ptr_t Entry,ptr_t Raddr,cid_t Cap_Sig,ptr_
 505:Source/rme_benchmark.c **** 	    		RME_Thd_Create(RME_BOOT_BENCH_PRC,RME_BOOT_BENCH_THD,RME_TID_4,0,
 1981              		.loc 1 505 8
 1982 0168 003000E3 		movw	r3, #:lower16:RME_Same_Prc_Thd_Switch_Test_Thd
 1983 016c 003040E3 		movt	r3, #:upper16:RME_Same_Prc_Thd_Switch_Test_Thd
 1984 0170 C0209FE5 		ldr	r2, .L102
 1985 0174 10208DE5 		str	r2, [sp, #16]
 1986 0178 0621E0E3 		mvn	r2, #-2147483647
 1987 017c 0C208DE5 		str	r2, [sp, #12]
 1988 0180 0229A0E3 		mov	r2, #32768
 1989 0184 08208DE5 		str	r2, [sp, #8]
 1990 0188 0229A0E3 		mov	r2, #32768
 1991 018c 04208DE5 		str	r2, [sp, #4]
 1992 0190 00308DE5 		str	r3, [sp]
 1993 0194 0030A0E3 		mov	r3, #0
 1994 0198 0420A0E3 		mov	r2, #4
 1995 019c 0810A0E3 		mov	r1, #8
 1996 01a0 1100A0E3 		mov	r0, #17
 1997 01a4 FEFFFFEB 		bl	RME_Thd_Create
 506:Source/rme_benchmark.c **** 	    		(ptr_t)RME_Same_Prc_Thd_Switch_Test_Thd,
 507:Source/rme_benchmark.c **** 				RME_BOOT_BENCH_KOM_FRONTIER,
 508:Source/rme_benchmark.c **** 				RME_CID_NULL,RME_THD_INF_TIME,
 509:Source/rme_benchmark.c **** 				(ptr_t)&RME_Stack3[2000]);
 510:Source/rme_benchmark.c **** 
 511:Source/rme_benchmark.c **** 
 512:Source/rme_benchmark.c **** 	// switch to new prc
 513:Source/rme_benchmark.c **** 	    		start=get_time();
 1998              		.loc 1 513 14
 1999 01a8 FEFFFFEB 		bl	get_time
 2000 01ac 0020A0E1 		mov	r2, r0
 2001              		.loc 1 513 13 discriminator 1
 2002 01b0 003000E3 		movw	r3, #:lower16:start
 2003 01b4 003040E3 		movt	r3, #:upper16:start
 2004 01b8 002083E5 		str	r2, [r3]
 514:Source/rme_benchmark.c **** 	    	    Retval=RME_Thd_Swt(RME_BOOT_BENCH_THD,0);
 2005              		.loc 1 514 18
 2006 01bc 0010A0E3 		mov	r1, #0
 2007 01c0 0800A0E3 		mov	r0, #8
 2008 01c4 FEFFFFEB 		bl	RME_Thd_Swt
 2009 01c8 0C000BE5 		str	r0, [fp, #-12]
 515:Source/rme_benchmark.c **** 	    	    //calculate time
 516:Source/rme_benchmark.c **** 	    	    end=get_time();
 2010              		.loc 1 516 15
 2011 01cc FEFFFFEB 		bl	get_time
 2012 01d0 0020A0E1 		mov	r2, r0
 2013              		.loc 1 516 14 discriminator 1
 2014 01d4 003000E3 		movw	r3, #:lower16:end
 2015 01d8 003040E3 		movt	r3, #:upper16:end
 2016 01dc 002083E5 		str	r2, [r3]
 517:Source/rme_benchmark.c **** 	    	    USR_DBG_S("\r\n switch to new prc time= ");
 2017              		.loc 1 517 11
 2018 01e0 000000E3 		movw	r0, #:lower16:.LC14
 2019 01e4 000040E3 		movt	r0, #:upper16:.LC14
 2020 01e8 FEFFFFEB 		bl	USR_DBG_S
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 61


 518:Source/rme_benchmark.c **** 	    	    USR_DBG_I((end-start)*2);
 2021              		.loc 1 518 25
 2022 01ec 003000E3 		movw	r3, #:lower16:end
 2023 01f0 003040E3 		movt	r3, #:upper16:end
 2024 01f4 002093E5 		ldr	r2, [r3]
 2025 01f8 003000E3 		movw	r3, #:lower16:start
 2026 01fc 003040E3 		movt	r3, #:upper16:start
 2027 0200 003093E5 		ldr	r3, [r3]
 2028 0204 033042E0 		sub	r3, r2, r3
 2029              		.loc 1 518 32
 2030 0208 8330A0E1 		lsl	r3, r3, #1
 2031              		.loc 1 518 11
 2032 020c 0300A0E1 		mov	r0, r3
 2033 0210 FEFFFFEB 		bl	USR_DBG_I
 519:Source/rme_benchmark.c **** 
 520:Source/rme_benchmark.c **** 	    	    USR_DBG_S("\r\n switch to new prc  retval= ");
 2034              		.loc 1 520 11
 2035 0214 000000E3 		movw	r0, #:lower16:.LC15
 2036 0218 000040E3 		movt	r0, #:upper16:.LC15
 2037 021c FEFFFFEB 		bl	USR_DBG_S
 521:Source/rme_benchmark.c **** 	    	    USR_DBG_I(Retval);
 2038              		.loc 1 521 11
 2039 0220 0C001BE5 		ldr	r0, [fp, #-12]
 2040 0224 FEFFFFEB 		bl	USR_DBG_I
 522:Source/rme_benchmark.c **** 	    	    USR_DBG_S("\r\nTest done!");
 2041              		.loc 1 522 11
 2042 0228 000000E3 		movw	r0, #:lower16:.LC16
 2043 022c 000040E3 		movt	r0, #:upper16:.LC16
 2044 0230 FEFFFFEB 		bl	USR_DBG_S
 2045              	.L101:
 523:Source/rme_benchmark.c **** 	    	    while(1);
 2046              		.loc 1 523 16
 2047 0234 FEFFFFEA 		b	.L101
 2048              	.L103:
 2049              		.align	2
 2050              	.L102:
 2051 0238 401F0000 		.word	RME_Stack3+8000
 2052              		.cfi_endproc
 2053              	.LFE31:
 2055              		.section	.rodata
 2056 0191 000000   		.align	2
 2057              	.LC17:
 2058 0194 0D0A5465 		.ascii	"\015\012Test begin!\000"
 2058      73742062 
 2058      6567696E 
 2058      2100
 2059              		.section	.text.RME_Benchmark,"ax",%progbits
 2060              		.align	2
 2061              		.global	RME_Benchmark
 2062              		.syntax unified
 2063              		.arm
 2065              	RME_Benchmark:
 2066              	.LFB32:
 524:Source/rme_benchmark.c **** }
 525:Source/rme_benchmark.c **** 
 526:Source/rme_benchmark.c **** /* Function:RME_Benchmark *****************************************************
 527:Source/rme_benchmark.c **** Description : The benchmark entry, also the init thread.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 62


 528:Source/rme_benchmark.c **** Input       : None.
 529:Source/rme_benchmark.c **** Output      : None.
 530:Source/rme_benchmark.c **** Return      : None.
 531:Source/rme_benchmark.c **** ******************************************************************************/
 532:Source/rme_benchmark.c **** void RME_Benchmark(void)
 533:Source/rme_benchmark.c **** {
 2067              		.loc 1 533 1
 2068              		.cfi_startproc
 2069              		@ args = 0, pretend = 0, frame = 0
 2070              		@ frame_needed = 1, uses_anonymous_args = 0
 2071 0000 00482DE9 		push	{fp, lr}
 2072              		.cfi_def_cfa_offset 8
 2073              		.cfi_offset 11, -8
 2074              		.cfi_offset 14, -4
 2075 0004 04B08DE2 		add	fp, sp, #4
 2076              		.cfi_def_cfa 11, 4
 534:Source/rme_benchmark.c **** 	Cur_addr=RME_BOOT_BENCH_KOM_FRONTIER;
 2077              		.loc 1 534 10
 2078 0008 003000E3 		movw	r3, #:lower16:Cur_addr
 2079 000c 003040E3 		movt	r3, #:upper16:Cur_addr
 2080 0010 0229A0E3 		mov	r2, #32768
 2081 0014 002083E5 		str	r2, [r3]
 535:Source/rme_benchmark.c ****     USR_DBG_S("\r\nTest begin!");
 2082              		.loc 1 535 5
 2083 0018 000000E3 		movw	r0, #:lower16:.LC17
 2084 001c 000040E3 		movt	r0, #:upper16:.LC17
 2085 0020 FEFFFFEB 		bl	USR_DBG_S
 536:Source/rme_benchmark.c **** 
 537:Source/rme_benchmark.c ****     //RME_Same_Prc_Thd_Sig_Testinit();
 538:Source/rme_benchmark.c ****     //RME_Same_Prc_Thd_Switch_Test();
 539:Source/rme_benchmark.c ****     RME_Same_Prc_Switch_Test();
 2086              		.loc 1 539 5
 2087 0024 FEFFFFEB 		bl	RME_Same_Prc_Switch_Test
 540:Source/rme_benchmark.c ****     USR_DBG_S("\r\nTest done!");
 2088              		.loc 1 540 5
 2089 0028 000000E3 		movw	r0, #:lower16:.LC16
 2090 002c 000040E3 		movt	r0, #:upper16:.LC16
 2091 0030 FEFFFFEB 		bl	USR_DBG_S
 2092              	.L105:
 541:Source/rme_benchmark.c ****     while(1);
 2093              		.loc 1 541 10
 2094 0034 FEFFFFEA 		b	.L105
 2095              		.cfi_endproc
 2096              	.LFE32:
 2098              		.text
 2099              	.Letext0:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 63


DEFINED SYMBOLS
                            *ABS*:00000000 rme_benchmark.c
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:25     .bss.RME_Stack1:00000000 RME_Stack1
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:22     .bss.RME_Stack1:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:32     .bss.RME_Stack2:00000000 RME_Stack2
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:29     .bss.RME_Stack2:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:39     .bss.RME_Stack3:00000000 RME_Stack3
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:36     .bss.RME_Stack3:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:46     .bss.RME_Stack4:00000000 RME_Stack4
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:43     .bss.RME_Stack4:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:53     .bss.RME_Stack5:00000000 RME_Stack5
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:50     .bss.RME_Stack5:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:60     .bss.Time:00000000 Time
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:57     .bss.Time:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:67     .bss.RME_Bench_Buf:00000000 RME_Bench_Buf
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:64     .bss.RME_Bench_Buf:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:70     .text.__USR_Putchar:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:75     .text.__USR_Putchar:00000000 __USR_Putchar
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:119    .text.USR_DBG_I:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:124    .text.USR_DBG_I:00000000 USR_DBG_I
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:274    .text.USR_DBG_H:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:279    .text.USR_DBG_H:00000000 USR_DBG_H
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:395    .text.USR_DBG_S:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:400    .text.USR_DBG_S:00000000 USR_DBG_S
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:462    .text.get_time:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:467    .text.get_time:00000000 get_time
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:501    .text.RME_Thd_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:506    .text.RME_Thd_Crt:00000000 RME_Thd_Crt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:553    .text.RME_Thd_Exec_Set:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:558    .text.RME_Thd_Exec_Set:00000000 RME_Thd_Exec_Set
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:593    .text.RME_Thd_Time_Xfer:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:598    .text.RME_Thd_Time_Xfer:00000000 RME_Thd_Time_Xfer
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:631    .text.RME_Thd_Sched_Bind:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:636    .text.RME_Thd_Sched_Bind:00000000 RME_Thd_Sched_Bind
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:679    .text.RME_Thd_Swt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:684    .text.RME_Thd_Swt:00000000 RME_Thd_Swt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:716    .text.RME_Sig_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:721    .text.RME_Sig_Crt:00000000 RME_Sig_Crt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:754    .text.RME_Sig_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:759    .text.RME_Sig_Del:00000000 RME_Sig_Del
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:792    .text.RME_Sig_Snd:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:797    .text.RME_Sig_Snd:00000000 RME_Sig_Snd
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:828    .text.RME_Sig_Rcv:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:833    .text.RME_Sig_Rcv:00000000 RME_Sig_Rcv
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:865    .text.RME_Prc_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:870    .text.RME_Prc_Crt:00000000 RME_Prc_Crt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:905    .text.RME_Prc_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:910    .text.RME_Prc_Del:00000000 RME_Prc_Del
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:943    .text.RME_Prc_Cpt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:948    .text.RME_Prc_Cpt:00000000 RME_Prc_Cpt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:980    .text.RME_Prc_Pgt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:985    .text.RME_Prc_Pgt:00000000 RME_Prc_Pgt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1017   .text.RME_Pgt_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1022   .text.RME_Pgt_Crt:00000000 RME_Pgt_Crt
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1070   .text.RME_Pgt_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1075   .text.RME_Pgt_Del:00000000 RME_Pgt_Del
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1108   .text.RME_Pgt_Add:00000000 $a
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 64


C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1113   .text.RME_Pgt_Add:00000000 RME_Pgt_Add
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1161   .bss.Cur_addr:00000000 Cur_addr
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1158   .bss.Cur_addr:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1168   .bss.start:00000000 start
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1165   .bss.start:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1175   .bss.end:00000000 end
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1172   .bss.end:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1178   .text._RME_Tsc_Init:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1183   .text._RME_Tsc_Init:00000000 _RME_Tsc_Init
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1208   .text.RME_Same_Prc_Thd_Switch_Test_Thd:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1213   .text.RME_Same_Prc_Thd_Switch_Test_Thd:00000000 RME_Same_Prc_Thd_Switch_Test_Thd
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1239   .text.RME_Thd_Create:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1244   .text.RME_Thd_Create:00000000 RME_Thd_Create
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1312   .rodata:00000000 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1313   .rodata:00000000 .LC0
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1316   .rodata:00000018 .LC1
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1319   .text.RME_Same_Prc_Thd_Sig_Test_Thd_send:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1324   .text.RME_Same_Prc_Thd_Sig_Test_Thd_send:00000000 RME_Same_Prc_Thd_Sig_Test_Thd_send
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1355   .rodata:00000020 .LC2
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1358   .rodata:0000003c .LC3
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1361   .rodata:00000058 .LC4
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1364   .text.RME_Same_Prc_Thd_Sig_Test_Thd_recv:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1369   .text.RME_Same_Prc_Thd_Sig_Test_Thd_recv:00000000 RME_Same_Prc_Thd_Sig_Test_Thd_recv
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1413   .rodata:00000064 .LC5
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1416   .rodata:00000068 .LC6
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1419   .rodata:0000007c .LC7
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1422   .rodata:000000a8 .LC8
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1425   .rodata:000000bc .LC9
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1428   .text.RME_Same_Prc_Thd_Sig_Test_Thd_main:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1433   .text.RME_Same_Prc_Thd_Sig_Test_Thd_main:00000000 RME_Same_Prc_Thd_Sig_Test_Thd_main
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1482   .rodata:000000d8 .LC10
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1485   .text.RME_Same_Prc_Thd_Sig_Testinit:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1490   .text.RME_Same_Prc_Thd_Sig_Testinit:00000000 RME_Same_Prc_Thd_Sig_Testinit
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1578   .text.RME_Same_Prc_Thd_Sig_Testinit:00000104 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1585   .rodata:00000104 .LC11
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1588   .rodata:00000120 .LC12
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1591   .rodata:00000138 .LC13
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1594   .text.RME_Same_Prc_Thd_Switch_Test:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1599   .text.RME_Same_Prc_Thd_Switch_Test:00000000 RME_Same_Prc_Thd_Switch_Test
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1741   .text.RME_Same_Prc_Thd_Switch_Test:00000190 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1746   .text.RME_Diff_Prc_Thd_Switch_Test_Thd:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1751   .text.RME_Diff_Prc_Thd_Switch_Test_Thd:00000000 RME_Diff_Prc_Thd_Switch_Test_Thd
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1780   .text.RME_Diff_Prc_Thd_Switch_Test:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1785   .text.RME_Diff_Prc_Thd_Switch_Test:00000000 RME_Diff_Prc_Thd_Switch_Test
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1837   .text.RME_Diff_Prc_Thd_Switch_Test:00000070 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1843   .rodata:00000148 .LC14
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1846   .rodata:00000164 .LC15
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1849   .rodata:00000184 .LC16
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1852   .text.RME_Same_Prc_Switch_Test:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:1857   .text.RME_Same_Prc_Switch_Test:00000000 RME_Same_Prc_Switch_Test
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:2051   .text.RME_Same_Prc_Switch_Test:00000238 $d
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:2057   .rodata:00000194 .LC17
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:2060   .text.RME_Benchmark:00000000 $a
C:\Users\even\AppData\Local\Temp\ccWTnSpL.s:2065   .text.RME_Benchmark:00000000 RME_Benchmark
                           .group:00000000 wm4.0.3b9f63523dc4e8d86e863c7e7e762be7
                           .group:00000000 wm4.rme.h.11.105c42759f88404be372052d8d99e5e6
                           .group:00000000 wm4.benchmark.h.4.93cac077a28578f1e0d65251d1506cef
ARM GAS  C:\Users\even\AppData\Local\Temp\ccWTnSpL.s 			page 65



UNDEFINED SYMBOLS
__aeabi_idiv
__aeabi_idivmod
RME_Svc
RME_Thd_Stub
_RME_Stack_Init
